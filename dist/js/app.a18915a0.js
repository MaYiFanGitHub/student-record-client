(function(e){function t(t){for(var r,s,o=t[0],i=t[1],c=t[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);p&&p(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),l()}function l(){for(var e,t=0;t<n.length;t++){for(var l=n[t],r=!0,s=1;s<l.length;s++){var o=l[s];0!==a[o]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=l[0]))}return e}var r={},s={app:0},a={app:0},n=[];function o(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-ba5247ce":"a690aca8"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var l=r[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.e=function(e){var t=[],l={"chunk-ba5247ce":1};s[e]?t.push(s[e]):0!==s[e]&&l[e]&&t.push(s[e]=new Promise((function(t,l){for(var r="css/"+({}[e]||e)+"."+{"chunk-ba5247ce":"78dc4723"}[e]+".css",a=i.p+r,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var c=n[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===a))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){c=d[o],u=c.getAttribute("data-href");if(u===r||u===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||a,n=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=r,delete s[e],p.parentNode.removeChild(p),l(n)},p.href=a;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){s[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,l){r=a[e]=[t,l]}));t.push(r[2]=n);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=o(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var l=a[e];if(0!==l){if(l){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",d.name="ChunkLoadError",d.type=r,d.request=s,l[1](d)}a[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,l){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(l,r,function(t){return e[t]}.bind(null,r));return l},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;n.push([1,"chunk-vendors"]),l()})({0:function(e,t){},"01e6":function(e,t,l){"use strict";var r=l("5933"),s=l.n(r);s.a},"02eb":function(e,t,l){},"0b08":function(e,t,l){"use strict";var r=l("a3f3"),s=l.n(r);s.a},"0b26":function(e,t,l){},"0c5b":function(e,t,l){"use strict";var r=l("0b26"),s=l.n(r);s.a},1:function(e,t,l){e.exports=l("56d7")},"10cf":function(e,t,l){"use strict";var r=l("dccd"),s=l.n(r);s.a},"1ecb":function(e,t,l){"use strict";var r=l("5579"),s=l.n(r);s.a},2:function(e,t){},2490:function(e,t,l){"use strict";var r=l("92c4"),s=l.n(r);s.a},"2e50":function(e,t,l){"use strict";var r=l("5fb0"),s=l.n(r);s.a},3:function(e,t){},"33ef":function(e,t,l){"use strict";var r=l("3631"),s=l.n(r);s.a},"35ec":function(e,t,l){},3631:function(e,t,l){},"3a59":function(e,t,l){},"3faf":function(e,t,l){"use strict";var r=l("47bc"),s=l.n(r);s.a},"42a4":function(e,t,l){},"451f":function(e,t,l){"use strict";var r=l("c8cb"),s=l.n(r);s.a},4678:function(e,t,l){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"64030","./ms-my.js":"64030","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=a(e);return l(t)}function a(e){if(!l.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=a,e.exports=s,s.id="4678"},"467d":function(e,t,l){},"47bc":function(e,t,l){},"4ee2":function(e,t,l){},5579:function(e,t,l){},5618:function(e,t,l){"use strict";var r=l("9f97"),s=l.n(r);s.a},"56d7":function(e,t,l){"use strict";l.r(t);l("cadf"),l("551c"),l("f751"),l("097d");var r=l("2b0e"),s=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"app"}},[l("router-view")],1)},a=[],n={created:function(){var e=this;window.addEventListener("beforeunload",(function(){localStorage.setItem("messageStore",JSON.stringify(e.$store.state))})),localStorage.getItem("messageStore")&&this.$store.replaceState(Object.assign(this.$store.state,JSON.parse(localStorage.getItem("messageStore"))))}},o=n,i=(l("5c0b"),l("2877")),c=Object(i["a"])(o,s,a,!1,null,null,null),u=c.exports,d=l("8c4f"),p=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-container",{staticClass:"home-container"},[l("el-header",{staticClass:"home-header"},[l("Header")],1),l("el-container",[l("el-aside",{staticClass:"home-aside",attrs:{width:"210px"}},[l("Menu")],1),l("el-container",[l("el-main",{staticClass:"home-main"},[l("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.breadList,(function(t,r){return l("el-breadcrumb-item",{key:r,attrs:{to:r!==e.breadList.length-1&&{path:t.path}}},[e._v("\n            "+e._s(t.meta.name)+"\n          ")])})),1),l("div",{staticClass:"main-content"},[l("router-view",{staticClass:"view"})],1),l("el-footer",{staticClass:"home-footer"},[l("Footer")],1)],1)],1)],1)],1)},m=[],f=l("75fc"),b=(l("a481"),function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.menuActive,router:""}},e._l(e.userMenuList,(function(t){return l("label",{key:t.id},[t.children?l("el-submenu",{attrs:{index:t.id}},[l("template",{slot:"title"},[l("i",{class:t.icon}),l("span",[e._v(e._s(t.title))])]),l("el-menu-item-group",e._l(t.children,(function(t){return l("el-menu-item",{key:t.id,attrs:{index:t.id}},[e._v("\n          "+e._s(t.title)+"\n        ")])})),1)],2):l("el-menu-item",{attrs:{index:t.id}},[l("i",{class:t.icon}),l("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])],1)})),0)}),_=[],h=(l("7514"),[{id:"/welcome",title:"首页",icon:"el-icon-location"},{id:"/role",title:"角色管理",icon:"el-icon-s-opportunity"},{id:"/user",title:"用户管理",icon:"el-icon-user-solid",children:[{id:"/user/userAdd",title:"添加用户"},{id:"/user/userList",title:"用户列表"}]},{id:"/college",title:"学院管理",icon:"el-icon-office-building",children:[{id:"/college/add",title:"学院添加"},{id:"/college/list",title:"学院列表"}]},{id:"/major",title:"专业管理",icon:"el-icon-office-building",children:[{id:"/major/add",title:"专业添加"},{id:"/major/list",title:"专业列表"}]},{id:"/class",title:"班级管理",icon:"el-icon-price-tag",children:[{id:"/class/add",title:"班级添加"},{id:"/class/list",title:"班级列表"}]},{id:"/course",title:"课程管理",icon:"el-icon-attract",children:[{id:"/course/add",title:"课程添加"},{id:"/course/list",title:"课程列表"}]},{id:"/score",title:"成绩管理",icon:"el-icon-mobile",children:[{id:"/score/add",title:"成绩录入"},{id:"/score/list",title:"成绩查询"},{id:"/score/studentList",title:"个人成绩"},{id:"/score/examine",title:"成绩复议审批"}]},{id:"/person",title:"个人资料管理",icon:"el-icon-notebook-2",children:[{id:"/person/add",title:"个人资料录入"},{id:"/person/password",title:"密码修改"}]},{id:"/roll",title:"学籍管理",icon:"el-icon-suitcase-1",children:[{id:"/roll/list",title:"学籍异动审批"},{id:"/roll/add",title:"学籍异动申请"},{id:"/roll/person",title:"个人学籍异动查询"}]},{id:"/honor",title:"奖惩信息管理",icon:"el-icon-set-up",children:[{id:"/honor/add",title:"奖惩活动添加"},{id:"/honor/list",title:"奖惩活动列表"},{id:"/honor/query",title:"奖惩信息查询"}]},{id:"/job",title:"就业信息管理",icon:"el-icon-date",children:[{id:"/job/add",title:"就业信息登记"},{id:"/job/list",title:"就业信息列表"}]},{id:"/studentInfo/list",title:"学生基本信息管理",icon:"el-icon-folder-opened"}]),g=h,y={data:function(){return{userMenuList:[],menuActive:"welcome",userMenus:[]}},mounted:function(){this.userMenus=JSON.parse(this.$store.state.userInfo.role_rank),console.log(this.userMenus);var e=this.getMenuNodes(g);this.userMenuList=e,this.$openMenu()},methods:{$openMenu:function(){var e=this,t=this.$route.path;g.find((function(l){if(l.children){var r=l.children.find((function(e){return e.id===t}));if(r)return e.menuActive=r.id,!0}else if(l.id===t)return e.menuActive=l.id,!0}))},hasAuth:function(e){var t=this.userMenus;if("/welcome"===e.id||-1!==t.indexOf(e.id))return!0;if(e.children){var l=e.children.find((function(e){return-1!==t.indexOf(e.id)}));return!!l}return!1},getMenuNodes:function(e){var t=this;return e.reduce((function(e,l){return t.hasAuth(l)&&(l.children?e.push({id:l.id,title:l.title,icon:l.icon,children:t.getMenuNodes(l.children)}):e.push({id:l.id,title:l.title,icon:l.icon})),e}),[])}},watch:{"$route.path":function(){this.$openMenu()}},computed:{showMenuList:function(){var e=JSON.parse(this.$store.state.userInfo.role_rank||[]);return console.log(e),g}}},v=y,w=(l("61bb"),Object(i["a"])(v,b,_,!1,null,"793ac624",null)),j=w.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header"},[e._m(0),r("div",{staticClass:"user fr"},[r("img",{attrs:{src:l("cf05"),alt:"",srcset:""}}),r("p",[e._v("\n      "+e._s(e.$store.state.userInfo.role_name)+"你好，"),r("span",[e._v(e._s(e.$store.state.userInfo.user_name||e.$store.state.userInfo.user_username))]),r("el-button",{attrs:{type:"text"},on:{click:e.open}},[e._v("退出")])],1)])])},O=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"logo fl"},[r("img",{attrs:{src:l("cf05"),alt:"",srcset:""}}),r("span",[e._v("高校学生档案管理系统")])])}],x=(l("96cf"),l("3b8d")),$=l("bc3a"),S=l.n($),L="production";S.a.defaults.baseURL="development"===L?"//localhost:3000/api":"//feifan.info:3000/api",S.a.defaults.withCredentials=!0,S.a.interceptors.request.use((function(e){return e})),S.a.interceptors.response.use((function(e){var t=e.data;return 200===t.code&&(t.data||!0)}),(function(e){return alert("请求出错",e),new Promise((function(){}))}));var C=S.a,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0;return C.get("/user/all",{params:{user_username:l,role_id:s,user_name:r,currentPage:e,pageSize:t}})},R=function(e){return C.post("/user/add",e)},z=function(e){return C.post("/user/addMore",e)},F=function(e){return C.post("/user/addTeacher",e)},q=function(e){return C.post("/user/addStudent",e)},P=function(e){return C.post("/user/edit",e)},D=function(e){return C.get("/user/remove",{params:{user_username:e}})},E=function(){return C.get("/user/findDean")},M=function(){return C.get("/user/findTeacher")},Y=function(e,t,l){return C.post("/user/login",{user_username:e,user_password:t,role_id:l})},B=function(){return C.get("/user/logout")},A=function(e,t){return C.post("/user/updatePassword",{user_password:e,user_id:t})},T={data:function(){return{}},methods:{open:function(){var e=this;this.$confirm("是否要退出登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,B();case 2:l=t.sent,l&&(e.$message({type:"success",message:"退出成功!"}),e.$store.dispatch("login",{}),e.$router.replace("/login"));case 4:case"end":return t.stop()}}),t)})))).catch()}}},N=T,H=(l("7957"),Object(i["a"])(N,k,O,!1,null,"f8ecf25e",null)),U=H.exports,V=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},J=[function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("p",[e._v("© 2020-2020 马一帆 - 高校学生档案管理系统")]),l("p",[e._v("0961160211")])])}],K={data:function(){return{}}},G=K,Q=(l("10cf"),Object(i["a"])(G,V,J,!1,null,"379e2fb4",null)),W=Q.exports,X={created:function(){this.$store.state.userInfo.user_id||this.$router.replace("/login"),this.getBreadList()},data:function(){return{breadList:[]}},methods:{getBreadList:function(){var e=Object(f["a"])(this.$route.matched).splice(1);this.breadList=e}},components:{Menu:j,Header:U,Footer:W},watch:{$route:function(){this.getBreadList()}}},Z=X,ee=(l("e100"),Object(i["a"])(Z,p,m,!1,null,"5a82ee35",null)),te=ee.exports,le=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"login-box"}},[l("div",{staticClass:"login cl"},[l("div",{staticClass:"left fl"}),l("div",{staticClass:"right fr"},[l("div",{staticClass:"form-box"},[l("h1",[e._v("登录")]),l("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,"status-icon":"",rules:e.rules}},[l("el-form-item",{attrs:{prop:"username"}},[l("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入账号"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[l("i",{staticClass:"el-input__icon el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),l("el-form-item",{attrs:{prop:"password"}},[l("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[l("i",{staticClass:"el-input__icon el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),l("el-form-item",{attrs:{prop:"role"}},[l("el-radio",{attrs:{label:0},model:{value:e.loginForm.role,callback:function(t){e.$set(e.loginForm,"role",t)},expression:"loginForm.role"}},[e._v("管理员")]),l("el-radio",{attrs:{label:1},model:{value:e.loginForm.role,callback:function(t){e.$set(e.loginForm,"role",t)},expression:"loginForm.role"}},[e._v("院长")]),l("el-radio",{attrs:{label:2},model:{value:e.loginForm.role,callback:function(t){e.$set(e.loginForm,"role",t)},expression:"loginForm.role"}},[e._v("教师")]),l("el-radio",{attrs:{label:3},model:{value:e.loginForm.role,callback:function(t){e.$set(e.loginForm,"role",t)},expression:"loginForm.role"}},[e._v("学生")])],1),l("el-form-item",[l("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.login("loginForm")}}},[e._v("提交")])],1)],1)],1)])])])},re=[],se={created:function(){this.$store.state.userInfo.user_id&&this.$router.replace("/welcome")},data:function(){return{loginForm:{username:"",password:"",role:0},rules:{username:{required:!0,message:"请输入用户名",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"}}}},methods:{login:function(){var e=this;this.$refs["loginForm"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r,s,a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=9;break}return r=e.loginForm,s=r.username,a=r.password,n=r.role,t.next=4,Y(s,a,n);case 4:o=t.sent,console.log(l),o?(e.$message({type:"success",message:"登录成功"}),e.$store.dispatch("login",o),e.$router.replace("/welcome")):e.$message({type:"error",message:"登录失败"}),t.next=10;break;case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},ae=se,ne=(l("451f"),Object(i["a"])(ae,le,re,!1,null,null,null)),oe=ne.exports,ie=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"welcome"},[l("div",[l("p",[e._v("你好, "+e._s(e.$store.state.userInfo.user_name))]),l("p",[e._v("欢迎进入高校学生档案管理系统")])])])},ce=[],ue={data:function(){return{test:"test"}}},de=ue,pe=(l("62df"),Object(i["a"])(de,ie,ce,!1,null,"35adf4bd",null)),me=pe.exports,fe=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"role-box"},[l("div",{staticClass:"header cl"},[l("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:e.addRoleDialog}},[e._v("添加角色")])],1),l("div",{staticClass:"content"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.$store.state.roleList,border:""}},[l("el-table-column",{attrs:{label:"序号",width:"100",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"role_id",label:"角色id",align:"center"}}),l("el-table-column",{attrs:{prop:"role_name",label:"角色名",align:"center"}}),l("el-table-column",{attrs:{label:"查看范围",align:"center",width:"520"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.role_rank,(function(t){return l("el-tag",{key:t.id,staticStyle:{margin:"3px"}},[e._v(e._s(e._f("rankLabel")(t)))])}))}}])}),l("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,!0)}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,!1)}}})]}}])})],1)],1),l("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"500px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{attrs:{model:e.role,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"角色名称"}},[l("el-input",{model:{value:e.role.role_name,callback:function(t){e.$set(e.role,"role_name",t)},expression:"role.role_name"}})],1),l("el-form-item",{attrs:{label:"范围"}},[l("el-tree",{ref:"tree",attrs:{data:e.treeData,"show-checkbox":"","node-key":"id",props:e.defaultProps},on:{check:e.nodeClick}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){return e.closeDialog(!1)}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog(!0)}}},[e._v("确 定")])],1)],1)],1)},be=[],_e=(l("ac6a"),function(){return C.get("/role/all")}),he=function(e){return C.post("/role/add",e)},ge=function(e){return C.post("/role/edit",e)},ye=function(e){return C.get("/role/remove",{params:{role_id:e}})},ve=[],we={};g.forEach((function(e){e.children?ve.push.apply(ve,[{id:e.id,title:e.title}].concat(Object(f["a"])(e.children))):ve.push(e)})),ve.forEach((function(e){we[e.id]=e.title})),console.log(we);var je={data:function(){return{loading:!0,role:{role_id:-1,role_name:"",role_rank:[]},isEdit:!1,dialogVisible:!1,treeData:g,defaultProps:{children:"children",label:"title"}}},mounted:function(){this.loading=!0,this.$store.dispatch("getAllRoll"),this.loading=!1},methods:{handleClick:function(e,t){var l=this;t?(this.dialogVisible=!0,this.isEdit=!0,this.$nextTick((function(){l.$refs.tree.setCheckedKeys(e.role_rank),l.role={role_id:e.role_id,role_name:e.role_name,role_rank:JSON.stringify(l.$refs.tree.getCheckedNodes())}}))):this.$confirm("确定要删除此记录吗？是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye(e.role_id);case 2:l.$message({type:"success",message:"删除成功!"}),l.loading=!0,l.$store.dispatch("getAllRoll"),l.loading=!1;case 6:case"end":return t.stop()}}),t)})))).catch((function(){}))},nodeClick:function(e,t){this.role.role_rank=JSON.stringify(t.checkedKeys)},addRoleDialog:function(){this.isEdit=!1,this.dialogVisible=!0},handleClose:function(){this.role={role_id:-1,role_name:"",role_rank:""},this.$refs.tree.setCheckedKeys([]),this.dialogVisible=!1},closeDialog:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}if(this.isEdit){e.next=7;break}return e.next=4,he(this.role);case 4:l=e.sent,e.next=10;break;case 7:return e.next=9,ge(this.role);case 9:l=e.sent;case 10:l&&(this.$message({message:this.isEdit?"更新成功":"添加成功",type:"success"}),this.loading=!0,this.$store.dispatch("getAllRoll"),this.loading=!1,this.dialogVisible=!1);case 11:this.handleClose();case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},filters:{rankLabel:function(e){return console.log(e),we[e]}}},ke=je,Oe=(l("93d5"),Object(i["a"])(ke,fe,be,!1,null,"6137f55f",null)),xe=Oe.exports,$e=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("router-view")],1)},Se=[],Le={mounted:function(){this.$store.dispatch("getAllPolitics"),this.$store.dispatch("getAllClass")},data:function(){return{}}},Ce=Le,Ie=(l("9105"),Object(i["a"])(Ce,$e,Se,!1,null,"5e629740",null)),Re=Ie.exports,ze=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"用户名"}},[l("el-input",{attrs:{placeholder:"用户名"},model:{value:e.formInline.user_username,callback:function(t){e.$set(e.formInline,"user_username",t)},expression:"formInline.user_username"}})],1),l("el-form-item",{attrs:{label:"权限"}},[l("el-select",{attrs:{placeholder:"权限"},model:{value:e.formInline.role_id,callback:function(t){e.$set(e.formInline,"role_id",t)},expression:"formInline.role_id"}},e._l(e.roleListComputed,(function(e){return l("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)],1),l("el-form-item",{attrs:{label:"姓名"}},[l("el-input",{attrs:{placeholder:"姓名"},model:{value:e.formInline.user_name,callback:function(t){e.$set(e.formInline,"user_name",t)},expression:"formInline.user_name"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.userList,stripe:""}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"用户名"}},[l("span",[e._v(e._s(t.row.user_username))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"权限"}},[l("span",[e._v(e._s(t.row.role_name))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"姓名"}},[l("span",[e._v(e._s(t.row.user_name))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"曾用名"}},[l("span",[e._v(e._s(t.row.user_last_name))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"性别"}},[l("span",[e._v(e._s(t.row.user_sex))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"年龄"}},[l("span",[e._v(e._s(t.row.user_age))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"民族"}},[l("span",[e._v(e._s(t.row.user_nation))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"手机"}},[l("span",[e._v(e._s(t.row.user_tel))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"出生日期"}},[l("span",[e._v(e._s(t.row.user_birthday))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"籍贯"}},[l("span",[e._v(e._s(t.row.user_address))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"健康状况"}},[l("span",[e._v(e._s(t.row.user_heath))])])],1),l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"文化程度"}},[l("span",[e._v(e._s(t.row.user_culture))])])],1),t.row.politics_status?l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"政治面貌"}},[l("span",[e._v(e._s(t.row.politics_status))])])],1):e._e(),t.row.college_name?l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"所属学院"}},[l("span",[e._v(e._s(t.row.college_name))])])],1):e._e(),t.row.specialty_name?l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"所属专业"}},[l("span",[e._v(e._s(t.row.specialty_name))])])],1):e._e(),t.row.class_name?l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"所属班级"}},[l("span",[e._v(e._s(t.row.class_name))])])],1):e._e(),t.row.teacher_title?l("el-col",{attrs:{span:5}},[l("el-form-item",{attrs:{label:"职称"}},[l("span",[e._v(e._s(t.row.teacher_title))])])],1):e._e()],1)]}}])}),l("el-table-column",{attrs:{label:"id",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"user_username",label:"用户名",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"role_name",label:"权限",align:"center","min-width":"80"}}),l("el-table-column",{attrs:{prop:"user_name",label:"姓名",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"user_last_name",label:"曾用名",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"user_sex",label:"性别",align:"center","min-width":"100"}}),l("el-table-column",{attrs:{prop:"user_age",label:"年龄",align:"center","min-width":"100"}}),l("el-table-column",{attrs:{prop:"user_nation",label:"民族",align:"center","min-width":"100"}}),l("el-table-column",{attrs:{prop:"user_tel",label:"手机",align:"center","min-width":"120"}}),l("el-table-column",{attrs:{prop:"user_birthday",label:"出生日期",align:"center","min-width":"130"}}),l("el-table-column",{attrs:{prop:"user_address",label:"籍贯",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"user_heath",label:"健康状况",align:"center","min-width":"100"}}),l("el-table-column",{attrs:{prop:"user_culture",label:"文化程度",align:"center","min-width":"100"}}),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,!0)}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,!1)}}})]}}])})],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),l("el-dialog",{attrs:{title:"修改用户信息",visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("userForm",{ref:"userFormEle",attrs:{dialogVisible:e.dialogVisible,editUserObj:e.editUserObj,roleList:e.$store.state.roleList}}),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){return e.handleCloseBtn(!1)}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCloseBtn(!0)}}},[e._v("确 定")])],1)],1)],1)},Fe=[],qe=l("c1df"),Pe=l.n(qe),De=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-form"},[l("el-form",{ref:"userObj",attrs:{model:e.userObj,"label-width":"80px",rules:e.rules}},[e.$route.params.flag?l("el-page-header",{attrs:{content:"用户编辑"},on:{back:e.goBack}}):e._e(),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"用户名",prop:"user_username"}},[l("el-input",{attrs:{disabled:e.$route.params.flag},model:{value:e.userObj.user_username,callback:function(t){e.$set(e.userObj,"user_username",t)},expression:"userObj.user_username"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[e.$route.params.flag?e._e():l("el-form-item",{attrs:{label:"密码",prop:"user_password"}},[l("el-input",{attrs:{"show-password":""},model:{value:e.userObj.user_password,callback:function(t){e.$set(e.userObj,"user_password",t)},expression:"userObj.user_password"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"权限",prop:"role_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:e.$route.params.flag},model:{value:e.userObj.role_id,callback:function(t){e.$set(e.userObj,"role_id",t)},expression:"userObj.role_id"}},e._l(e.roleListComputed,(function(e){return l("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"姓名"}},[l("el-input",{model:{value:e.userObj.user_name,callback:function(t){e.$set(e.userObj,"user_name",t)},expression:"userObj.user_name"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"曾用名"}},[l("el-input",{model:{value:e.userObj.user_last_name,callback:function(t){e.$set(e.userObj,"user_last_name",t)},expression:"userObj.user_last_name"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"性别"}},[l("el-radio",{attrs:{label:"男"},model:{value:e.userObj.user_sex,callback:function(t){e.$set(e.userObj,"user_sex",t)},expression:"userObj.user_sex"}},[e._v("男")]),l("el-radio",{attrs:{label:"女"},model:{value:e.userObj.user_sex,callback:function(t){e.$set(e.userObj,"user_sex",t)},expression:"userObj.user_sex"}},[e._v("女")])],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"年龄"}},[l("el-input",{attrs:{type:"age",autocomplete:"off"},model:{value:e.userObj.user_age,callback:function(t){e.$set(e.userObj,"user_age",e._n(t))},expression:"userObj.user_age"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"民族"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择民族"},model:{value:e.userObj.user_nation,callback:function(t){e.$set(e.userObj,"user_nation",t)},expression:"userObj.user_nation"}},[l("el-option",{attrs:{label:"汉族",value:"汉族"}}),l("el-option",{attrs:{label:"土家族",value:"土家族"}}),l("el-option",{attrs:{label:"蒙古族",value:"蒙古族"}}),l("el-option",{attrs:{label:"回族",value:"回族"}}),l("el-option",{attrs:{label:"苗族",value:"苗族"}}),l("el-option",{attrs:{label:"满族",value:"满族"}})],1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"手机"}},[l("el-input",{model:{value:e.userObj.user_tel,callback:function(t){e.$set(e.userObj,"user_tel",t)},expression:"userObj.user_tel"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"出生日期"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.userObj.user_birthday,callback:function(t){e.$set(e.userObj,"user_birthday",t)},expression:"userObj.user_birthday"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"籍贯"}},[l("el-input",{model:{value:e.userObj.user_address,callback:function(t){e.$set(e.userObj,"user_address",t)},expression:"userObj.user_address"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"健康状况"}},[l("el-input",{model:{value:e.userObj.user_heath,callback:function(t){e.$set(e.userObj,"user_heath",t)},expression:"userObj.user_heath"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"文化程度"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择文化程度"},model:{value:e.userObj.user_culture,callback:function(t){e.$set(e.userObj,"user_culture",t)},expression:"userObj.user_culture"}},[l("el-option",{attrs:{label:"小学",value:"小学"}}),l("el-option",{attrs:{label:"初中",value:"初中"}}),l("el-option",{attrs:{label:"高中",value:"高中"}}),l("el-option",{attrs:{label:"本科",value:"本科"}}),l("el-option",{attrs:{label:"研究生",value:"研究生"}}),l("el-option",{attrs:{label:"博士",value:"博士"}})],1)],1)],1),2===e.userObj.role_id||4===e.userObj.role_id?l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"职称"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择职称"},model:{value:e.userObj.teacher_title,callback:function(t){e.$set(e.userObj,"teacher_title",t)},expression:"userObj.teacher_title"}},[l("el-option",{attrs:{label:"助教",value:"助教"}}),l("el-option",{attrs:{label:"讲师",value:"讲师"}}),l("el-option",{attrs:{label:"副教授",value:"副教授"}}),l("el-option",{attrs:{label:"教授",value:"教授"}})],1)],1)],1):e._e(),3===e.userObj.role_id?l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"政治面貌",prop:"politics_status_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择政治面貌"},model:{value:e.userObj.politics_status_id,callback:function(t){e.$set(e.userObj,"politics_status_id",t)},expression:"userObj.politics_status_id"}},e._l(e.$store.state.politicsList,(function(e){return l("el-option",{key:e.politics_status_id,attrs:{label:e.politics_status,value:e.politics_status_id}})})),1)],1)],1):e._e(),3===e.userObj.role_id?l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"所属学院",prop:"college_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属学院",disabled:""},on:{change:e.collegeChange},model:{value:e.userObj.college_id,callback:function(t){e.$set(e.userObj,"college_id",t)},expression:"userObj.college_id"}},e._l(e.collegeList,(function(e){return l("el-option",{key:e.college_id,attrs:{label:e.college_name,value:e.college_id}})})),1)],1)],1):e._e(),3===e.userObj.role_id?l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"所属专业",prop:"specialty"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.marjorChange},model:{value:e.userObj.specialty,callback:function(t){e.$set(e.userObj,"specialty",t)},expression:"userObj.specialty"}},e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})})),1)],1)],1):e._e(),3===e.userObj.role_id?l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"所属班级",prop:"class_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择班级"},model:{value:e.userObj.class_id,callback:function(t){e.$set(e.userObj,"class_id",t)},expression:"userObj.class_id"}},e._l(e.classList,(function(e){return l("el-option",{key:e.class_id,attrs:{label:e.class_name,value:e.class_id}})})),1)],1)],1):e._e(),l("el-col",{attrs:{span:21,offset:2}},[l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("添加")]),l("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)},Ee=[],Me=(l("8e6e"),l("456d"),l("bd86")),Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return C.get("/college/all",{params:{currentPage:e,pageSize:t,college_name:l,user_name:r}})},Be=function(e){return C.post("/college/add",e)},Ae=function(e){return C.post("/college/edit",e)},Te=function(e){return C.get("/college/remove",{params:{college_id:e}})},Ne=function(){return C.get("/college/select")},He=function(){return C.get("/college/selectByMajor")},Ue=l("2f62");function Ve(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function Je(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(l),!0).forEach((function(t){Object(Me["a"])(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):Ve(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var Ke={props:["dialogVisible","editUserObj"],mounted:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.dispatch("getAllRoll"),e.next=3,He();case 3:t=e.sent,this.collegeList=t,l=this.$route.params,r=l.flag,s=l.data,r&&(this.userObj=s,this.classList=Object.assign({},this.$store.state.classList.filter((function(e){return e.specialty===a.userObj.specialty})))),this.majorList=Object.assign({},this.collegeList.find((function(e){return e.college_id===a.userObj.college_id}))["majorList"]);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{userObj:{user_username:"",user_password:"",role_id:"",user_name:"",user_sex:"",user_age:"",user_address:"",user_nation:"",user_tel:"",user_birthday:"",user_last_name:"",user_heath:"",user_culture:"",teacher_title:"",politics_status_id:"",specialty:"",college_id:this.$store.state.userInfo.college_id,class_id:""},collegeList:[],majorList:[],classList:[],rules:{role_id:{required:!0,message:"请选择权限",trigger:"blur"},user_username:{required:!0,message:"请输入用户名",trigger:"blur"},user_password:{required:!0,message:"请输入密码",trigger:"blur"},specialty:{required:!0,message:"请选择专业",trigger:"blur"},college_id:{required:!0,message:"请选择学院",trigger:"blur"},class_id:{required:!0,message:"请选择班级",trigger:"blur"}},isSuccess:!1}},methods:{onSubmit:function(){var e=this;this.$refs["userObj"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=15;break}if(!e.$route.params.flag){t.next=7;break}return t.next=4,P(e.userObj);case 4:r=t.sent,t.next=10;break;case 7:return t.next=9,R(e.userObj);case 9:r=t.sent;case 10:r&&(e.$message({type:"success",message:e.$route.params.flag?"更新成功":"添加成功!"}),e.userObj={}),e.$route.params.flag&&e.goBack(),e.isSuccess=!0,t.next=16;break;case 15:e.isSuccess=!1;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs["userObj"].resetFields()},goBack:function(){this.$router.back()},collegeChange:function(e){this.majorList=Object.assign({},this.collegeList.find((function(t){return t.college_id===e}))["majorList"]),this.userObj.specialty=""},marjorChange:function(e){console.log(e),this.userObj.specialty=e,this.classList=Object.assign({},this.$store.state.classList.filter((function(t){return t.specialty===e}))),this.$set(this.userObj,"class_id","")}},watch:{editUserObj:function(){this.userObj=Object.assign({},this.editUserObj)}},computed:Je({},Object(Ue["b"])(["roleList"]),{roleListComputed:function(){var e=this.$store.state.userInfo.role_id;return this.roleList.filter((function(t){if(0===e){if(0===t.role_id||1===t.role_id)return!0}else if(1===e){if(4===t.role_id)return!0}else if(4===e&&(2===t.role_id||3===t.role_id))return!0}))}})},Ge=Ke,Qe=(l("5727"),Object(i["a"])(Ge,De,Ee,!1,null,"16e23434",null)),We=Qe.exports,Xe={mounted:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.dispatch("getAllRoll"),this.queryUserList();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{formInline:{user_username:"",role_id:-1,user_name:""},userList:[{user_username:"user1",user_password:"123",role_id:1,user_name:"张三",user_sex:"男",user_age:19,user_address:"河北省邯郸市",user_nation:"汉族",user_tel:"13731002865",user_birthday:Date.now(),user_last_name:"李四",user_heath:"健康",user_culture:"本科"}],dialogVisible:!1,editUserObj:{},page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{onSubmit:function(){this.page.currentPage=1,this.queryUserList()},queryUserList:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.user_username,n=s.user_name,o=s.role_id,this.loading=!0,e.next=5,I(l,r,a,n,o);case 5:i=e.sent,i.userList.forEach((function(e){return e.user_birthday=Pe()(e.user_birthday).format("YYYY-MM-DD")})),this.userList=i.userList,this.page=i.page,this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleClick:function(e,t){var l=this;t?this.$router.push({name:"userEdit",params:{flag:!0,data:e}}):this.$confirm("确定要删除此记录吗？是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,D(e.user_username);case 2:r=t.sent,r&&(l.$message({type:"success",message:"删除成功!"}),l.queryUserList());case 4:case"end":return t.stop()}}),t)})))).catch((function(){l.$message({type:"info",message:"已取消删除"})}))},handleCloseBtn:function(e){e?(this.$refs.userFormEle.onSubmit(),this.dialogVisible=!1,this.queryUserList()):(this.$refs.userFormEle.resetForm(),this.dialogVisible=!1)},handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryUserList()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryUserList()}},computed:{roleList:function(){return[{role_id:-1,role_name:"全部"}].concat(Object(f["a"])(this.$store.state.roleList))},roleListComputed:function(){var e=this.$store.state.userInfo.role_id,t=this.roleList.filter((function(t){if(0===e){if(0===t.role_id||1===t.role_id)return!0}else if(1===e){if(4===t.role_id)return!0}else if(4===e&&(2===t.role_id||3===t.role_id))return!0}));return[{role_id:-1,role_name:"全部"}].concat(Object(f["a"])(t))}},components:{userForm:We}},Ze=Xe,et=(l("33ef"),Object(i["a"])(Ze,ze,Fe,!1,null,"604213a4",null)),tt=et.exports,lt=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-add"},[l("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[l("el-tab-pane",{attrs:{label:"添加单个用户",name:"first"}},[l("UserForm",{attrs:{roleList:e.roleList}})],1),0===e.$store.state.userInfo.role_id?l("el-tab-pane",{attrs:{label:"批量导入管理员",name:"second"}},[l("AddManager")],1):e._e(),0===e.$store.state.userInfo.role_id?l("el-tab-pane",{attrs:{label:"批量导入院长",name:"three"}},[l("AddDean")],1):e._e(),4===e.$store.state.userInfo.role_id?l("el-tab-pane",{attrs:{label:"批量导入教师",name:"four"}},[l("AddTeacher")],1):e._e(),1===e.$store.state.userInfo.role_id?l("el-tab-pane",{attrs:{label:"批量导入教秘",name:"five"}},[l("AddTeacherSec")],1):e._e(),4===e.$store.state.userInfo.role_id?l("el-tab-pane",{attrs:{label:"批量导入学生",name:"six",lazy:""}},[l("AddStudent")],1):e._e()],1)],1)},rt=[],st=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"user-add-header cl"},[l("el-upload",{staticClass:"fr",attrs:{disabled:!1,action:"customize",name:"openFile","http-request":e.uploadFile,"file-list":e.file,"show-file-list":!1}},[l("el-button",{staticClass:"fr",attrs:{type:"primary",icon:"el-icon-bottom-right"}},[e._v("导入用户")])],1),l("a",{attrs:{href:"http://localhost:3000/template/%E7%94%A8%E6%88%B7%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx"}},[l("el-button",{staticClass:"fr",attrs:{type:"text"}},[e._v("下载导入模板")])],1)],1),l("div",{staticClass:"user-add-content"},[l("div",[l("el-button",{staticClass:"fl all",attrs:{type:"text"},on:{click:e.allDelete}},[e._v("批量删除")])],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50"}}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index"}}),l("el-table-column",{attrs:{label:"用户名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_username,callback:function(l){e.$set(t.row,"user_username",l)},expression:"scope.row.user_username"}})]}}])}),l("el-table-column",{attrs:{label:"密码","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_password,callback:function(l){e.$set(t.row,"user_password",l)},expression:"scope.row.user_password"}})]}}])}),l("el-table-column",{attrs:{label:"权限","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:t.row.role_id,callback:function(l){e.$set(t.row,"role_id",l)},expression:"scope.row.role_id"}},e._l(e.roleList,(function(e){return l("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"姓名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_name,callback:function(l){e.$set(t.row,"user_name",l)},expression:"scope.row.user_name"}})]}}])}),l("el-table-column",{attrs:{label:"曾用名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_last_name,callback:function(l){e.$set(t.row,"user_last_name",l)},expression:"scope.row.user_last_name"}})]}}])}),l("el-table-column",{attrs:{label:"性别","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-radio",{attrs:{label:"男"},model:{value:t.row.user_sex,callback:function(l){e.$set(t.row,"user_sex",l)},expression:"scope.row.user_sex"}},[e._v("男")]),l("el-radio",{attrs:{label:"女"},model:{value:t.row.user_sex,callback:function(l){e.$set(t.row,"user_sex",l)},expression:"scope.row.user_sex"}},[e._v("女")])]}}])}),l("el-table-column",{attrs:{label:"年龄","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_age,callback:function(l){e.$set(t.row,"user_age",e._n(l))},expression:"scope.row.user_age"}})]}}])}),l("el-table-column",{attrs:{label:"民族","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择民族"},model:{value:t.row.user_nation,callback:function(l){e.$set(t.row,"user_nation",l)},expression:"scope.row.user_nation"}},[l("el-option",{attrs:{label:"汉族",value:"汉族"}}),l("el-option",{attrs:{label:"土家族",value:"土家族"}}),l("el-option",{attrs:{label:"蒙古族",value:"蒙古族"}}),l("el-option",{attrs:{label:"回族",value:"回族"}}),l("el-option",{attrs:{label:"苗族",value:"苗族"}}),l("el-option",{attrs:{label:"满族",value:"满族"}})],1)]}}])}),l("el-table-column",{attrs:{label:"手机","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_tel,callback:function(l){e.$set(t.row,"user_tel",l)},expression:"scope.row.user_tel"}})]}}])}),l("el-table-column",{attrs:{label:"出生日期","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.row.user_birthday,callback:function(l){e.$set(t.row,"user_birthday",l)},expression:"scope.row.user_birthday"}})]}}])}),l("el-table-column",{attrs:{label:"籍贯","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_address,callback:function(l){e.$set(t.row,"user_address",l)},expression:"scope.row.user_address"}})]}}])}),l("el-table-column",{attrs:{label:"健康状况","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_heath,callback:function(l){e.$set(t.row,"user_heath",l)},expression:"scope.row.user_heath"}})]}}])}),l("el-table-column",{attrs:{label:"文化程度","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.row.user_culture,callback:function(l){e.$set(t.row,"user_culture",l)},expression:"scope.row.user_culture"}},[l("el-option",{attrs:{label:"小学",value:"小学"}}),l("el-option",{attrs:{label:"初中",value:"初中"}}),l("el-option",{attrs:{label:"高中",value:"高中"}}),l("el-option",{attrs:{label:"本科",value:"本科"}}),l("el-option",{attrs:{label:"研究生",value:"研究生"}}),l("el-option",{attrs:{label:"博士",value:"博士"}})],1)]}}])}),l("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",disabled:1===e.userList.length},on:{click:function(l){return e.addOrRemove(t,!0)}}}),t.$index===e.userList.length-1?l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(l){return e.addOrRemove(t,!1)}}}):e._e()]}}])})],1)],1),l("div",{staticClass:"user-add-footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.addMoreUser}},[e._v("提交")]),e._v("\n      \n    "),l("el-button",{on:{click:e.resetClick}},[e._v("重置")])],1)])},at=[],nt=l("1146"),ot=l.n(nt);function it(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function ct(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?it(Object(l),!0).forEach((function(t){Object(Me["a"])(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):it(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var ut={mounted:function(){this.$store.dispatch("getAllRoll")},data:function(){return{userList:[{role_id:0}],multipleSelection:[],activeName:"second",file:[],loading:!1}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},addOrRemove:function(e,t){t?1!==this.userList.length&&this.userList.splice(e.$index,1):this.userList.push({role_id:0})},allDelete:function(){var e=this,t=this.userList.filter((function(t){return-1===e.multipleSelection.indexOf(t)}));this.userList=t,0===this.userList.length&&this.userList.push({role_id:0})},addMoreUser:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z(this.userList);case 2:t=e.sent,t&&(this.$message({type:"success",message:"添加成功!"}),this.userList=[{role_id:0}]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadFile:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l=t.file,r=new FileReader,this.loading=!0,r.onload=function(e){try{var t=e.target.result,l=ot.a.read(t,{type:"binary"});for(var r in l.Sheets){var a=ot.a.utils.sheet_to_json(l.Sheets[r]),n=a.map((function(e){return{user_username:e["用户名"],user_password:e["密码"],role_id:e[Object.keys(e)[2]],user_name:e["姓名"],user_sex:e["性别"],user_age:e["年龄"],user_address:e["籍贯"],user_nation:e["民族"],user_tel:e["手机"],user_birthday:s.$.formatDate(e["出生日期"]),user_last_name:e["曾用名"],user_heath:e["健康状况"],user_culture:e["文化程度"]}}));s.userList=n}s.loading=!1}catch(o){s.$message.warning("文件类型不正确！")}},r.readAsBinaryString(l);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetClick:function(){this.userList=[{role_id:0}],this.multipleSelection=[]}},computed:ct({},Object(Ue["b"])(["roleList"]))},dt=ut,pt=(l("01e6"),Object(i["a"])(dt,st,at,!1,null,"23388adc",null)),mt=pt.exports,ft=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"user-add-header cl"},[l("el-upload",{staticClass:"fr",attrs:{disabled:!1,action:"customize",name:"openFile","http-request":e.uploadFile,"file-list":e.file,"show-file-list":!1}},[l("el-button",{staticClass:"fr",attrs:{type:"primary",icon:"el-icon-bottom-right"}},[e._v("导入用户")])],1),l("a",{attrs:{href:"http://localhost:3000/template/%E7%94%A8%E6%88%B7%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx"}},[l("el-button",{staticClass:"fr",attrs:{type:"text"}},[e._v("下载导入模板")])],1)],1),l("div",{staticClass:"user-add-content"},[l("div",[l("el-button",{staticClass:"fl all",attrs:{type:"text"},on:{click:e.allDelete}},[e._v("批量删除")])],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50"}}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index"}}),l("el-table-column",{attrs:{label:"用户名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_username,callback:function(l){e.$set(t.row,"user_username",l)},expression:"scope.row.user_username"}})]}}])}),l("el-table-column",{attrs:{label:"密码","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_password,callback:function(l){e.$set(t.row,"user_password",l)},expression:"scope.row.user_password"}})]}}])}),l("el-table-column",{attrs:{label:"权限","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:t.row.role_id,callback:function(l){e.$set(t.row,"role_id",l)},expression:"scope.row.role_id"}},e._l(e.roleList,(function(e){return l("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"姓名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_name,callback:function(l){e.$set(t.row,"user_name",l)},expression:"scope.row.user_name"}})]}}])}),l("el-table-column",{attrs:{label:"曾用名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_last_name,callback:function(l){e.$set(t.row,"user_last_name",l)},expression:"scope.row.user_last_name"}})]}}])}),l("el-table-column",{attrs:{label:"性别","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-radio",{attrs:{label:"男"},model:{value:t.row.user_sex,callback:function(l){e.$set(t.row,"user_sex",l)},expression:"scope.row.user_sex"}},[e._v("男")]),l("el-radio",{attrs:{label:"女"},model:{value:t.row.user_sex,callback:function(l){e.$set(t.row,"user_sex",l)},expression:"scope.row.user_sex"}},[e._v("女")])]}}])}),l("el-table-column",{attrs:{label:"年龄","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_age,callback:function(l){e.$set(t.row,"user_age",e._n(l))},expression:"scope.row.user_age"}})]}}])}),l("el-table-column",{attrs:{label:"民族","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择民族"},model:{value:t.row.user_nation,callback:function(l){e.$set(t.row,"user_nation",l)},expression:"scope.row.user_nation"}},[l("el-option",{attrs:{label:"汉族",value:"汉族"}}),l("el-option",{attrs:{label:"土家族",value:"土家族"}}),l("el-option",{attrs:{label:"蒙古族",value:"蒙古族"}}),l("el-option",{attrs:{label:"回族",value:"回族"}}),l("el-option",{attrs:{label:"苗族",value:"苗族"}}),l("el-option",{attrs:{label:"满族",value:"满族"}})],1)]}}])}),l("el-table-column",{attrs:{label:"手机","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_tel,callback:function(l){e.$set(t.row,"user_tel",l)},expression:"scope.row.user_tel"}})]}}])}),l("el-table-column",{attrs:{label:"出生日期","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.row.user_birthday,callback:function(l){e.$set(t.row,"user_birthday",l)},expression:"scope.row.user_birthday"}})]}}])}),l("el-table-column",{attrs:{label:"籍贯","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_address,callback:function(l){e.$set(t.row,"user_address",l)},expression:"scope.row.user_address"}})]}}])}),l("el-table-column",{attrs:{label:"健康状况","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_heath,callback:function(l){e.$set(t.row,"user_heath",l)},expression:"scope.row.user_heath"}})]}}])}),l("el-table-column",{attrs:{label:"文化程度","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.row.user_culture,callback:function(l){e.$set(t.row,"user_culture",l)},expression:"scope.row.user_culture"}},[l("el-option",{attrs:{label:"小学",value:"小学"}}),l("el-option",{attrs:{label:"初中",value:"初中"}}),l("el-option",{attrs:{label:"高中",value:"高中"}}),l("el-option",{attrs:{label:"本科",value:"本科"}}),l("el-option",{attrs:{label:"研究生",value:"研究生"}}),l("el-option",{attrs:{label:"博士",value:"博士"}})],1)]}}])}),l("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",disabled:1===e.userList.length},on:{click:function(l){return e.addOrRemove(t,!0)}}}),t.$index===e.userList.length-1?l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(l){return e.addOrRemove(t,!1)}}}):e._e()]}}])})],1)],1),l("div",{staticClass:"user-add-footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.addMoreUser}},[e._v("提交")]),e._v("\n      \n    "),l("el-button",{on:{click:e.resetClick}},[e._v("重置")])],1)])},bt=[];function _t(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function ht(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(l),!0).forEach((function(t){Object(Me["a"])(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):_t(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var gt={mounted:function(){this.$store.dispatch("getAllRoll")},data:function(){return{userList:[{role_id:1}],multipleSelection:[],activeName:"second",file:[],loading:!1}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},addOrRemove:function(e,t){t?1!==this.userList.length&&this.userList.splice(e.$index,1):this.userList.push({role_id:1})},allDelete:function(){var e=this,t=this.userList.filter((function(t){return-1===e.multipleSelection.indexOf(t)}));this.userList=t,0===this.userList.length&&this.userList.push({role_id:1})},addMoreUser:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z(this.userList);case 2:t=e.sent,t&&(this.$message({type:"success",message:"添加成功!"}),this.userList=[{role_id:1}]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadFile:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l=t.file,r=new FileReader,this.loading=!0,r.onload=function(e){try{var t=e.target.result,l=ot.a.read(t,{type:"binary"});for(var r in l.Sheets){var a=ot.a.utils.sheet_to_json(l.Sheets[r]),n=a.map((function(e){return{user_username:e["用户名"],user_password:e["密码"],role_id:e[Object.keys(e)[2]],user_name:e["姓名"],user_sex:e["性别"],user_age:e["年龄"],user_address:e["籍贯"],user_nation:e["民族"],user_tel:e["手机"],user_birthday:s.$.formatDate(e["出生日期"]),user_last_name:e["曾用名"],user_heath:e["健康状况"],user_culture:e["文化程度"]}}));s.userList=n}s.loading=!1}catch(o){s.$message.warning("文件类型不正确！")}},r.readAsBinaryString(l);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetClick:function(){this.userList=[{role_id:1}],this.multipleSelection=[]}},computed:ht({},Object(Ue["b"])(["roleList"]))},yt=gt,vt=(l("ca9a"),Object(i["a"])(yt,ft,bt,!1,null,"5965d7fc",null)),wt=vt.exports,jt=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"user-add-header cl"},[l("el-upload",{staticClass:"fr",attrs:{disabled:!1,action:"customize",name:"openFile","http-request":e.uploadFile,"file-list":e.file,"show-file-list":!1}},[l("el-button",{staticClass:"fr",attrs:{type:"primary",icon:"el-icon-bottom-right"}},[e._v("导入用户")])],1),l("a",{attrs:{href:"http://localhost:3000/template/%E7%94%A8%E6%88%B7%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx"}},[l("el-button",{staticClass:"fr",attrs:{type:"text"}},[e._v("下载导入模板")])],1)],1),l("div",{staticClass:"user-add-content"},[l("div",[l("el-button",{staticClass:"fl all",attrs:{type:"text"},on:{click:e.allDelete}},[e._v("批量删除")])],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50"}}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index"}}),l("el-table-column",{attrs:{label:"用户名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_username,callback:function(l){e.$set(t.row,"user_username",l)},expression:"scope.row.user_username"}})]}}])}),l("el-table-column",{attrs:{label:"密码","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_password,callback:function(l){e.$set(t.row,"user_password",l)},expression:"scope.row.user_password"}})]}}])}),l("el-table-column",{attrs:{label:"权限","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:t.row.role_id,callback:function(l){e.$set(t.row,"role_id",l)},expression:"scope.row.role_id"}},e._l(e.roleList,(function(e){return l("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"姓名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_name,callback:function(l){e.$set(t.row,"user_name",l)},expression:"scope.row.user_name"}})]}}])}),l("el-table-column",{attrs:{label:"曾用名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_last_name,callback:function(l){e.$set(t.row,"user_last_name",l)},expression:"scope.row.user_last_name"}})]}}])}),l("el-table-column",{attrs:{label:"性别","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-radio",{attrs:{label:"男"},model:{value:t.row.user_sex,callback:function(l){e.$set(t.row,"user_sex",l)},expression:"scope.row.user_sex"}},[e._v("男")]),l("el-radio",{attrs:{label:"女"},model:{value:t.row.user_sex,callback:function(l){e.$set(t.row,"user_sex",l)},expression:"scope.row.user_sex"}},[e._v("女")])]}}])}),l("el-table-column",{attrs:{label:"年龄","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_age,callback:function(l){e.$set(t.row,"user_age",e._n(l))},expression:"scope.row.user_age"}})]}}])}),l("el-table-column",{attrs:{label:"民族","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择民族"},model:{value:t.row.user_nation,callback:function(l){e.$set(t.row,"user_nation",l)},expression:"scope.row.user_nation"}},[l("el-option",{attrs:{label:"汉族",value:"汉族"}}),l("el-option",{attrs:{label:"土家族",value:"土家族"}}),l("el-option",{attrs:{label:"蒙古族",value:"蒙古族"}}),l("el-option",{attrs:{label:"回族",value:"回族"}}),l("el-option",{attrs:{label:"苗族",value:"苗族"}}),l("el-option",{attrs:{label:"满族",value:"满族"}})],1)]}}])}),l("el-table-column",{attrs:{label:"手机","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_tel,callback:function(l){e.$set(t.row,"user_tel",l)},expression:"scope.row.user_tel"}})]}}])}),l("el-table-column",{attrs:{label:"出生日期","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.row.user_birthday,callback:function(l){e.$set(t.row,"user_birthday",l)},expression:"scope.row.user_birthday"}})]}}])}),l("el-table-column",{attrs:{label:"籍贯","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_address,callback:function(l){e.$set(t.row,"user_address",l)},expression:"scope.row.user_address"}})]}}])}),l("el-table-column",{attrs:{label:"健康状况","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_heath,callback:function(l){e.$set(t.row,"user_heath",l)},expression:"scope.row.user_heath"}})]}}])}),l("el-table-column",{attrs:{label:"文化程度","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.row.user_culture,callback:function(l){e.$set(t.row,"user_culture",l)},expression:"scope.row.user_culture"}},[l("el-option",{attrs:{label:"小学",value:"小学"}}),l("el-option",{attrs:{label:"初中",value:"初中"}}),l("el-option",{attrs:{label:"高中",value:"高中"}}),l("el-option",{attrs:{label:"本科",value:"本科"}}),l("el-option",{attrs:{label:"研究生",value:"研究生"}}),l("el-option",{attrs:{label:"博士",value:"博士"}})],1)]}}])}),l("el-table-column",{attrs:{label:"职称","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.row.teacher_title,callback:function(l){e.$set(t.row,"teacher_title",l)},expression:"scope.row.teacher_title"}},[l("el-option",{attrs:{label:"助教",value:"助教"}}),l("el-option",{attrs:{label:"讲师",value:"讲师"}}),l("el-option",{attrs:{label:"副教授",value:"副教授"}}),l("el-option",{attrs:{label:"教授",value:"教授"}})],1)]}}])}),l("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",disabled:1===e.userList.length},on:{click:function(l){return e.addOrRemove(t,!0)}}}),t.$index===e.userList.length-1?l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(l){return e.addOrRemove(t,!1)}}}):e._e()]}}])})],1)],1),l("div",{staticClass:"user-add-footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.addMoreUser}},[e._v("提交")]),e._v("\n      \n    "),l("el-button",{on:{click:e.resetClick}},[e._v("重置")])],1)])},kt=[];function Ot(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function xt(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(l),!0).forEach((function(t){Object(Me["a"])(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):Ot(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var $t={mounted:function(){this.$store.dispatch("getAllRoll")},data:function(){return{userList:[{role_id:2}],multipleSelection:[],activeName:"second",file:[],loading:!1}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},addOrRemove:function(e,t){t?1!==this.userList.length&&this.userList.splice(e.$index,1):this.userList.push({role_id:2})},allDelete:function(){var e=this,t=this.userList.filter((function(t){return-1===e.multipleSelection.indexOf(t)}));this.userList=t,0===this.userList.length&&this.userList.push({role_id:2})},addMoreUser:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F(this.userList);case 2:t=e.sent,t&&(this.$message({type:"success",message:"添加成功!"}),this.userList=[{role_id:2}]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadFile:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l=t.file,r=new FileReader,this.loading=!0,r.onload=function(e){try{var t=e.target.result,l=ot.a.read(t,{type:"binary"});for(var r in l.Sheets){var a=ot.a.utils.sheet_to_json(l.Sheets[r]),n=a.map((function(e){return{user_username:e["用户名"],user_password:e["密码"],role_id:e[Object.keys(e)[2]],user_name:e["姓名"],user_sex:e["性别"],user_age:e["年龄"],user_address:e["籍贯"],user_nation:e["民族"],user_tel:e["手机"],user_birthday:s.$.formatDate(e["出生日期"]),user_last_name:e["曾用名"],user_heath:e["健康状况"],user_culture:e["文化程度"],teacher_title:e["职称"]}}));console.log(n),s.userList=n}s.loading=!1}catch(o){s.$message.warning("文件类型不正确！")}},r.readAsBinaryString(l);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetClick:function(){this.userList=[{role_id:2}],this.multipleSelection=[]}},computed:xt({},Object(Ue["b"])(["roleList"]))},St=$t,Lt=(l("f0ea"),Object(i["a"])(St,jt,kt,!1,null,"75b19704",null)),Ct=Lt.exports,It=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"user-add-header cl"},[l("el-upload",{staticClass:"fr",attrs:{disabled:!1,action:"customize",name:"openFile","http-request":e.uploadFile,"file-list":e.file,"show-file-list":!1}},[l("el-button",{staticClass:"fr",attrs:{type:"primary",icon:"el-icon-bottom-right"}},[e._v("导入用户")])],1),l("a",{attrs:{href:"http://localhost:3000/template/%E7%94%A8%E6%88%B7%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx"}},[l("el-button",{staticClass:"fr",attrs:{type:"text"}},[e._v("下载导入模板")])],1)],1),l("div",{staticClass:"user-add-content"},[l("div",[l("el-button",{staticClass:"fl all",attrs:{type:"text"},on:{click:e.allDelete}},[e._v("批量删除")])],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50"}}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index"}}),l("el-table-column",{attrs:{label:"用户名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_username,callback:function(l){e.$set(t.row,"user_username",l)},expression:"scope.row.user_username"}})]}}])}),l("el-table-column",{attrs:{label:"密码","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_password,callback:function(l){e.$set(t.row,"user_password",l)},expression:"scope.row.user_password"}})]}}])}),l("el-table-column",{attrs:{label:"权限","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:t.row.role_id,callback:function(l){e.$set(t.row,"role_id",l)},expression:"scope.row.role_id"}},e._l(e.roleList,(function(e){return l("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"姓名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_name,callback:function(l){e.$set(t.row,"user_name",l)},expression:"scope.row.user_name"}})]}}])}),l("el-table-column",{attrs:{label:"曾用名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_last_name,callback:function(l){e.$set(t.row,"user_last_name",l)},expression:"scope.row.user_last_name"}})]}}])}),l("el-table-column",{attrs:{label:"性别","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-radio",{attrs:{label:"男"},model:{value:t.row.user_sex,callback:function(l){e.$set(t.row,"user_sex",l)},expression:"scope.row.user_sex"}},[e._v("男")]),l("el-radio",{attrs:{label:"女"},model:{value:t.row.user_sex,callback:function(l){e.$set(t.row,"user_sex",l)},expression:"scope.row.user_sex"}},[e._v("女")])]}}])}),l("el-table-column",{attrs:{label:"年龄","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_age,callback:function(l){e.$set(t.row,"user_age",e._n(l))},expression:"scope.row.user_age"}})]}}])}),l("el-table-column",{attrs:{label:"民族","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择民族"},model:{value:t.row.user_nation,callback:function(l){e.$set(t.row,"user_nation",l)},expression:"scope.row.user_nation"}},[l("el-option",{attrs:{label:"汉族",value:"汉族"}}),l("el-option",{attrs:{label:"土家族",value:"土家族"}}),l("el-option",{attrs:{label:"蒙古族",value:"蒙古族"}}),l("el-option",{attrs:{label:"回族",value:"回族"}}),l("el-option",{attrs:{label:"苗族",value:"苗族"}}),l("el-option",{attrs:{label:"满族",value:"满族"}})],1)]}}])}),l("el-table-column",{attrs:{label:"手机","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_tel,callback:function(l){e.$set(t.row,"user_tel",l)},expression:"scope.row.user_tel"}})]}}])}),l("el-table-column",{attrs:{label:"出生日期","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.row.user_birthday,callback:function(l){e.$set(t.row,"user_birthday",l)},expression:"scope.row.user_birthday"}})]}}])}),l("el-table-column",{attrs:{label:"籍贯","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_address,callback:function(l){e.$set(t.row,"user_address",l)},expression:"scope.row.user_address"}})]}}])}),l("el-table-column",{attrs:{label:"健康状况","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_heath,callback:function(l){e.$set(t.row,"user_heath",l)},expression:"scope.row.user_heath"}})]}}])}),l("el-table-column",{attrs:{label:"文化程度","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.row.user_culture,callback:function(l){e.$set(t.row,"user_culture",l)},expression:"scope.row.user_culture"}},[l("el-option",{attrs:{label:"小学",value:"小学"}}),l("el-option",{attrs:{label:"初中",value:"初中"}}),l("el-option",{attrs:{label:"高中",value:"高中"}}),l("el-option",{attrs:{label:"本科",value:"本科"}}),l("el-option",{attrs:{label:"研究生",value:"研究生"}}),l("el-option",{attrs:{label:"博士",value:"博士"}})],1)]}}])}),l("el-table-column",{attrs:{label:"职称","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.row.teacher_title,callback:function(l){e.$set(t.row,"teacher_title",l)},expression:"scope.row.teacher_title"}},[l("el-option",{attrs:{label:"助教",value:"助教"}}),l("el-option",{attrs:{label:"讲师",value:"讲师"}}),l("el-option",{attrs:{label:"副教授",value:"副教授"}}),l("el-option",{attrs:{label:"教授",value:"教授"}})],1)]}}])}),l("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",disabled:1===e.userList.length},on:{click:function(l){return e.addOrRemove(t,!0)}}}),t.$index===e.userList.length-1?l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(l){return e.addOrRemove(t,!1)}}}):e._e()]}}])})],1)],1),l("div",{staticClass:"user-add-footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.addMoreUser}},[e._v("提交")]),e._v("\n      \n    "),l("el-button",{on:{click:e.resetClick}},[e._v("重置")])],1)])},Rt=[];function zt(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function Ft(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(l),!0).forEach((function(t){Object(Me["a"])(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):zt(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var qt={mounted:function(){this.$store.dispatch("getAllRoll")},data:function(){return{userList:[{role_id:4}],multipleSelection:[],activeName:"second",file:[],loading:!1}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},addOrRemove:function(e,t){t?1!==this.userList.length&&this.userList.splice(e.$index,1):this.userList.push({role_id:4})},allDelete:function(){var e=this,t=this.userList.filter((function(t){return-1===e.multipleSelection.indexOf(t)}));this.userList=t,0===this.userList.length&&this.userList.push({role_id:4})},addMoreUser:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F(this.userList);case 2:t=e.sent,t&&(this.$message({type:"success",message:"添加成功!"}),this.userList=[{role_id:4}]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadFile:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l=t.file,r=new FileReader,this.loading=!0,r.onload=function(e){try{var t=e.target.result,l=ot.a.read(t,{type:"binary"});for(var r in l.Sheets){var a=ot.a.utils.sheet_to_json(l.Sheets[r]),n=a.map((function(e){return{user_username:e["用户名"],user_password:e["密码"],role_id:e[Object.keys(e)[2]],user_name:e["姓名"],user_sex:e["性别"],user_age:e["年龄"],user_address:e["籍贯"],user_nation:e["民族"],user_tel:e["手机"],user_birthday:s.$.formatDate(e["出生日期"]),user_last_name:e["曾用名"],user_heath:e["健康状况"],user_culture:e["文化程度"],teacher_title:e["职称"]}}));s.userList=n}s.loading=!1}catch(o){s.$message.warning("文件类型不正确！")}},r.readAsBinaryString(l);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetClick:function(){this.userList=[{role_id:4}],this.multipleSelection=[]}},computed:Ft({},Object(Ue["b"])(["roleList"]))},Pt=qt,Dt=(l("2e50"),Object(i["a"])(Pt,It,Rt,!1,null,"bf530b5a",null)),Et=Dt.exports,Mt=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"user-add-header cl"},[l("el-upload",{staticClass:"fr",attrs:{disabled:!1,action:"customize",name:"openFile","http-request":e.uploadFile,"file-list":e.file,"show-file-list":!1}},[l("el-button",{staticClass:"fr",attrs:{type:"primary",icon:"el-icon-bottom-right"}},[e._v("导入用户")])],1),l("a",{attrs:{href:"http://localhost:3000/template/%E7%94%A8%E6%88%B7%E5%AF%BC%E5%85%A5%E6%A8%A1%E6%9D%BF.xlsx"}},[l("el-button",{staticClass:"fr",attrs:{type:"text"}},[e._v("下载导入模板")])],1)],1),l("div",{staticClass:"user-add-content"},[l("div",[l("el-button",{staticClass:"fl all",attrs:{type:"text"},on:{click:e.allDelete}},[e._v("批量删除")])],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50"}}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index"}}),l("el-table-column",{attrs:{label:"用户名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_username,callback:function(l){e.$set(t.row,"user_username",l)},expression:"scope.row.user_username"}})]}}])}),l("el-table-column",{attrs:{label:"密码","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_password,callback:function(l){e.$set(t.row,"user_password",l)},expression:"scope.row.user_password"}})]}}])}),l("el-table-column",{attrs:{label:"权限","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:t.row.role_id,callback:function(l){e.$set(t.row,"role_id",l)},expression:"scope.row.role_id"}},e._l(e.roleList,(function(e){return l("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"姓名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_name,callback:function(l){e.$set(t.row,"user_name",l)},expression:"scope.row.user_name"}})]}}])}),l("el-table-column",{attrs:{label:"曾用名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_last_name,callback:function(l){e.$set(t.row,"user_last_name",l)},expression:"scope.row.user_last_name"}})]}}])}),l("el-table-column",{attrs:{label:"性别","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-radio",{attrs:{label:"男"},model:{value:t.row.user_sex,callback:function(l){e.$set(t.row,"user_sex",l)},expression:"scope.row.user_sex"}},[e._v("男")]),l("el-radio",{attrs:{label:"女"},model:{value:t.row.user_sex,callback:function(l){e.$set(t.row,"user_sex",l)},expression:"scope.row.user_sex"}},[e._v("女")])]}}])}),l("el-table-column",{attrs:{label:"年龄","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_age,callback:function(l){e.$set(t.row,"user_age",e._n(l))},expression:"scope.row.user_age"}})]}}])}),l("el-table-column",{attrs:{label:"民族","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择民族"},model:{value:t.row.user_nation,callback:function(l){e.$set(t.row,"user_nation",l)},expression:"scope.row.user_nation"}},[l("el-option",{attrs:{label:"汉族",value:"汉族"}}),l("el-option",{attrs:{label:"土家族",value:"土家族"}}),l("el-option",{attrs:{label:"蒙古族",value:"蒙古族"}}),l("el-option",{attrs:{label:"回族",value:"回族"}}),l("el-option",{attrs:{label:"苗族",value:"苗族"}}),l("el-option",{attrs:{label:"满族",value:"满族"}})],1)]}}])}),l("el-table-column",{attrs:{label:"手机","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_tel,callback:function(l){e.$set(t.row,"user_tel",l)},expression:"scope.row.user_tel"}})]}}])}),l("el-table-column",{attrs:{label:"出生日期","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.row.user_birthday,callback:function(l){e.$set(t.row,"user_birthday",l)},expression:"scope.row.user_birthday"}})]}}])}),l("el-table-column",{attrs:{label:"籍贯","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_address,callback:function(l){e.$set(t.row,"user_address",l)},expression:"scope.row.user_address"}})]}}])}),l("el-table-column",{attrs:{label:"健康状况","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.user_heath,callback:function(l){e.$set(t.row,"user_heath",l)},expression:"scope.row.user_heath"}})]}}])}),l("el-table-column",{attrs:{label:"文化程度","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.row.user_culture,callback:function(l){e.$set(t.row,"user_culture",l)},expression:"scope.row.user_culture"}},[l("el-option",{attrs:{label:"小学",value:"小学"}}),l("el-option",{attrs:{label:"初中",value:"初中"}}),l("el-option",{attrs:{label:"高中",value:"高中"}}),l("el-option",{attrs:{label:"本科",value:"本科"}}),l("el-option",{attrs:{label:"研究生",value:"研究生"}}),l("el-option",{attrs:{label:"博士",value:"博士"}})],1)]}}])}),l("el-table-column",{attrs:{label:"政治面貌","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择政治面貌"},model:{value:t.row.politics_status_id,callback:function(l){e.$set(t.row,"politics_status_id",l)},expression:"scope.row.politics_status_id"}},e._l(e.$store.state.politicsList,(function(e){return l("el-option",{key:e.politics_status_id,attrs:{label:e.politics_status,value:e.politics_status_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"所属学院","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属学院",disabled:""},model:{value:t.row.college_id,callback:function(l){e.$set(t.row,"college_id",l)},expression:"scope.row.college_id"}},e._l(e.collegeList,(function(e){return l("el-option",{key:e.college_id,attrs:{label:e.college_name,value:e.college_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"所属专业","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(l){return e.marjorChange(t)}},model:{value:t.row.specialty,callback:function(l){e.$set(t.row,"specialty",l)},expression:"scope.row.specialty"}},e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})})),1)]}}])}),l("el-table-column",{attrs:{label:"所属班级","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择班级"},model:{value:t.row.class_id,callback:function(l){e.$set(t.row,"class_id",l)},expression:"scope.row.class_id"}},e._l(e.classList,(function(e){return l("el-option",{key:e.class_id,attrs:{label:e.class_name,value:e.class_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",disabled:1===e.userList.length},on:{click:function(l){return e.addOrRemove(t,!0)}}}),t.$index===e.userList.length-1?l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(l){return e.addOrRemove(t,!1)}}}):e._e()]}}])})],1)],1),l("div",{staticClass:"user-add-footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.addMoreUser}},[e._v("提交")]),e._v("\n      \n    "),l("el-button",{on:{click:e.resetClick}},[e._v("重置")])],1)])},Yt=[];function Bt(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function At(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(l),!0).forEach((function(t){Object(Me["a"])(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):Bt(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var Tt={mounted:function(){var e=this;this.$store.dispatch("getAllRoll"),this.$store.state.politicsList.forEach((function(t){var l=t.politics_status_id,r=t.politics_status;e.rollDistList[r]=l})),He().then((function(t){e.collegeList=t,console.log(e.collegeList),e.majorList=e.collegeList.find((function(t){return t.college_id===e.$store.state.userInfo.college_id}))["majorList"]})),this.classList=this.$store.state.classList,this.classList.forEach((function(t){var l=t.class_id,r=t.class_name;e.classDistList[r]=l}))},data:function(){return{userList:[{role_id:3,college_id:this.$store.state.userInfo.college_id}],multipleSelection:[],activeName:"second",file:[],loading:!1,collegeList:[],majorList:[],classList:[],rollDistList:{},classDistList:{}}},methods:{marjorChange:function(e){this.classList=Object.assign({},this.$store.state.classList.filter((function(t){return t.specialty===e.row.specialty}))),this.$set(this.userList[e.$index],"class_id","")},handleSelectionChange:function(e){this.multipleSelection=e},addOrRemove:function(e,t){t?1!==this.userList.length&&this.userList.splice(e.$index,1):this.userList.push({role_id:3,college_id:this.$store.state.userInfo.college_id})},allDelete:function(){var e=this,t=this.userList.filter((function(t){return-1===e.multipleSelection.indexOf(t)}));this.userList=t,0===this.userList.length&&this.userList.push({role_id:3,college_id:this.$store.state.userInfo.college_id})},addMoreUser:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q(this.userList);case 2:t=e.sent,t&&(this.$message({type:"success",message:"添加成功!"}),this.userList=[{role_id:3,college_id:this.$store.state.userInfo.college_id}]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadFile:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l=t.file,r=new FileReader,this.loading=!0,r.onload=function(e){try{var t=e.target.result,l=ot.a.read(t,{type:"binary"});for(var r in l.Sheets){var a=ot.a.utils.sheet_to_json(l.Sheets[r]),n=a.map((function(e){var t=e["政治面貌"],l=e["所属专业"],r=e["所属班级"],a={};return s.majorList.forEach((function(e){var t=e.specialty,l=e.specialty_name;a[l]=t})),{user_username:e["用户名"],user_password:e["密码"],role_id:e[Object.keys(e)[2]],user_name:e["姓名"],user_sex:e["性别"],user_age:e["年龄"],user_address:e["籍贯"],user_nation:e["民族"],user_tel:e["手机"],user_birthday:s.$.formatDate(e["出生日期"]),user_last_name:e["曾用名"],user_heath:e["健康状况"],user_culture:e["文化程度"],college_id:s.$store.state.userInfo.college_id,politics_status_id:s.rollDistList[t],specialty:a[l],class_id:s.classDistList[r]}}));s.userList=n}s.loading=!1}catch(o){s.$message.warning("文件类型不正确！")}},r.readAsBinaryString(l);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetClick:function(){this.userList=[{role_id:3,college_id:this.$store.state.userInfo.college_id}],this.multipleSelection=[]}},computed:At({},Object(Ue["b"])(["roleList"]))},Nt=Tt,Ht=(l("f455"),Object(i["a"])(Nt,Mt,Yt,!1,null,"8693dfa6",null)),Ut=Ht.exports;function Vt(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function Jt(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(l),!0).forEach((function(t){Object(Me["a"])(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):Vt(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var Kt={mounted:function(){this.$store.dispatch("getAllRoll")},data:function(){return{userList:[{}],multipleSelection:[],activeName:"first",file:[],loading:!1}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},addOrRemove:function(e,t){t?1!==this.userList.length&&this.userList.splice(e.$index,1):this.userList.push({})},allDelete:function(){var e=this,t=this.userList.filter((function(t){return-1===e.multipleSelection.indexOf(t)}));this.userList=t,0===this.userList.length&&this.userList.push({})},addMoreUser:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z(this.userList);case 2:t=e.sent,t&&(this.$message({type:"success",message:"添加成功!"}),this.userList=[{}]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),uploadFile:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l=t.file,r=new FileReader,this.loading=!0,r.onload=function(e){try{var t=e.target.result,l=ot.a.read(t,{type:"binary"});for(var r in l.Sheets){var a,n=ot.a.utils.sheet_to_json(l.Sheets[r]),o=n.map((function(e){return{user_username:e["用户名"],user_password:e["密码"],role_id:e[Object.keys(e)[2]],user_name:e["姓名"],user_sex:e["性别"],user_age:e["年龄"],user_address:e["籍贯"],user_nation:e["民族"],user_tel:e["手机"],user_birthday:s.$.formatDate(e["出生日期"]),user_last_name:e["曾用名"],user_heath:e["健康状况"],user_culture:e["文化程度"]}}));(a=s.userList).push.apply(a,Object(f["a"])(o))}s.loading=!1}catch(i){s.$message.warning("文件类型不正确！")}},r.readAsBinaryString(l);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),resetClick:function(){this.userList=[{}],this.multipleSelection=[]}},computed:Jt({},Object(Ue["b"])(["roleList"])),components:{UserForm:We,AddManager:mt,AddDean:wt,AddTeacher:Ct,AddTeacherSec:Et,AddStudent:Ut}},Gt=Kt,Qt=(l("87d8"),Object(i["a"])(Gt,lt,rt,!1,null,"f3627146",null)),Wt=Qt.exports,Xt=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("router-view")},Zt=[],el={data:function(){return{}}},tl=el,ll=Object(i["a"])(tl,Xt,Zt,!1,null,"44011702",null),rl=ll.exports,sl=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"学院名称"}},[l("el-input",{attrs:{placeholder:"请输入学院名称"},model:{value:e.formInline.college_name,callback:function(t){e.$set(e.formInline,"college_name",t)},expression:"formInline.college_name"}})],1),l("el-form-item",{attrs:{label:"院长"}},[l("el-input",{attrs:{placeholder:"请输入院长名称"},model:{value:e.formInline.user_name,callback:function(t){e.$set(e.formInline,"user_name",t)},expression:"formInline.user_name"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.collegeList,stripe:""}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[l("el-form-item",{attrs:{label:"学院Id"}},[l("span",[e._v(e._s(t.row.college_id))])]),l("el-form-item",{attrs:{label:"学院名称"}},[l("span",[e._v(e._s(t.row.college_name))])]),l("el-form-item",{attrs:{label:"院长"}},[l("span",[e._v(e._s(t.row.user_name))])]),l("el-form-item",{attrs:{label:"学院电话"}},[l("span",[e._v(e._s(t.row.college_tel))])]),l("el-form-item",{attrs:{label:"学院邮箱"}},[l("span",[e._v(e._s(t.row.college_email))])]),l("el-form-item",{attrs:{label:"学院办公室"}},[l("span",[e._v(e._s(t.row.college_room))])]),l("el-form-item",{attrs:{label:"学院描述"}},[l("span",[e._v(e._s(t.row.college_desc))])])],1)]}}])}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"college_id",label:"学院ID",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"college_name",label:"学院名称",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"user_name",label:"院长",align:"center","min-width":"80"}}),l("el-table-column",{attrs:{prop:"college_tel",label:"学院电话",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"college_room",label:"学院办公室",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"college_email",label:"学院邮箱",align:"center","min-width":"150"}}),0===e.$store.state.userInfo.role_id?l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,!0)}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,!1)}}})]}}],null,!1,3048217037)}):e._e()],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},al=[],nl={mounted:function(){this.queryCollege()},data:function(){return{formInline:{college_name:"",user_name:""},collegeList:[],page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{queryCollege:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.college_name,n=s.user_name,this.loading=!0,e.next=5,Ye(l,r,a,n);case 5:o=e.sent,this.collegeList=o.collegeList,this.page=o.page,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){this.page.currentPage=1,this.queryCollege()},handleClick:function(e,t){var l=this;t?this.$router.push({name:"collegeEdit",params:{flag:!0,data:e}}):this.$confirm("确定要删除此记录吗？是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Te(e.college_id);case 2:r=t.sent,r&&(l.$message({type:"success",message:"删除成功!"}),l.page.currentPage=1,l.queryCollege());case 4:case"end":return t.stop()}}),t)})))).catch((function(){l.$message({type:"info",message:"已取消删除"})}))},handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryCollege()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryCollege()}},computed:{},components:{}},ol=nl,il=(l("9e64"),Object(i["a"])(ol,sl,al,!1,null,"77044695",null)),cl=il.exports,ul=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"add-college"},[l("el-form",{ref:"collegeObj",attrs:{model:e.collegeObj,"label-width":"100px",rules:e.rules}},[e.$route.params.flag?l("el-page-header",{attrs:{content:"学院编辑"},on:{back:e.goBack}}):e._e(),l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"学院名称",prop:"college_name"}},[l("el-input",{model:{value:e.collegeObj.college_name,callback:function(t){e.$set(e.collegeObj,"college_name",t)},expression:"collegeObj.college_name"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"学院邮箱",prop:"college_email"}},[l("el-input",{model:{value:e.collegeObj.college_email,callback:function(t){e.$set(e.collegeObj,"college_email",t)},expression:"collegeObj.college_email"}})],1)],1)],1),l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"学院电话",prop:"college_tel"}},[l("el-input",{model:{value:e.collegeObj.college_tel,callback:function(t){e.$set(e.collegeObj,"college_tel",t)},expression:"collegeObj.college_tel"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"院长",prop:"user_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.collegeObj.user_id,callback:function(t){e.$set(e.collegeObj,"user_id",t)},expression:"collegeObj.user_id"}},e._l(e.userCollegeList,(function(e){return l("el-option",{key:e.user_id,attrs:{label:e.user_name,value:e.user_id}})})),1)],1)],1)],1),l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"学院办公室",prop:"college_room"}},[l("el-input",{model:{value:e.collegeObj.college_room,callback:function(t){e.$set(e.collegeObj,"college_room",t)},expression:"collegeObj.college_room"}})],1)],1)],1),l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"学院描述",prop:"college_desc"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:16},placeholder:"请输入内容"},model:{value:e.collegeObj.college_desc,callback:function(t){e.$set(e.collegeObj,"college_desc",t)},expression:"collegeObj.college_desc"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:21,offset:3}},[l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),l("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1)},dl=[],pl={props:[],mounted:function(){this.$store.dispatch("getUserCollege");var e=this.$route.params,t=e.flag,l=e.data;t&&(this.collegeObj=l)},data:function(){return{collegeObj:{college_name:"",college_desc:"",college_email:"",college_room:"",college_tel:"",user_id:""},rules:{college_name:{required:!0,message:"请输入学院名称",trigger:"blur"},college_tel:{required:!0,message:"请输入学院电话",trigger:"blur"},user_id:{required:!0,message:"请选择院长",trigger:"blur"},college_email:{required:!0,message:"请输入学院邮箱",trigger:"blur"},college_room:{required:!0,message:"请输入学院办公室",trigger:"blur"}}}},methods:{onSubmit:function(){var e=this;this.$refs["collegeObj"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=12;break}if(!e.$route.params.flag){t.next=7;break}return t.next=4,Ae(e.collegeObj);case 4:r=t.sent,t.next=10;break;case 7:return t.next=9,Be(e.collegeObj);case 9:r=t.sent;case 10:r&&(e.collegeObj={},e.$message({type:"success",message:e.$route.params.flag?"编辑成功!":"添加成功!"}),e.$store.dispatch("getUserCollege")),e.$route.params.flag&&e.goBack();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs["collegeObj"].resetFields()},goBack:function(){this.$router.back()}},computed:{userCollegeList:function(){var e=this.$store.state.userCollegeList,t=this.$route.params,l=t.flag,r=t.data;return l&&e.unshift({user_id:r.user_id,user_name:r.user_name}),e}}},ml=pl,fl=(l("6793"),Object(i["a"])(ml,ul,dl,!1,null,"0f9922ee",null)),bl=fl.exports,_l=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("router-view")},hl=[],gl={data:function(){return{}}},yl=gl,vl=Object(i["a"])(yl,_l,hl,!1,null,"c27585c0",null),wl=vl.exports,jl=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"专业名称"}},[l("el-input",{attrs:{placeholder:"请输入专业名称"},model:{value:e.formInline.specialty_name,callback:function(t){e.$set(e.formInline,"specialty_name",t)},expression:"formInline.specialty_name"}})],1),l("el-form-item",{attrs:{label:"所属学院"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择学院"},model:{value:e.formInline.college_id,callback:function(t){e.$set(e.formInline,"college_id",t)},expression:"formInline.college_id"}},e._l(e.collegeList,(function(e){return l("el-option",{key:e.college_id,attrs:{label:e.college_name,value:e.college_id}})})),1)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.majorList,stripe:""}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[l("el-form-item",{attrs:{label:"专业ID"}},[l("span",[e._v(e._s(t.row.specialty))])]),l("el-form-item",{attrs:{label:"专业名称"}},[l("span",[e._v(e._s(t.row.specialty_name))])]),l("el-form-item",{attrs:{label:"所属学院"}},[l("span",[e._v(e._s(t.row.college_name))])]),l("el-form-item",{attrs:{label:"专业描述"}},[l("span",[e._v(e._s(t.row.specialty_desc))])])],1)]}}])}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"specialty",label:"专业ID",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"specialty_name",label:"专业名称",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"college_name",label:"所属学院",align:"center","min-width":"150"}}),3!=e.$store.state.userInfo.role_id?l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini",disabled:t.row.college_id!==e.$store.state.userInfo.college_id},on:{click:function(l){return e.handleClick(t.row,!0)}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini",disabled:t.row.college_id!==e.$store.state.userInfo.college_id},on:{click:function(l){return e.handleClick(t.row,!1)}}})]}}],null,!1,1136458477)}):e._e()],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},kl=[],Ol=function(e){return C.post("/major/add",e)},xl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return C.get("/major/all",{params:{currentPage:e,pageSize:t,specialty_name:l,college_id:r}})},$l=function(e){return C.post("/major/edit",e)},Sl=function(e){return C.get("/major/remove",{params:{specialty:e}})},Ll=function(){return C.get("/major/queryMajorAndClass")},Cl={mounted:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:t=e.sent,this.collegeList=[{college_id:-1,college_name:"全部"}].concat(Object(f["a"])(t)),this.queryMajor();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{collegeList:[],majorList:[],formInline:{specialty_name:"",college_id:-1},page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{onSubmit:function(){this.page.currentPage=1,this.queryMajor()},handleClick:function(e,t){var l=this;t?this.$router.push({name:"majorEdit",params:{flag:!0,data:e}}):this.$confirm("确定要删除此记录吗？是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Sl(e.specialty);case 2:r=t.sent,r&&(l.$message({type:"success",message:"删除成功!"}),l.queryMajor());case 4:case"end":return t.stop()}}),t)})))).catch((function(){l.$message({type:"info",message:"已取消删除"})}))},queryMajor:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.specialty_name,n=s.college_id,this.loading=!0,e.next=5,xl(l,r,a,n);case 5:o=e.sent,this.majorList=o.majorList,this.page=o.page,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryMajor()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryMajor()}},components:{}},Il=Cl,Rl=(l("a8f2"),Object(i["a"])(Il,jl,kl,!1,null,"807f5232",null)),zl=Rl.exports,Fl=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"add-major"},[l("el-form",{ref:"majorObj",attrs:{model:e.majorObj,"label-width":"100px",rules:e.rules}},[e.$route.params.flag?l("el-page-header",{attrs:{content:"专业编辑"},on:{back:e.goBack}}):e._e(),l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"所属学院",prop:"college_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.majorObj.college_id,callback:function(t){e.$set(e.majorObj,"college_id",t)},expression:"majorObj.college_id"}},e._l(e.collegeList,(function(e){return l("el-option",{key:e.college_id,attrs:{label:e.college_name,value:e.college_id}})})),1)],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"专业名称",prop:"specialty_name"}},[l("el-input",{model:{value:e.majorObj.specialty_name,callback:function(t){e.$set(e.majorObj,"specialty_name",t)},expression:"majorObj.specialty_name"}})],1)],1)],1),l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"专业描述",prop:"specialty_desc"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:16},placeholder:"请输入内容"},model:{value:e.majorObj.specialty_desc,callback:function(t){e.$set(e.majorObj,"specialty_desc",t)},expression:"majorObj.specialty_desc"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:21,offset:3}},[l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("添加")]),l("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1)},ql=[],Pl={props:[],mounted:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:t=e.sent,this.collegeList=t,this.majorObj.college_id=this.$store.state.userInfo.college_id,l=this.$route.params,r=l.flag,s=l.data,r&&(this.majorObj=s);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{majorObj:{specialty:"",college_id:"",specialty_name:"",specialty_desc:""},rules:{college_id:{required:!0,message:"请选择学院",trigger:"blur"},specialty_name:{required:!0,message:"请输入专业名称",trigger:"blur"}},collegeList:[]}},methods:{onSubmit:function(){var e=this;this.$refs["majorObj"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=12;break}if(!e.$route.params.flag){t.next=7;break}return t.next=4,$l(e.majorObj);case 4:r=t.sent,t.next=10;break;case 7:return t.next=9,Ol(e.majorObj);case 9:r=t.sent;case 10:r&&(e.majorObj={college_id:e.$store.state.userInfo.college_id},e.$message({type:"success",message:e.$route.params.flag?"编辑成功!":"添加成功!"})),e.$route.params.flag&&e.goBack();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs["majorObj"].resetFields(),this.majorObj.college_id=this.$store.state.userInfo.college_id},goBack:function(){this.$router.back()}}},Dl=Pl,El=(l("5618"),Object(i["a"])(Dl,Fl,ql,!1,null,"cc4c2ef6",null)),Ml=El.exports,Yl=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("router-view")},Bl=[],Al={data:function(){return{}}},Tl=Al,Nl=Object(i["a"])(Tl,Yl,Bl,!1,null,"c02ea2fe",null),Hl=Nl.exports,Ul=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"所属学院"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.collegeChange},model:{value:e.formInline.college_id,callback:function(t){e.$set(e.formInline,"college_id",t)},expression:"formInline.college_id"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.collegeList,(function(e){return l("el-option",{key:e.college_id,attrs:{label:e.college_name,value:e.college_id}})}))],2)],1),l("el-form-item",{attrs:{label:"所属专业"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formInline.specialty,callback:function(t){e.$set(e.formInline,"specialty",t)},expression:"formInline.specialty"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})}))],2)],1),l("el-form-item",{attrs:{label:"班级名称"}},[l("el-input",{attrs:{placeholder:"请输入班级名称"},model:{value:e.formInline.class_name,callback:function(t){e.$set(e.formInline,"class_name",t)},expression:"formInline.class_name"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.classList,stripe:""}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[l("el-form-item",{attrs:{label:"班级ID"}},[l("span",[e._v(e._s(t.row.class_id))])]),l("el-form-item",{attrs:{label:"所属学院"}},[l("span",[e._v(e._s(t.row.college_name))])]),l("el-form-item",{attrs:{label:"所属专业"}},[l("span",[e._v(e._s(t.row.specialty_name))])]),l("el-form-item",{attrs:{label:"班级名称"}},[l("span",[e._v(e._s(t.row.class_name))])]),l("el-form-item",{attrs:{label:"班主任"}},[l("span",[e._v(e._s(t.row.user_name))])])],1)]}}])}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"class_id",label:"班级ID",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"college_name",label:"所属学院",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"specialty_name",label:"所属专业",align:"center","min-width":"80"}}),l("el-table-column",{attrs:{prop:"class_name",label:"班级名称",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"user_name",label:"班主任",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini",disabled:t.row.college_id!==e.$store.state.userInfo.college_id},on:{click:function(l){return e.handleClick(t.row,!0)}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini",disabled:t.row.college_id!==e.$store.state.userInfo.college_id},on:{click:function(l){return e.handleClick(t.row,!1)}}})]}}])})],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},Vl=[],Jl=function(e){return C.post("/class/add",e)},Kl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return C.get("/class/all",{params:{currentPage:e,pageSize:t,college_id:l,class_name:r,specialty:s}})},Gl=function(e){return C.post("/class/edit",e)},Ql=function(e){return C.get("/class/remove",{params:{class_id:e}})},Wl=function(){return C.get("/class/queryList")},Xl={mounted:function(){var e=this;He().then((function(t){return e.collegeList=t})),this.queryClass()},data:function(){return{formInline:{college_id:"all",class_name:"",specialty:"all"},collegeList:[],majorList:[],classList:[],page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{queryClass:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.college_id,n=s.class_name,o=s.specialty,this.loading=!0,e.next=5,Kl(l,r,a,n,o);case 5:i=e.sent,this.classList=i.classList,this.page=i.page,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){this.page.currentPage=1,this.queryClass()},handleClick:function(e,t){var l=this;t?this.$router.push({name:"classEdit",params:{flag:!0,data:e}}):this.$confirm("确定要删除此记录吗？是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ql(e.class_id);case 2:r=t.sent,r&&(l.$message({type:"success",message:"删除成功!"}),l.page.currentPage=1,l.queryClass());case 4:case"end":return t.stop()}}),t)})))).catch((function(){l.$message({type:"info",message:"已取消删除"})}))},handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryClass()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryClass()},collegeChange:function(e){console.log(e),this.majorList=this.collegeList.find((function(t){return t.college_id===e}))["majorList"],this.formInline.specialty="all"}},computed:{},components:{}},Zl=Xl,er=(l("a9f9"),Object(i["a"])(Zl,Ul,Vl,!1,null,"3c2f5605",null)),tr=er.exports,lr=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"add-major"},[l("el-form",{ref:"classObj",attrs:{model:e.classObj,"label-width":"100px",rules:e.rules}},[e.$route.params.flag?l("el-page-header",{attrs:{content:"班级编辑"},on:{back:e.goBack}}):e._e(),l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"所属学院",prop:"college_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.classObj.college_id,callback:function(t){e.$set(e.classObj,"college_id",t)},expression:"classObj.college_id"}},e._l(e.collegeList,(function(e){return l("el-option",{key:e.college_id,attrs:{label:e.college_name,value:e.college_id}})})),1)],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"所属专业",prop:"specialty"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.classObj.specialty,callback:function(t){e.$set(e.classObj,"specialty",t)},expression:"classObj.specialty"}},e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})})),1)],1)],1)],1),l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"班主任",prop:"teacher_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.classObj.teacher_id,callback:function(t){e.$set(e.classObj,"teacher_id",t)},expression:"classObj.teacher_id"}},e._l(e.userList,(function(e){return l("el-option",{key:e.teacher_id,attrs:{label:e.user_name,value:e.teacher_id}})})),1)],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"班级名称",prop:"class_name"}},[l("el-input",{model:{value:e.classObj.class_name,callback:function(t){e.$set(e.classObj,"class_name",t)},expression:"classObj.class_name"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:21,offset:3}},[l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.params.flag?"提交":"添加"))]),l("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1)},rr=[],sr={props:[],mounted:function(){var e=this;M().then((function(t){return e.userList=t})),He().then((function(t){e.collegeList=t,e.classObj.college_id=e.$store.state.userInfo.college_id,e.majorList=e.collegeList.find((function(t){return t.college_id===e.classObj.college_id}))["majorList"]}));var t=this.$route.params,l=t.flag,r=t.data;l&&(this.classObj={teacher_id:r.teacher_id,specialty:r.specialty,college_id:r.college_id,class_name:r.class_name,class_id:r.class_id})},data:function(){return{classObj:{teacher_id:"",specialty:"",college_id:"",class_name:""},userList:[],collegeList:[],majorList:[],rules:{teacher_id:{required:!0,message:"请选择班主任",trigger:"blur"},specialty:{required:!0,message:"请选择专业",trigger:"blur"},college_id:{required:!0,message:"请选择学院",trigger:"blur"},class_name:{required:!0,message:"请填写班级名称",trigger:"blur"}}}},methods:{onSubmit:function(){var e=this;this.$refs["classObj"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=13;break}if(!e.$route.params.flag){t.next=8;break}return t.next=4,Gl(e.classObj);case 4:r=t.sent,console.log(111),t.next=11;break;case 8:return t.next=10,Jl(e.classObj);case 10:r=t.sent;case 11:r&&(e.classObj={teacher_id:"",specialty:"",college_id:e.$store.state.userInfo.college_id,class_name:""},e.$message({type:"success",message:e.$route.params.flag?"编辑成功!":"添加成功!"})),e.$route.params.flag&&e.goBack();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs["classObj"].resetFields(),this.classObj.college_id=this.$store.state.userInfo.college_id},goBack:function(){this.$router.back()}}},ar=sr,nr=(l("5c02"),Object(i["a"])(ar,lr,rr,!1,null,"6177b1e2",null)),or=nr.exports,ir={path:"/class",name:"class",meta:{name:"班级管理"},component:Hl,redirect:"/class/list",children:[{path:"/class/list",meta:{name:"班级列表"},component:tr,children:[]},{path:"/class/add",name:"classAdd",meta:{name:"班级添加"},component:or},{path:"/class/edit",name:"classEdit",meta:{name:"班级编辑"},component:or}]},cr=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("router-view")],1)},ur=[],dr={data:function(){return{}}},pr=dr,mr=(l("ccda"),Object(i["a"])(pr,cr,ur,!1,null,"318eaad8",null)),fr=mr.exports,br=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"所属学院"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formInline.college_id,callback:function(t){e.$set(e.formInline,"college_id",t)},expression:"formInline.college_id"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.collegeList,(function(e){return l("el-option",{key:e.college_id,attrs:{label:e.college_name,value:e.college_id}})}))],2)],1),l("el-form-item",{attrs:{label:"开课学年"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formInline.course_year,callback:function(t){e.$set(e.formInline,"course_year",t)},expression:"formInline.course_year"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.courseYearList,(function(e){return l("el-option",{key:e.course_year,attrs:{label:e.course_year,value:e.course_year}})}))],2)],1),l("el-form-item",{attrs:{label:"课程类型"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择课程类型"},model:{value:e.formInline.course_type,callback:function(t){e.$set(e.formInline,"course_type",t)},expression:"formInline.course_type"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),l("el-option",{attrs:{label:"限制性选修课",value:"限制性选修课"}}),l("el-option",{attrs:{label:"非限制性选修课",value:"非限制性选修课"}}),l("el-option",{attrs:{label:"公共必修课",value:"公共必修课"}}),l("el-option",{attrs:{label:"公共选修课",value:"公共选修课"}})],1)],1),l("el-form-item",{attrs:{label:"考核方式"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择考核方式"},model:{value:e.formInline.course_assess,callback:function(t){e.$set(e.formInline,"course_assess",t)},expression:"formInline.course_assess"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),l("el-option",{attrs:{label:"考查",value:"考查"}}),l("el-option",{attrs:{label:"考试",value:"考试"}})],1)],1),l("el-form-item",{attrs:{label:"课程名称"}},[l("el-input",{attrs:{placeholder:"请输入课程名称"},model:{value:e.formInline.course_name,callback:function(t){e.$set(e.formInline,"course_name",t)},expression:"formInline.course_name"}})],1),l("el-form-item",{attrs:{label:"授课教师"}},[l("el-input",{attrs:{placeholder:"请输入授课教师"},model:{value:e.formInline.user_name,callback:function(t){e.$set(e.formInline,"user_name",t)},expression:"formInline.user_name"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.courseList,stripe:""}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[l("el-form-item",{attrs:{label:"课程ID"}},[l("span",[e._v(e._s(t.row.course_id))])]),l("el-form-item",{attrs:{label:"课程名称"}},[l("span",[e._v(e._s(t.row.course_name))])]),l("el-form-item",{attrs:{label:"所属学院"}},[l("span",[e._v(e._s(t.row.college_name))])]),l("el-form-item",{attrs:{label:"授课教师"}},[l("span",[e._v(e._s(t.row.user_name))])]),l("el-form-item",{attrs:{label:"课时"}},[l("span",[e._v(e._s(t.row.course_hour))])]),l("el-form-item",{attrs:{label:"上课地点"}},[l("span",[e._v(e._s(t.row.course_classroom))])]),l("el-form-item",{attrs:{label:"学分"}},[l("span",[e._v(e._s(t.row.course_credit))])]),l("el-form-item",{attrs:{label:"开课学年"}},[l("span",[e._v(e._s(t.row.course_year))])]),l("el-form-item",{attrs:{label:"课容量"}},[l("span",[e._v(e._s(t.row.course_amount))])]),l("el-form-item",{attrs:{label:"课程类型"}},[l("span",[e._v(e._s(t.row.course_type))])]),l("el-form-item",{attrs:{label:"考核方式"}},[l("span",[e._v(e._s(t.row.course_assess))])]),l("el-form-item",{attrs:{label:"课程简介"}},[l("span",[e._v(e._s(t.row.course_info))])])],1)]}}])}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"course_id",label:"课程ID",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"course_name",label:"课程名称",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"college_name",label:"所属学院",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"user_name",label:"授课教师",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"course_hour",label:"课时",align:"center","min-width":"80"}}),l("el-table-column",{attrs:{prop:"course_classroom",label:"上课地点",align:"center","min-width":"100"}}),l("el-table-column",{attrs:{prop:"course_credit",label:"学分",align:"center","min-width":"100"}}),l("el-table-column",{attrs:{prop:"course_year",label:"开课学年",align:"center","min-width":"100"}}),l("el-table-column",{attrs:{prop:"course_amount",label:"课容量",align:"center","min-width":"100"}}),l("el-table-column",{attrs:{prop:"course_type",label:"课程类型",align:"center","min-width":"150"}}),l("el-table-column",{attrs:{prop:"course_assess",label:"考核方式",align:"center","min-width":"150"}}),3!=e.$store.state.userInfo.role_id?l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini",disabled:e.$store.state.userInfo.college_id!==t.row.college_id},on:{click:function(l){return e.handleClick(t.row,!0)}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini",disabled:e.$store.state.userInfo.college_id!==t.row.college_id},on:{click:function(l){return e.handleClick(t.row,!1)}}})]}}],null,!1,3213068525)}):e._e()],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},_r=[],hr=function(e){return C.post("/course/add",e)},gr=function(e){return C.post("/course/moreAdd",e)},yr=function(){return C.get("/course/queryCourseYear")},vr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";return C.get("/course/all",{params:{currentPage:e,pageSize:t,college_id:l,course_year:r,course_type:s,course_assess:a,course_name:n,user_name:o}})},wr=function(e){return C.post("/course/edit",e)},jr=function(e){return C.get("/course/remove",{params:{course_id:e}})},kr=function(){return C.get("/course/queryList")},Or={mounted:function(){var e=this;Ne().then((function(t){return e.collegeList=t})),yr().then((function(t){e.courseYearList=t})),this.queryCourse()},data:function(){return{formInline:{college_id:"all",course_year:"all",course_type:"all",course_assess:"all",course_name:"",user_name:""},collegeList:[],courseList:[],courseYearList:[],page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{queryCourse:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o,i,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.college_id,n=s.course_year,o=s.course_type,i=s.course_assess,c=s.course_name,u=s.user_name,this.loading=!0,e.next=5,vr(l,r,a,n,o,i,c,u);case 5:d=e.sent,this.courseList=d.courseList,this.page=d.page,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){this.page.currentPage=1,this.queryCourse()},handleClick:function(e,t){var l=this;t?this.$router.push({name:"courseEdit",params:{flag:!0,data:e}}):this.$confirm("确定要删除此记录吗？是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,jr(e.course_id);case 2:r=t.sent,r&&(l.$message({type:"success",message:"删除成功!"}),l.page.currentPage=1,l.queryCourse());case 4:case"end":return t.stop()}}),t)})))).catch((function(){l.$message({type:"info",message:"已取消删除"})}))},handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryCourse()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryCourse()}},computed:{},components:{}},xr=Or,$r=(l("b907"),Object(i["a"])(xr,br,_r,!1,null,"62080b4c",null)),Sr=$r.exports,Lr=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-add"},[l("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[l("el-tab-pane",{attrs:{label:"添加单个课程",name:"first"}},[l("CourseForm")],1),l("el-tab-pane",{attrs:{label:"批量导入课程",name:"second"}},[l("div",{staticClass:"user-add-header cl"},[l("el-upload",{staticClass:"fr",attrs:{disabled:!1,action:"customize",name:"openFile","http-request":e.uploadFile,"file-list":e.file,"show-file-list":!1}},[l("el-button",{staticClass:"fr",attrs:{type:"primary",icon:"el-icon-bottom-right"}},[e._v("导入课程")])],1),l("el-button",{staticClass:"fr",attrs:{type:"text"}},[e._v("下载导入模板")])],1),l("div",{staticClass:"user-add-content"},[l("div",[l("el-button",{staticClass:"fl all",attrs:{type:"text"},on:{click:e.allDelete}},[e._v("批量删除")])],1),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.courseList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50"}}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index"}}),l("el-table-column",{attrs:{label:"课程名称","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.course_name,callback:function(l){e.$set(t.row,"course_name",l)},expression:"scope.row.course_name"}})]}}])}),l("el-table-column",{attrs:{label:"课时","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.course_hour,callback:function(l){e.$set(t.row,"course_hour",l)},expression:"scope.row.course_hour"}})]}}])}),l("el-table-column",{attrs:{label:"上课地点","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.course_classroom,callback:function(l){e.$set(t.row,"course_classroom",l)},expression:"scope.row.course_classroom"}})]}}])}),l("el-table-column",{attrs:{label:"学分","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.course_credit,callback:function(l){e.$set(t.row,"course_credit",l)},expression:"scope.row.course_credit"}})]}}])}),l("el-table-column",{staticClass:"year-ipt",attrs:{label:"开课学年","min-width":"270",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-col",{attrs:{span:11}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy","value-format":"yyyy",type:"year"},model:{value:t.row.course_year_begin,callback:function(l){e.$set(t.row,"course_year_begin",l)},expression:"scope.row.course_year_begin"}})],1),l("el-col",{attrs:{span:2}},[l("div",{staticStyle:{"text-align":"center"}},[e._v("-")])]),l("el-col",{attrs:{span:11}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy","value-format":"yyyy",type:"year"},model:{value:t.row.course_year_end,callback:function(l){e.$set(t.row,"course_year_end",l)},expression:"scope.row.course_year_end"}})],1)]}}])}),l("el-table-column",{attrs:{label:"课容量","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.course_amount,callback:function(l){e.$set(t.row,"course_amount",l)},expression:"scope.row.course_amount"}})]}}])}),l("el-table-column",{attrs:{label:"课程类型","min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择课程类型"},model:{value:t.row.course_type,callback:function(l){e.$set(t.row,"course_type",l)},expression:"scope.row.course_type"}},[l("el-option",{attrs:{label:"限制性选修课",value:"限制性选修课"}}),l("el-option",{attrs:{label:"非限制性选修课",value:"非限制性选修课"}}),l("el-option",{attrs:{label:"公共必修课",value:"公共必修课"}}),l("el-option",{attrs:{label:"公共选修课",value:"公共选修课"}})],1)]}}])}),l("el-table-column",{attrs:{label:"考核方式","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择考核方式"},model:{value:t.row.course_assess,callback:function(l){e.$set(t.row,"course_assess",l)},expression:"scope.row.course_assess"}},[l("el-option",{attrs:{label:"考查",value:"考查"}}),l("el-option",{attrs:{label:"考试",value:"考试"}})],1)]}}])}),l("el-table-column",{attrs:{label:"授课教师","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择授课教师"},model:{value:t.row.teacher_id,callback:function(l){e.$set(t.row,"teacher_id",l)},expression:"scope.row.teacher_id"}},e._l(e.$store.state.userTeacherList,(function(e){return l("el-option",{key:e.teacher_id,attrs:{label:e.user_name,value:e.teacher_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"课程简介","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.row.course_info,callback:function(l){e.$set(t.row,"course_info",l)},expression:"scope.row.course_info"}})]}}])}),l("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",disabled:1===e.courseList.length},on:{click:function(l){return e.addOrRemove(t,!0)}}}),t.$index===e.courseList.length-1?l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(l){return e.addOrRemove(t,!1)}}}):e._e()]}}])})],1)],1),l("div",{staticClass:"user-add-footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),e._v("\n          \n        "),l("el-button",{on:{click:e.resetClick}},[e._v("重置")])],1)])],1)],1)},Cr=[],Ir=(l("28a5"),function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"course-form-box"},[l("el-form",{ref:"courseObjForm",attrs:{model:e.courseObj,"label-width":"80px",rules:e.rules}},[e.$route.params.flag?l("el-page-header",{attrs:{content:"课程编辑"},on:{back:e.goBack}}):e._e(),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"课程名称",prop:"course_name"}},[l("el-input",{model:{value:e.courseObj.course_name,callback:function(t){e.$set(e.courseObj,"course_name",t)},expression:"courseObj.course_name"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"课时",prop:"course_hour"}},[l("el-input",{model:{value:e.courseObj.course_hour,callback:function(t){e.$set(e.courseObj,"course_hour",t)},expression:"courseObj.course_hour"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"上课地点",prop:"course_classroom"}},[l("el-input",{model:{value:e.courseObj.course_classroom,callback:function(t){e.$set(e.courseObj,"course_classroom",t)},expression:"courseObj.course_classroom"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"学分",prop:"course_credit"}},[l("el-input",{model:{value:e.courseObj.course_credit,callback:function(t){e.$set(e.courseObj,"course_credit",t)},expression:"courseObj.course_credit"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{staticClass:"year-ipt",attrs:{label:"开课学年",prop:"course_year_begin"}},[l("el-col",{attrs:{span:11}},[l("el-date-picker",{attrs:{format:"yyyy","value-format":"yyyy",type:"year"},model:{value:e.courseObj.course_year_begin,callback:function(t){e.$set(e.courseObj,"course_year_begin",t)},expression:"courseObj.course_year_begin"}})],1),l("el-col",{attrs:{span:2}},[l("div",{staticStyle:{"text-align":"center"}},[e._v("-")])]),l("el-col",{attrs:{span:11}},[l("el-date-picker",{attrs:{format:"yyyy","value-format":"yyyy",type:"year"},model:{value:e.courseObj.course_year_end,callback:function(t){e.$set(e.courseObj,"course_year_end",t)},expression:"courseObj.course_year_end"}})],1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"课容量",prop:"course_amount"}},[l("el-input",{model:{value:e.courseObj.course_amount,callback:function(t){e.$set(e.courseObj,"course_amount",t)},expression:"courseObj.course_amount"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"课程类型",prop:"course_type"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择课程类型"},model:{value:e.courseObj.course_type,callback:function(t){e.$set(e.courseObj,"course_type",t)},expression:"courseObj.course_type"}},[l("el-option",{attrs:{label:"限制性选修课",value:"限制性选修课"}}),l("el-option",{attrs:{label:"非限制性选修课",value:"非限制性选修课"}}),l("el-option",{attrs:{label:"公共必修课",value:"公共必修课"}}),l("el-option",{attrs:{label:"公共选修课",value:"公共选修课"}})],1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"考核方式",prop:"course_assess"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择考核方式"},model:{value:e.courseObj.course_assess,callback:function(t){e.$set(e.courseObj,"course_assess",t)},expression:"courseObj.course_assess"}},[l("el-option",{attrs:{label:"考查",value:"考查"}}),l("el-option",{attrs:{label:"考试",value:"考试"}})],1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"授课教师",prop:"teacher_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择授课教师"},model:{value:e.courseObj.teacher_id,callback:function(t){e.$set(e.courseObj,"teacher_id",t)},expression:"courseObj.teacher_id"}},e._l(e.$store.state.userTeacherList,(function(e){return l("el-option",{key:e.teacher_id,attrs:{label:e.user_name,value:e.teacher_id}})})),1)],1)],1),l("el-col",{attrs:{span:8,offset:2,prop:"course_info"}},[l("el-form-item",{attrs:{label:"课程简介"}},[l("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.courseObj.course_info,callback:function(t){e.$set(e.courseObj,"course_info",t)},expression:"courseObj.course_info"}})],1)],1),l("el-col",{attrs:{span:21,offset:2}},[l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.params.flag?"提交":"添加"))]),l("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)}),Rr=[],zr={mounted:function(){var e=this.$route.params,t=e.flag,l=e.data;t&&(l.course_year_begin=l.course_year.split("-")[0],l.course_year_end=l.course_year.split("-")[1],this.courseObj=l)},data:function(){return{courseObj:{course_name:"",course_hour:"",course_classroom:"",course_credit:"",course_year_begin:"",course_year_end:"",course_info:"",course_amount:"",course_type:"",course_assess:"",teacher_id:""},rules:{course_name:{required:!0,message:"请输入课程名称",trigger:"blur"},course_hour:{required:!0,message:"请输入课时数",trigger:"blur"},course_classroom:{required:!0,message:"请输入上课地点",trigger:"blur"},course_credit:{required:!0,message:"请输入学分",trigger:"blur"},course_year_begin:{required:!0,message:"请选择开课学年",trigger:"blur"},course_info:{required:!0,message:"请输入课程简介",trigger:"blur"},course_amount:{required:!0,message:"请输入课容量",trigger:"blur"},course_type:{required:!0,message:"请选择课程类型",trigger:"blur"},course_assess:{required:!0,message:"请选择考核方式",trigger:"blur"},teacher_id:{required:!0,message:"请选择授课教师",trigger:"blur"}}}},methods:{onSubmit:function(){var e=this;this.$refs["courseObjForm"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=13;break}if(!e.$route.params.flag){t.next=8;break}return t.next=4,wr(e.courseObj);case 4:r=t.sent,console.log(111),t.next=11;break;case 8:return t.next=10,hr(e.courseObj);case 10:r=t.sent;case 11:r&&(e.courseObj={},e.$message({type:"success",message:e.$route.params.flag?"编辑成功!":"添加成功!"})),e.$route.params.flag&&e.goBack();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs["courseObjForm"].resetFields()},goBack:function(){this.$router.back()}},watch:{editUserObj:function(){this.courseObj=Object.assign({},this.editUserObj)}}},Fr=zr,qr=(l("b165"),Object(i["a"])(Fr,Ir,Rr,!1,null,"b1660800",null)),Pr=qr.exports,Dr={mounted:function(){var e=this;this.$store.dispatch("getUserTeacher"),this.$store.state.userTeacherList.forEach((function(t){var l=t.teacher_id,r=t.user_name;e.tutorList[r]=l}))},data:function(){return{courseList:[{}],multipleSelection:[],activeName:"first",file:[],tutorList:{}}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},addOrRemove:function(e,t){t?1!==this.courseList.length&&this.courseList.splice(e.$index,1):this.courseList.push({})},allDelete:function(){var e=this,t=this.courseList.filter((function(t){return-1===e.multipleSelection.indexOf(t)}));this.courseList=t,0===this.courseList.length&&this.courseList.push({})},uploadFile:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l=t.file,r=new FileReader,r.onload=function(e){try{var t=e.target.result,l=ot.a.read(t,{type:"binary"});for(var r in l.Sheets){var a=ot.a.utils.sheet_to_json(l.Sheets[r]),n=a.map((function(e){var t=e["授课教师"];return{course_name:e["课程名称"],course_hour:e["课时"],course_classroom:e["上课地点"],course_credit:e["学分"],course_year_begin:e["开课学年"].split("-")[0],course_year_end:e["开课学年"].split("-")[1],course_amount:e["课容量"],course_type:e["课程类型"],course_assess:e["考核方式"],teacher_id:s.tutorList[t],course_info:e["课程简介"]}}));s.courseList=n}}catch(o){s.$message.warning("文件类型不正确！")}},r.readAsBinaryString(l);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),resetClick:function(){this.courseList=[{}],this.multipleSelection=[]},submit:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,gr(this.courseList);case 2:t=e.sent,t&&(this.$message({type:"success",message:"添加成功!"}),this.courseList=[{}]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},components:{CourseForm:Pr}},Er=Dr,Mr=(l("f64f"),Object(i["a"])(Er,Lr,Cr,!1,null,"2d51ef12",null)),Yr=Mr.exports,Br={path:"/course",name:"course",meta:{name:"课程管理"},component:fr,redirect:"/course/list",children:[{path:"/course/list",meta:{name:"课程列表"},component:Sr,children:[]},{path:"/course/add",name:"courseAdd",meta:{name:"课程添加"},component:Yr},{path:"/course/edit",name:"courseEdit",meta:{name:"课程编辑"},component:Pr}]},Ar=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("router-view")],1)},Tr=[],Nr={mounted:function(){this.$store.dispatch("getCourseByCollege"),this.$store.dispatch("getStudentByCollege")},data:function(){return{}}},Hr=Nr,Ur=(l("e584"),Object(i["a"])(Hr,Ar,Tr,!1,null,"d655ff24",null)),Vr=Ur.exports,Jr=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"所属专业"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.majorChange},model:{value:e.formInline.specialty,callback:function(t){e.$set(e.formInline,"specialty",t)},expression:"formInline.specialty"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})}))],2)],1),l("el-form-item",{attrs:{label:"所属班级"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formInline.class_id,callback:function(t){e.$set(e.formInline,"class_id",t)},expression:"formInline.class_id"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.classList,(function(e){return l("el-option",{key:e.class_id,attrs:{label:e.class_name,value:e.class_id}})}))],2)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.scoreList,stripe:""}},[l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"student_id",label:"学生ID",align:"center"}}),l("el-table-column",{attrs:{prop:"user_name",label:"姓名",align:"center"}}),l("el-table-column",{attrs:{prop:"user_sex",label:"性别",align:"center"}}),l("el-table-column",{attrs:{prop:"college_name",label:"所属学院",align:"center"}}),l("el-table-column",{attrs:{prop:"specialty_name",label:"专业名称",align:"center"}}),l("el-table-column",{attrs:{prop:"class_name",label:"班级名称",align:"center"}}),l("el-table-column",{attrs:{label:"平均成绩",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.avg_score?t.row.avg_score.toFixed(2):0)+"\n        ")]}}])}),l("el-table-column",{attrs:{label:"总学分",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.sum_credit?t.row.sum_credit.toFixed(1):0)+"\n        ")]}}])}),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-view",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row)}}})]}}])})],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},Kr=[],Gr=function(){return C.get("/student/queryByCollege")},Qr=function(e){return C.post("/student/add",e)},Wr=function(e){return C.post("/student/updateScore",e)},Xr=function(e,t){return C.post("/student/addEdu",{eduList:e,student_id:t})},Zr=function(e,t){return C.post("/student/addFamily",{familyList:e,student_id:t})},es=function(e,t,l){return C.post("/student/addPolitics",{politicsObj:e,politics_status_info_id:t,student_id:l})},ts=function(e){return C.post("/student/applyScore",e)},ls=function(e,t){return C.get("/student/deleteScore",{params:{student_id:e,course_id:t}})},rs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return C.get("/student/all",{params:{currentPage:e,pageSize:t,class_id:l,specialty:r}})},ss=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return C.get("/student/queryStudentInfoList",{params:{currentPage:e,pageSize:t,class_id:l,specialty:r}})},as=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;return C.get("/student/queryApplyList",{params:{currentPage:e,pageSize:t,class_id:l,specialty:r,apply_type:s}})},ns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",l=arguments.length>2?arguments[2]:void 0;return C.get("/student/queryPersonScore",{params:{course_year:e,course_type:t,student_id:l}})},os=function(e){return C.get("/student/queryStudentInfo",{params:{student_id:e}})},is=function(e){return C.get("/student/queryPersonInfo",{params:{user_id:e}})},cs={mounted:function(){var e=this;Ll().then((function(t){return e.majorList=t})),this.queryScore()},data:function(){return{formInline:{class_id:"all",specialty:"all"},majorList:[],classList:[],scoreList:[],page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{queryScore:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.class_id,n=s.specialty,this.loading=!0,e.next=5,rs(l,r,a,n);case 5:o=e.sent,this.scoreList=o.scoreList,this.page=o.page,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){this.page.currentPage=1,this.queryScore()},handleClick:function(e){this.$router.push({path:"/score/studentList",query:{student_id:e.student_id}})},handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryScore()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryScore()},majorChange:function(e){"all"!==e&&(this.classList=this.majorList.find((function(t){return t.specialty===e}))["classList"]),this.formInline.class_id="all"}},computed:{},components:{}},us=cs,ds=(l("700b"),Object(i["a"])(us,Jr,Kr,!1,null,"131b05e6",null)),ps=ds.exports,ms=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-add"},[l("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[l("el-tab-pane",{attrs:{label:"添加单个成绩",name:"first"}},[l("ScoreForm")],1),l("el-tab-pane",{attrs:{label:"批量导入成绩",name:"second",lazy:""}},[l("div",{staticClass:"user-add-header cl"},[l("el-upload",{staticClass:"fr",attrs:{disabled:!1,action:"customize",name:"openFile","http-request":e.uploadFile,"file-list":e.file,"show-file-list":!1}},[l("el-button",{staticClass:"fr",attrs:{type:"primary",icon:"el-icon-bottom-right"}},[e._v("导入成绩")])],1),l("el-button",{staticClass:"fr",attrs:{type:"text"}},[e._v("下载导入模板")])],1),l("div",{staticClass:"user-add-content"},[l("div",[l("el-button",{staticClass:"fl all",attrs:{type:"text"},on:{click:e.allDelete}},[e._v("批量删除")])],1),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.scoreList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50"}}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index"}}),l("el-table-column",{attrs:{label:"课程名称","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择课程"},model:{value:t.row.course_id,callback:function(l){e.$set(t.row,"course_id",l)},expression:"scope.row.course_id"}},e._l(e.$store.state.courseListByCollege,(function(e){return l("el-option",{key:e.course_id,attrs:{label:e.course_name,value:e.course_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"学生姓名","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择学生"},model:{value:t.row.student_id,callback:function(l){e.$set(t.row,"student_id",l)},expression:"scope.row.student_id"}},e._l(e.$store.state.studentListByCollege,(function(e){return l("el-option",{key:e.student_id,attrs:{label:e.user_name,value:e.student_id}})})),1)]}}])}),l("el-table-column",{attrs:{label:"成绩","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{model:{value:t.row.score,callback:function(l){e.$set(t.row,"score",e._n(l))},expression:"scope.row.score"}})]}}])}),l("el-table-column",{attrs:{label:"成绩类型","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择成绩类型"},model:{value:t.row.score_type,callback:function(l){e.$set(t.row,"score_type",l)},expression:"scope.row.score_type"}},[l("el-option",{attrs:{label:"正常",value:"正常",selected:""}}),l("el-option",{attrs:{label:"以证代修",value:"以证代修"}}),l("el-option",{attrs:{label:"免考",value:"免考"}}),l("el-option",{attrs:{label:"缓考",value:"缓考"}}),l("el-option",{attrs:{label:"重修",value:"重修"}})],1)]}}])}),l("el-table-column",{attrs:{label:"成绩备注","min-width":"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.row.score_desc,callback:function(l){e.$set(t.row,"score_desc",l)},expression:"scope.row.score_desc"}})]}}])}),l("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(l){return e.addOrRemove(t,!0)}}}),l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(l){return e.addOrRemove(t,!1)}}})]}}])})],1)],1),l("div",{staticClass:"user-add-footer"},[l("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),e._v("\n          \n        "),l("el-button",{on:{click:e.resetClick}},[e._v("重置")])],1)])],1)],1)},fs=[],bs=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"course-form-box"},[l("el-form",{ref:"scoreObjForm",attrs:{model:e.scoreObj,"label-width":"80px",rules:e.rules}},[e.$route.params.flag?l("el-page-header",{attrs:{content:"成绩编辑"},on:{back:e.goBack}}):e._e(),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"课程名称",prop:"course_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择课程",disabled:this.$route.params.flag},model:{value:e.scoreObj.course_id,callback:function(t){e.$set(e.scoreObj,"course_id",t)},expression:"scoreObj.course_id"}},e._l(e.$store.state.courseListByCollege,(function(e){return l("el-option",{key:e.course_id,attrs:{label:e.course_name,value:e.course_id}})})),1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"学生姓名",prop:"student_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择学生",disabled:this.$route.params.flag},model:{value:e.scoreObj.student_id,callback:function(t){e.$set(e.scoreObj,"student_id",t)},expression:"scoreObj.student_id"}},e._l(e.$store.state.studentListByCollege,(function(e){return l("el-option",{key:e.student_id,attrs:{label:e.user_name,value:e.student_id}})})),1)],1)],1),l("el-col",{attrs:{span:8,offset:2,prop:"score"}},[l("el-form-item",{attrs:{label:"成绩",prop:"score"}},[l("el-input",{model:{value:e.scoreObj.score,callback:function(t){e.$set(e.scoreObj,"score",e._n(t))},expression:"scoreObj.score"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"成绩类型"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择成绩类型"},model:{value:e.scoreObj.score_type,callback:function(t){e.$set(e.scoreObj,"score_type",t)},expression:"scoreObj.score_type"}},[l("el-option",{attrs:{label:"正常",value:"正常",selected:""}}),l("el-option",{attrs:{label:"以证代修",value:"以证代修"}}),l("el-option",{attrs:{label:"免考",value:"免考"}}),l("el-option",{attrs:{label:"缓考",value:"缓考"}}),l("el-option",{attrs:{label:"重修",value:"重修"}})],1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"成绩备注"}},[l("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.scoreObj.score_desc,callback:function(t){e.$set(e.scoreObj,"score_desc",t)},expression:"scoreObj.score_desc"}})],1)],1),l("el-col",{attrs:{span:21,offset:2}},[l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.params.flag?"提交":"添加"))]),l("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)},_s=[],hs={mounted:function(){var e=this.$route.params,t=e.flag,l=e.data;t&&(l.course_year_begin=l.course_year.split("-")[0],l.course_year_end=l.course_year.split("-")[1],this.scoreObj=l,this.$set(this,"scoreObj",l))},data:function(){return{scoreObj:{course_id:"",student_id:"",score:"",score_desc:"",score_type:"正常"},rules:{course_id:{required:!0,message:"请选择课程名称",trigger:"blur"},student_id:{required:!0,message:"请选择学生名称",trigger:"blur"},score:{required:!0,message:"请输入成绩",trigger:"blur"}}}},methods:{onSubmit:function(){var e=this;this.$refs["scoreObjForm"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=13;break}if(!e.$route.params.flag){t.next=8;break}return t.next=4,Wr(e.scoreObj);case 4:r=t.sent,console.log(e.scoreObj),t.next=11;break;case 8:return t.next=10,Qr([e.scoreObj]);case 10:r=t.sent;case 11:r&&(e.scoreObj={},e.$message({type:"success",message:e.$route.params.flag?"编辑成功!":"添加成功!"})),e.$route.params.flag&&e.goBack();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs["scoreObjForm"].resetFields()},goBack:function(){this.$router.back()},forceUpdate1:function(e){this.$set(this.scoreObj,"course_year_begin",e)},forceUpdate2:function(e){this.$set(this.scoreObj,"course_year_end",e)}},watch:{editUserObj:function(){this.scoreObj=Object.assign({},this.editUserObj)}}},gs=hs,ys=(l("0b08"),Object(i["a"])(gs,bs,_s,!1,null,"37772a7c",null)),vs=ys.exports,ws={mounted:function(){var e=this;this.$store.state.courseListByCollege.forEach((function(t){var l=t.course_name,r=t.course_id;e.courseDictList[l]=r})),this.$store.state.studentListByCollege.forEach((function(t){var l=t.user_name,r=t.student_id;e.studentDictList[l]=r}))},data:function(){return{scoreList:[{score_type:"正常"}],multipleSelection:[],activeName:"first",file:[],courseDictList:{},studentDictList:{}}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},addOrRemove:function(e,t){t?1!==this.scoreList.length&&this.scoreList.splice(e.$index,1):this.scoreList.push({score_type:"正常"})},allDelete:function(){var e=this,t=this.scoreList.filter((function(t){return-1===e.multipleSelection.indexOf(t)}));this.scoreList=t,0===this.scoreList.length&&this.scoreList.push({})},uploadFile:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l=t.file,r=new FileReader,r.onload=function(e){try{var t=e.target.result,l=ot.a.read(t,{type:"binary"});for(var r in l.Sheets){var a=ot.a.utils.sheet_to_json(l.Sheets[r]),n=a.map((function(e){var t=e["学生姓名"],l=e["课程名称"];return{course_id:s.courseDictList[l],student_id:s.studentDictList[t],score:e["成绩"],score_desc:e["成绩备注"],score_type:e["成绩类型"]}}));s.scoreList=n}}catch(o){s.$message.warning("文件类型不正确！")}},r.readAsBinaryString(l);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),resetClick:function(){this.scoreList=[{score_type:"正常"}],this.multipleSelection=[]},submit:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Qr(this.scoreList);case 2:t=e.sent,t&&(this.$message({type:"success",message:"添加成功!"}),this.scoreList=[{score_type:"正常"}]),console.log(this.scoreList);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},components:{ScoreForm:vs}},js=ws,ks=(l("ec4d"),Object(i["a"])(js,ms,fs,!1,null,"0d5970d4",null)),Os=ks.exports,xs=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[e.$route.query.student_id?l("el-page-header",{attrs:{content:e.studentInfo.user_name+"个人成绩"},on:{back:e.goBack}}):e._e(),l("div",{staticClass:"user-list-header"},[l("h1",{staticClass:"title"},[e._v("在校学习成绩")]),l("div",{staticClass:"title-content"},[l("el-row",[l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("学生ID：")]),e._v(e._s(e.studentInfo.student_id))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("姓名：")]),e._v(e._s(e.studentInfo.user_name))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("学院：")]),e._v(e._s(e.studentInfo.college_name))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("专业：")]),e._v(e._s(e.studentInfo.specialty_name))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("班级：")]),e._v(e._s(e.studentInfo.class_name))])],1)],1)]),l("div",{staticClass:"user-list-footer"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"开课学年"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.yearChange},model:{value:e.formInline.course_year,callback:function(t){e.$set(e.formInline,"course_year",t)},expression:"formInline.course_year"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.courseYearList,(function(e){return l("el-option",{key:e.course_year,attrs:{label:e.course_year,value:e.course_year}})}))],2)],1),l("el-form-item",{attrs:{label:"课程类型"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择课程类型",size:"small"},on:{change:e.typeChange},model:{value:e.formInline.course_type,callback:function(t){e.$set(e.formInline,"course_type",t)},expression:"formInline.course_type"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),l("el-option",{attrs:{label:"限制性选修课",value:"限制性选修课"}}),l("el-option",{attrs:{label:"非限制性选修课",value:"非限制性选修课"}}),l("el-option",{attrs:{label:"公共必修课",value:"公共必修课"}}),l("el-option",{attrs:{label:"公共选修课",value:"公共选修课"}})],1)],1)],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.scoreList,stripe:""}},[l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{label:"学年",prop:"course_year",align:"center"}}),l("el-table-column",{attrs:{label:"课程ID",prop:"course_id",align:"center"}}),l("el-table-column",{attrs:{label:"课程名称",prop:"course_name",align:"center"}}),l("el-table-column",{attrs:{label:"课程类型",prop:"course_type",align:"center"}}),l("el-table-column",{attrs:{label:"学分",prop:"course_credit",align:"center"}}),l("el-table-column",{attrs:{label:"绩点",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.score>90?4:t.row.score>80?3:t.row.score>70?2:t.row.score>60?1:0)+"\n        ")]}}])}),l("el-table-column",{attrs:{label:"成绩",prop:"score",align:"center"}}),l("el-table-column",{attrs:{label:"备注",prop:"score_desc",align:"center"}}),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[4===e.$store.state.userInfo.role_id?l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,1)}}}):e._e(),4===e.$store.state.userInfo.role_id?l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,2)}}}):e._e(),3===e.$store.state.userInfo.role_id?l("el-button",{attrs:{type:t.row.type_end_time?"success":t.row.type_begin_time?"warning":"primary",size:"mini"},on:{click:function(l){return e.handleClick(t.row,3)}}},[e._v("\n            "+e._s(t.row.type_end_time?"已审批":t.row.type_begin_time?"申请中":"申请")+"\n          ")]):e._e()]}}])})],1)],1),l("el-dialog",{attrs:{title:"申请",visible:e.dialogVisible,width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{ref:"classObj",attrs:{model:e.classObj,"label-width":"130px",rules:e.rules}},[l("el-form-item",{attrs:{label:"课程名称",prop:"course_name"}},[l("el-input",{attrs:{disabled:""},model:{value:e.applyObj.course_name,callback:function(t){e.$set(e.applyObj,"course_name",t)},expression:"applyObj.course_name"}})],1),l("el-form-item",{attrs:{label:"成绩异议类型",prop:"score_dissent_type"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.applyObj.score_dissent_type,callback:function(t){e.$set(e.applyObj,"score_dissent_type",t)},expression:"applyObj.score_dissent_type"}},[l("el-option",{attrs:{label:"成绩错误",value:1}})],1)],1),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"创建时间"}},[e._v("\n          "+e._s(e.applyObj.type_begin_time)+"\n        ")])],1),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"关闭时间"}},[e._v("\n          "+e._s(e.applyObj.type_end_time)+"\n        ")])],1),l("el-form-item",{attrs:{label:"老师的描述"}},[l("el-input",{attrs:{type:"textarea",disabled:3===e.$store.state.userInfo.role_id},model:{value:e.applyObj.type_tea_desc,callback:function(t){e.$set(e.applyObj,"type_tea_desc",t)},expression:"applyObj.type_tea_desc"}})],1),l("el-form-item",{attrs:{label:"学生的描述"}},[l("el-input",{attrs:{type:"textarea",disabled:4===e.$store.state.userInfo.role_id},model:{value:e.applyObj.type_stu_desc,callback:function(t){e.$set(e.applyObj,"type_stu_desc",t)},expression:"applyObj.type_stu_desc"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.handleApply}},[e._v("确 定")])],1)],1)],1)},$s=[],Ss={mounted:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,os(this.$route.query.student_id||this.$store.state.userInfo.student_id);case 2:t=e.sent,this.studentInfo=t,yr().then((function(e){l.courseYearList=e})),this.queryStudentScore();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{formInline:{course_year:"all",course_type:"all"},classObj:{teacher_id:"",specialty:"",college_id:"",class_name:""},applyObj:{course_id:"",student_id:"",course_name:"",type_begin_time:"",type_end_time:"",type_tea_desc:"",type_stu_desc:""},rules:{teacher_id:{required:!0,message:"请选择班主任",trigger:"blur"},specialty:{required:!0,message:"请选择专业",trigger:"blur"},college_id:{required:!0,message:"请选择学院",trigger:"blur"},class_name:{required:!0,message:"请填写班级名称",trigger:"blur"}},studentInfo:{},courseYearList:[],scoreList:[],loading:!1,dialogVisible:!1}},methods:{queryStudentScore:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.formInline,l=t.course_year,r=t.course_type,s=this.$route.query.student_id?this.$route.query.student_id:this.$store.state.userInfo.student_id,this.loading=!0,e.next=5,ns(l,r,s);case 5:a=e.sent,this.scoreList=a,this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleApply:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(delete this.applyObj.course_name,this.applyObj.type_begin_time){e.next=9;break}return this.applyObj.type_begin_time=Pe()(new Date).format("YYYY-MM-DD HH:mm:ss"),e.next=5,ts(this.applyObj);case 5:t=e.sent,t&&(this.$message({type:"success",message:"申请成功!"}),this.queryStudentScore()),e.next=17;break;case 9:if(!this.applyObj.type_end_time){e.next=17;break}return this.applyObj.type_begin_time=Pe()(new Date).format("YYYY-MM-DD HH:mm:ss"),this.applyObj.type_end_time="",this.applyObj.type_tea_desc="",e.next=15,ts(this.applyObj);case 15:l=e.sent,l&&(this.$message({type:"success",message:"申请成功!"}),this.queryStudentScore());case 17:this.dialogVisible=!1;case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleClick:function(e,t){var l=this;1==t?this.$router.push({name:"scoreEdit",params:{flag:!0,data:e}}):2==t?this.$confirm("确定要删除此记录吗？是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ls(e.student_id,e.course_id);case 2:r=t.sent,r&&(l.$message({type:"success",message:"删除成功!"}),l.queryStudentScore());case 4:case"end":return t.stop()}}),t)})))).catch((function(){l.$message({type:"info",message:"已取消删除"})})):3===t&&(this.dialogVisible=!0,this.applyObj={course_id:e.course_id,student_id:e.student_id,course_name:e.course_name,type_begin_time:e.type_begin_time?Pe()(e.type_begin_time).format("YYYY-MM-DD HH:mm:ss"):"",type_end_time:e.type_end_time?Pe()(e.type_end_time).format("YYYY-MM-DD HH:mm:ss"):"",type_tea_desc:e.type_tea_desc,type_stu_desc:e.type_stu_desc,score_dissent_type:e.score_dissent_type,score:e.score})},yearChange:function(e){this.formInline.course_year=e,this.queryStudentScore()},typeChange:function(e){this.formInline.course_type=e,this.queryStudentScore()},goBack:function(){this.$router.back()}},computed:{},components:{}},Ls=Ss,Cs=(l("d25e"),Object(i["a"])(Ls,xs,$s,!1,null,"77ee6e98",null)),Is=Cs.exports,Rs=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"所属专业"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.majorChange},model:{value:e.formInline.specialty,callback:function(t){e.$set(e.formInline,"specialty",t)},expression:"formInline.specialty"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})}))],2)],1),l("el-form-item",{attrs:{label:"所属班级"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formInline.class_id,callback:function(t){e.$set(e.formInline,"class_id",t)},expression:"formInline.class_id"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.classList,(function(e){return l("el-option",{key:e.class_id,attrs:{label:e.class_name,value:e.class_id}})}))],2)],1),l("el-form-item",{attrs:{label:"申请状态"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formInline.apply_type,callback:function(t){e.$set(e.formInline,"apply_type",t)},expression:"formInline.apply_type"}},[l("el-option",{attrs:{label:"全部",value:-1}}),l("el-option",{attrs:{label:"未审批",value:1}}),l("el-option",{attrs:{label:"已审批",value:2}})],1)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.scoreList,stripe:""}},[l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"student_id",label:"学生ID",align:"center"}}),l("el-table-column",{attrs:{prop:"user_name",label:"姓名",align:"center"}}),l("el-table-column",{attrs:{prop:"college_name",label:"所属学院",align:"center"}}),l("el-table-column",{attrs:{prop:"specialty_name",label:"专业名称",align:"center"}}),l("el-table-column",{attrs:{prop:"class_name",label:"班级名称",align:"center"}}),l("el-table-column",{attrs:{prop:"course_name",label:"课程名称",align:"center"}}),l("el-table-column",{attrs:{label:"异议类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.score_dissent_type?"成绩错误":"")+"\n        ")]}}])}),l("el-table-column",{attrs:{label:"创建时间",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("formDate")(t.row.type_begin_time))+"\n        ")]}}])}),l("el-table-column",{attrs:{label:"审批时间",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("formDate")(t.row.type_end_time))+"\n        ")]}}])}),l("el-table-column",{attrs:{label:"描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.type_stu_desc.substr(0,15)+"...")+"\n        ")]}}])}),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row)}}})]}}])})],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),l("el-dialog",{attrs:{title:"审批单",visible:e.dialogVisible,width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{attrs:{model:e.applyObj,"label-width":"130px"}},[l("el-form-item",{attrs:{label:"课程名称",prop:"course_name"}},[l("el-input",{attrs:{disabled:""},model:{value:e.applyObj.course_name,callback:function(t){e.$set(e.applyObj,"course_name",t)},expression:"applyObj.course_name"}})],1),l("el-form-item",{attrs:{label:"成绩",prop:"score"}},[l("el-input",{model:{value:e.applyObj.score,callback:function(t){e.$set(e.applyObj,"score",t)},expression:"applyObj.score"}})],1),l("el-form-item",{attrs:{label:"成绩异议类型",prop:"score_dissent_type"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:e.applyObj.score_dissent_type,callback:function(t){e.$set(e.applyObj,"score_dissent_type",t)},expression:"applyObj.score_dissent_type"}},[l("el-option",{attrs:{label:"成绩错误",value:1}})],1)],1),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"创建时间"}},[e._v("\n          "+e._s(e.applyObj.type_begin_time)+"\n        ")])],1),l("el-col",{attrs:{span:12}},[l("el-form-item",{attrs:{label:"关闭时间"}},[e._v("\n          "+e._s(e.applyObj.type_end_time)+"\n        ")])],1),l("el-form-item",{attrs:{label:"老师的描述"}},[l("el-input",{attrs:{type:"textarea",disabled:3===e.$store.state.userInfo.role_id},model:{value:e.applyObj.type_tea_desc,callback:function(t){e.$set(e.applyObj,"type_tea_desc",t)},expression:"applyObj.type_tea_desc"}})],1),l("el-form-item",{attrs:{label:"学生的描述"}},[l("el-input",{attrs:{type:"textarea",disabled:4===e.$store.state.userInfo.role_id},model:{value:e.applyObj.type_stu_desc,callback:function(t){e.$set(e.applyObj,"type_stu_desc",t)},expression:"applyObj.type_stu_desc"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.handleApply}},[e._v("确 定")])],1)],1)],1)},zs=[],Fs={mounted:function(){var e=this;Ll().then((function(t){return e.majorList=t})),this.queryScore()},filters:{formDate:function(e){return e?Pe()(e).format("YYYY-MM-DD HH:mm:ss"):""}},data:function(){return{dialogVisible:!1,applyObj:{course_id:"",student_id:"",course_name:"",type_begin_time:"",type_end_time:"",type_tea_desc:"",type_stu_desc:"",score:0},formInline:{class_id:"all",specialty:"all",apply_type:-1},majorList:[],classList:[],scoreList:[],page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{handleApply:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return delete this.applyObj.course_name,this.applyObj.type_end_time=Pe()(new Date).format("YYYY-MM-DD HH:mm:ss"),console.log(this.applyObj),e.next=5,ts(this.applyObj);case 5:t=e.sent,t&&(this.$message({type:"success",message:"修改成功!"}),this.queryScore()),this.dialogVisible=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),queryScore:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.class_id,n=s.specialty,o=s.apply_type,this.loading=!0,e.next=5,as(l,r,a,n,o);case 5:i=e.sent,this.scoreList=i.scoreList,this.page=i.page,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){this.page.currentPage=1,this.queryScore()},handleClick:function(e){this.dialogVisible=!0,this.applyObj={course_id:e.course_id,student_id:e.student_id,course_name:e.course_name,type_begin_time:e.type_begin_time?Pe()(e.type_begin_time).format("YYYY-MM-DD HH:mm:ss"):"",type_end_time:e.type_end_time?Pe()(e.type_end_time).format("YYYY-MM-DD HH:mm:ss"):"",type_tea_desc:e.type_tea_desc,type_stu_desc:e.type_stu_desc,score_dissent_type:e.score_dissent_type,score:e.score}},handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryScore()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryScore()},majorChange:function(e){"all"!==e&&(this.classList=this.majorList.find((function(t){return t.specialty===e}))["classList"]),this.formInline.class_id="all"}},computed:{},components:{}},qs=Fs,Ps=(l("c003"),Object(i["a"])(qs,Rs,zs,!1,null,"3de8b564",null)),Ds=Ps.exports,Es={path:"/score",name:"score",meta:{name:"成绩管理"},component:Vr,redirect:"/score/list",children:[{path:"/score/list",meta:{name:"成绩列表"},component:ps,children:[]},{path:"/score/add",name:"scoreAdd",meta:{name:"成绩添加"},component:Os},{path:"/score/edit",name:"scoreEdit",meta:{name:"成绩编辑"},component:vs},{path:"/score/studentList",name:"scoreStudentList",meta:{name:"个人成绩"},component:Is},{path:"/score/examine",name:"scoreExamine",meta:{name:"成绩复议审批"},component:Ds}]},Ms=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("router-view")},Ys=[],Bs={data:function(){return{}}},As=Bs,Ts=Object(i["a"])(As,Ms,Ys,!1,null,"1f96ad80",null),Ns=Ts.exports,Hs=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"person-box"},[l("div",{class:{box:!0,border:e.baseFlag}},[l("div",{staticClass:"line"},[l("el-divider",{attrs:{"content-position":"left"}},[l("h2",[e._v("个人基本资料")])])],1),l("el-form",[l("el-row",[l("el-col",{attrs:{span:24}},[l("el-form-item",{staticStyle:{"text-align":"right"}},[l("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.baseClick}},[e._v("修改")])],1)],1),l("el-col",{attrs:{span:6}},[3===e.inRoleId?l("el-form-item",{attrs:{label:"学生ID:","label-width":"100px"}},[l("el-input",{attrs:{type:"text",disabled:""},model:{value:e.baseObj.student_id,callback:function(t){e.$set(e.baseObj,"student_id",t)},expression:"baseObj.student_id"}})],1):e._e()],1),l("el-col",{attrs:{span:6}},[2===e.inRoleId||4===e.inRoleId?l("el-form-item",{attrs:{label:"教师ID:","label-width":"100px"}},[l("el-input",{attrs:{type:"text",disabled:""},model:{value:e.baseObj.teacher_id,callback:function(t){e.$set(e.baseObj,"teacher_id",t)},expression:"baseObj.teacher_id"}})],1):e._e()],1),l("el-col",{attrs:{span:6}},[1===e.inRoleId?l("el-form-item",{staticClass:"not",attrs:{label:"院长ID:","label-width":"100px"}},[l("el-input",{attrs:{type:"text",disabled:""},model:{value:e.baseObj.user_id,callback:function(t){e.$set(e.baseObj,"user_id",t)},expression:"baseObj.user_id"}})],1):e._e()],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"姓名:","label-width":"100px"}},[l("el-input",{attrs:{type:"text",disabled:e.baseFlag},model:{value:e.baseObj.user_name,callback:function(t){e.$set(e.baseObj,"user_name",t)},expression:"baseObj.user_name"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"曾用名:","label-width":"100px"}},[l("el-input",{attrs:{type:"text",disabled:e.baseFlag},model:{value:e.baseObj.user_last_name,callback:function(t){e.$set(e.baseObj,"user_last_name",t)},expression:"baseObj.user_last_name"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"性别:","label-width":"100px"}},[l("el-input",{attrs:{type:"text",disabled:e.baseFlag},model:{value:e.baseObj.user_sex,callback:function(t){e.$set(e.baseObj,"user_sex",t)},expression:"baseObj.user_sex"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"年龄:","label-width":"100px"}},[l("el-input",{attrs:{type:"text",disabled:e.baseFlag},model:{value:e.baseObj.user_age,callback:function(t){e.$set(e.baseObj,"user_age",t)},expression:"baseObj.user_age"}})],1)],1),l("el-col",{attrs:{span:6}},[3===e.inRoleId?l("el-form-item",{attrs:{label:"政治面貌:","label-width":"100px"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择政治面貌",disabled:e.baseFlag},model:{value:e.baseObj.politics_status_id,callback:function(t){e.$set(e.baseObj,"politics_status_id",t)},expression:"baseObj.politics_status_id"}},e._l(e.$store.state.politicsList,(function(e){return l("el-option",{key:e.politics_status_id,attrs:{label:e.politics_status,value:e.politics_status_id}})})),1)],1):e._e()],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"民族:","label-width":"100px"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择民族",disabled:e.baseFlag},model:{value:e.baseObj.user_nation,callback:function(t){e.$set(e.baseObj,"user_nation",t)},expression:"baseObj.user_nation"}},[l("el-option",{attrs:{label:"汉族",value:"汉族"}}),l("el-option",{attrs:{label:"土家族",value:"土家族"}}),l("el-option",{attrs:{label:"蒙古族",value:"蒙古族"}}),l("el-option",{attrs:{label:"回族",value:"回族"}}),l("el-option",{attrs:{label:"苗族",value:"苗族"}}),l("el-option",{attrs:{label:"满族",value:"满族"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"手机:","label-width":"100px"}},[l("el-input",{attrs:{type:"text",disabled:e.baseFlag},model:{value:e.baseObj.user_tel,callback:function(t){e.$set(e.baseObj,"user_tel",t)},expression:"baseObj.user_tel"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"籍贯:","label-width":"100px"}},[l("el-input",{attrs:{type:"text",disabled:e.baseFlag},model:{value:e.baseObj.user_address,callback:function(t){e.$set(e.baseObj,"user_address",t)},expression:"baseObj.user_address"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"出生日期:","label-width":"100px"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd",disabled:e.baseFlag},model:{value:e.baseObj.user_birthday,callback:function(t){e.$set(e.baseObj,"user_birthday",t)},expression:"baseObj.user_birthday"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"身体状况:","label-width":"100px"}},[l("el-input",{attrs:{type:"text",disabled:e.baseFlag},model:{value:e.baseObj.user_heath,callback:function(t){e.$set(e.baseObj,"user_heath",t)},expression:"baseObj.user_heath"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"学历:","label-width":"100px"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择文化程度",disabled:e.baseFlag},model:{value:e.baseObj.user_culture,callback:function(t){e.$set(e.baseObj,"user_culture",t)},expression:"baseObj.user_culture"}},[l("el-option",{attrs:{label:"小学",value:"小学"}}),l("el-option",{attrs:{label:"初中",value:"初中"}}),l("el-option",{attrs:{label:"高中",value:"高中"}}),l("el-option",{attrs:{label:"本科",value:"本科"}}),l("el-option",{attrs:{label:"研究生",value:"研究生"}}),l("el-option",{attrs:{label:"博士",value:"博士"}})],1)],1)],1),l("el-col",{attrs:{span:6}},[3===e.inRoleId?l("el-form-item",{attrs:{label:"所属学院:","label-width":"100px"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属学院",disabled:""},model:{value:e.baseObj.college_id,callback:function(t){e.$set(e.baseObj,"college_id",t)},expression:"baseObj.college_id"}},e._l(e.collegeList,(function(e){return l("el-option",{key:e.college_id,attrs:{label:e.college_name,value:e.college_id}})})),1)],1):e._e()],1),l("el-col",{attrs:{span:6}},[3===e.inRoleId?l("el-form-item",{attrs:{label:"所属专业:","label-width":"100px"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:e.baseFlag||3===e.inRoleId},on:{change:e.marjorChange},model:{value:e.baseObj.specialty,callback:function(t){e.$set(e.baseObj,"specialty",t)},expression:"baseObj.specialty"}},e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})})),1)],1):e._e()],1),l("el-col",{attrs:{span:6}},[3===e.inRoleId?l("el-form-item",{attrs:{label:"所属班级:","label-width":"100px"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择班级",disabled:e.baseFlag||3===e.inRoleId},model:{value:e.baseObj.class_id,callback:function(t){e.$set(e.baseObj,"class_id",t)},expression:"baseObj.class_id"}},e._l(e.classList,(function(e){return l("el-option",{key:e.class_id,attrs:{label:e.class_name,value:e.class_id}})})),1)],1):e._e()],1),l("el-col",{attrs:{span:6}},[2===e.inRoleId||4===e.inRoleId?l("el-form-item",{attrs:{label:"职称:","label-width":"100px"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择职称",disabled:e.baseFlag},model:{value:e.baseObj.teacher_title,callback:function(t){e.$set(e.baseObj,"teacher_title",t)},expression:"baseObj.teacher_title"}},[l("el-option",{attrs:{label:"助教",value:"助教"}}),l("el-option",{attrs:{label:"讲师",value:"讲师"}}),l("el-option",{attrs:{label:"副教授",value:"副教授"}}),l("el-option",{attrs:{label:"教授",value:"教授"}})],1)],1):e._e()],1),e.baseFlag?e._e():l("el-col",{attrs:{span:24}},[l("el-form-item",{staticStyle:{"text-align":"center"}},[l("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.baseHandle}},[e._v("确定")]),l("el-button",{attrs:{size:"small"},on:{click:function(t){return e.baseClick(1)}}},[e._v("取消")])],1)],1)],1)],1)],1),3===e.inRoleId?l("div",{class:{box:!0,border:e.politicsFlag}},[l("div",{staticClass:"line"},[l("el-divider",{attrs:{"content-position":"left"}},[l("h2",[e._v("教育经历")])])],1),l("el-row",[l("el-col",{attrs:{span:24}},[l("el-form",[l("el-form-item",{staticStyle:{"text-align":"right"}},[l("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.eduClick}},[e._v("修改")])],1)],1)],1)],1),l("div",{staticClass:"table-box"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.eduList}},[l("el-table-column",{attrs:{prop:"edu_begin_time",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",disabled:e.eduFlag},model:{value:t.row.edu_begin_time,callback:function(l){e.$set(t.row,"edu_begin_time",l)},expression:"scope.row.edu_begin_time"}})]}}],null,!1,1635212469)}),l("el-table-column",{attrs:{prop:"edu_end_time",label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",disabled:e.eduFlag},model:{value:t.row.edu_end_time,callback:function(l){e.$set(t.row,"edu_end_time",l)},expression:"scope.row.edu_end_time"}})]}}],null,!1,704829245)}),l("el-table-column",{attrs:{label:"学校名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{disabled:e.eduFlag},model:{value:t.row.edu_roll_name,callback:function(l){e.$set(t.row,"edu_roll_name",l)},expression:"scope.row.edu_roll_name"}})]}}],null,!1,2848702533)}),l("el-table-column",{attrs:{label:"证明人"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{disabled:e.eduFlag},model:{value:t.row.edu_person,callback:function(l){e.$set(t.row,"edu_person",l)},expression:"scope.row.edu_person"}})]}}],null,!1,1298900661)}),l("el-table-column",{attrs:{label:"证明人联系方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{disabled:e.eduFlag},model:{value:t.row.edu_person_tel,callback:function(l){e.$set(t.row,"edu_person_tel",l)},expression:"scope.row.edu_person_tel"}})]}}],null,!1,1836983639)}),e.eduFlag?e._e():l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",disabled:1===e.eduList.length},on:{click:function(l){return e.addOrRemove(t,!0)}}}),t.$index===e.eduList.length-1?l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(l){return e.addOrRemove(t,!1)}}}):e._e()]}}],null,!1,3805451137)})],1)],1),e.eduFlag?e._e():l("el-row",[l("el-col",{attrs:{span:24}},[l("el-form",[l("el-form-item",{staticStyle:{"text-align":"center"}},[l("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.eduHandle}},[e._v("确定")]),l("el-button",{attrs:{size:"small"},on:{click:function(t){return e.eduClick(1)}}},[e._v("取消")])],1)],1)],1)],1)],1):e._e(),3===e.inRoleId?l("div",{class:{box:!0,border:e.politicsFlag}},[l("div",{staticClass:"line"},[l("el-divider",{attrs:{"content-position":"left"}},[l("h2",[e._v("家庭成员")])])],1),l("el-row",[l("el-col",{attrs:{span:24}},[l("el-form",[l("el-form-item",{staticStyle:{"text-align":"right"}},[l("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.familyClick}},[e._v("修改")])],1)],1)],1)],1),l("div",{staticClass:"table-box"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.familyList}},[l("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{disabled:e.familyFlag},model:{value:t.row.family_name,callback:function(l){e.$set(t.row,"family_name",l)},expression:"scope.row.family_name"}})]}}],null,!1,3645560743)}),l("el-table-column",{attrs:{label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-radio",{attrs:{disabled:e.familyFlag,label:"男"},model:{value:t.row.family_sex,callback:function(l){e.$set(t.row,"family_sex",l)},expression:"scope.row.family_sex"}},[e._v("男")]),l("el-radio",{attrs:{disabled:e.familyFlag,label:"女"},model:{value:t.row.family_sex,callback:function(l){e.$set(t.row,"family_sex",l)},expression:"scope.row.family_sex"}},[e._v("女")])]}}],null,!1,412395572)}),l("el-table-column",{attrs:{label:"年龄"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{disabled:e.familyFlag},model:{value:t.row.family_age,callback:function(l){e.$set(t.row,"family_age",l)},expression:"scope.row.family_age"}})]}}],null,!1,3253635011)}),l("el-table-column",{attrs:{label:"关系"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{disabled:e.familyFlag},model:{value:t.row.family_relation,callback:function(l){e.$set(t.row,"family_relation",l)},expression:"scope.row.family_relation"}})]}}],null,!1,2834375366)}),l("el-table-column",{attrs:{label:"工作单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{attrs:{disabled:e.familyFlag},model:{value:t.row.family_job,callback:function(l){e.$set(t.row,"family_job",l)},expression:"scope.row.family_job"}})]}}],null,!1,4248389383)}),e.familyFlag?e._e():l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",disabled:1===e.familyList.length},on:{click:function(l){return e.familyAddOrRemove(t,!0)}}}),t.$index===e.familyList.length-1?l("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",circle:""},on:{click:function(l){return e.familyAddOrRemove(t,!1)}}}):e._e()]}}],null,!1,920914593)})],1)],1),e.familyFlag?e._e():l("el-row",[l("el-col",{attrs:{span:24}},[l("el-form",[l("el-form-item",{staticStyle:{"text-align":"center"}},[l("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.familyHandle}},[e._v("确定")]),l("el-button",{attrs:{size:"small"},on:{click:function(t){return e.familyClick(1)}}},[e._v("取消")])],1)],1)],1)],1)],1):e._e(),3===e.inRoleId?l("div",{class:{box:!0,border:e.politicsFlag}},[l("div",{staticClass:"line"},[l("el-divider",{attrs:{"content-position":"left"}},[l("h2",[e._v("政治面貌")])])],1),l("el-form",[l("el-row",[l("el-form-item",{staticStyle:{"text-align":"right"}},[l("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.politicsClick}},[e._v("修改")])],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"名称:","label-width":"120px"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择政治面貌",disabled:e.politicsFlag},model:{value:e.politicsObj.politics_status_id,callback:function(t){e.$set(e.politicsObj,"politics_status_id",t)},expression:"politicsObj.politics_status_id"}},e._l(e.$store.state.politicsList,(function(e){return l("el-option",{key:e.politics_status_id,attrs:{label:e.politics_status,value:e.politics_status_id}})})),1)],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"青年志愿者:","label-width":"120px"}},[l("el-radio",{attrs:{disabled:e.politicsFlag,label:0},model:{value:e.politicsObj.volunteer,callback:function(t){e.$set(e.politicsObj,"volunteer",t)},expression:"politicsObj.volunteer"}},[e._v("是")]),l("el-radio",{attrs:{disabled:e.politicsFlag,label:1},model:{value:e.politicsObj.volunteer,callback:function(t){e.$set(e.politicsObj,"volunteer",t)},expression:"politicsObj.volunteer"}},[e._v("否")])],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"入党时间:","label-width":"120px"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",disabled:e.politicsFlag},model:{value:e.politicsObj.begin_time,callback:function(t){e.$set(e.politicsObj,"begin_time",t)},expression:"politicsObj.begin_time"}})],1)],1),l("el-col",{attrs:{span:6}},[l("el-form-item",{attrs:{label:"入团时间:","label-width":"120px"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",disabled:e.politicsFlag},model:{value:e.politicsObj.member_time,callback:function(t){e.$set(e.politicsObj,"member_time",t)},expression:"politicsObj.member_time"}})],1)],1),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"个人思想鉴定:","label-width":"120px"}},[l("el-input",{attrs:{type:"textarea",autocomplete:"off",disabled:e.politicsFlag},model:{value:e.politicsObj.ideo_iden,callback:function(t){e.$set(e.politicsObj,"ideo_iden",t)},expression:"politicsObj.ideo_iden"}})],1)],1),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"鉴定人:","label-width":"120px"}},[l("el-input",{attrs:{type:"text",autocomplete:"off",disabled:e.politicsFlag},model:{value:e.politicsObj.ideo_person,callback:function(t){e.$set(e.politicsObj,"ideo_person",t)},expression:"politicsObj.ideo_person"}})],1)],1),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"团支部意见:","label-width":"120px"}},[l("el-radio",{attrs:{label:"同意",disabled:e.politicsFlag},model:{value:e.politicsObj.unity,callback:function(t){e.$set(e.politicsObj,"unity",t)},expression:"politicsObj.unity"}},[e._v("同意")]),l("el-radio",{attrs:{label:"不同意",disabled:e.politicsFlag},model:{value:e.politicsObj.unity,callback:function(t){e.$set(e.politicsObj,"unity",t)},expression:"politicsObj.unity"}},[e._v("不同意")])],1)],1),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"书记名:","label-width":"120px"}},[l("el-input",{attrs:{type:"text",autocomplete:"off",disabled:e.politicsFlag},model:{value:e.politicsObj.unity_person,callback:function(t){e.$set(e.politicsObj,"unity_person",t)},expression:"politicsObj.unity_person"}})],1)],1),l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"文件材料:","label-width":"120px"}},[l("el-upload",{staticClass:"upload-demo",attrs:{action:"//localhost:3000/api/student/uploadFile","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.onSunccess,multiple:"","file-list":e.politicsObj.fileList,disabled:e.politicsFlag}},[l("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),e.politicsFlag?e._e():l("el-col",{attrs:{span:24}},[l("el-form-item",{staticStyle:{"text-align":"center"}},[l("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.politicsHandle}},[e._v("确定")]),l("el-button",{attrs:{size:"small"},on:{click:function(t){return e.politicsClick(1)}}},[e._v("取消")])],1)],1)],1)],1)],1):e._e()])},Us=[];l("7f7f"),l("20d6");function Vs(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)}return l}function Js(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?Vs(Object(l),!0).forEach((function(t){Object(Me["a"])(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):Vs(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var Ks={mounted:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.dispatch("getAllRoll"),this.$store.dispatch("getAllClass"),e.next=4,He();case 4:this.collegeList=e.sent,t=this.$route.params.data||{},console.log(t),t.user_id?(this.inRoleId=t.role_id,this.student_id=t.student_id,console.log(this.student_id),this.user_id=t.user_id,this.politics_status_info_id=t.politics_status_info_id):this.inRoleId=this.$store.state.userInfo.role_id,this.queryPersonInfo();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{baseObj:{},collegeList:[],majorList:[],classList:[],eduList:[],eduTempList:[],familyList:[],familyTempList:[],baseFlag:!0,eduFlag:!0,familyFlag:!0,politicsFlag:!0,inRoleId:-1,fileList:[],student_id:-1,politics_status_info_id:-1,politicsObj:{fileList:[]}}},methods:{baseClick:function(e){this.baseFlag=1==e},queryPersonInfo:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.params.data||{},e.next=3,is(t.user_id||this.$store.state.userInfo.user_id);case 3:l=e.sent,console.log(l),this.eduList=l.eduList.map((function(e){return e.edu_begin_time=Pe()(e.edu_begin_time).format("YYYY-MM-DD"),e.edu_end_time=Pe()(e.edu_end_time).format("YYYY-MM-DD"),e})),this.familyList=l.familyList,this.politicsObj={fileList:l.baseInfo.fileList,begin_time:l.baseInfo.base.begin_time?Pe()(l.baseInfo.base.begin_time).format("YYYY-MM-DD"):"",ideo_iden:l.baseInfo.base.ideo_iden,ideo_person:l.baseInfo.base.ideo_person,member_time:l.baseInfo.base.member_time?Pe()(l.baseInfo.base.member_time).format("YYYY-MM-DD"):"",politics_status_id:l.baseInfo.base.politics_status_id,unity:l.baseInfo.base.unity,unity_person:l.baseInfo.base.unity_person,volunteer:l.baseInfo.base.volunteer},this.baseObj={user_id:l.baseInfo.base.user_id,role_id:l.baseInfo.base.role_id,student_id:l.baseInfo.base.student_id,teacher_id:l.baseInfo.base.teacher_id,college_id:l.baseInfo.base.college_id,user_name:l.baseInfo.base.user_name,user_last_name:l.baseInfo.base.user_last_name,user_sex:l.baseInfo.base.user_sex,user_age:l.baseInfo.base.user_age,politics_status_id:l.baseInfo.base.politics_status_id,user_nation:l.baseInfo.base.user_nation,user_tel:l.baseInfo.base.user_tel,user_address:l.baseInfo.base.user_address,user_heath:l.baseInfo.base.user_heath,user_culture:l.baseInfo.base.user_culture,specialty:l.baseInfo.base.specialty,class_id:l.baseInfo.base.class_id,teacher_title:l.baseInfo.base.teacher_title,user_birthday:l.baseInfo.base.user_birthday},this.student_id=l.baseInfo.base.student_id,this.politics_status_info_id=l.baseInfo.base.politics_status_info_id,3==this.inRoleId&&(this.majorList=Object.assign({},this.collegeList.find((function(e){return e.college_id==r.baseObj.college_id}))["majorList"]),this.classList=Object.assign({},this.$store.state.classList.filter((function(e){return e.specialty===r.baseObj.specialty}))));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),eduClick:function(e){1==e?(this.eduFlag=!0,this.eduList=Object.assign([{}],this.eduTempList)):(this.eduTempList=Object.assign([],this.eduList),0===this.eduList.length&&(this.eduList=[{}]),this.eduFlag=!1)},politicsClick:function(e){this.politicsFlag=1==e},eduHandle:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(this.eduList,this.student_id),e.next=3,Xr(this.eduList,this.student_id);case 3:t=e.sent,console.log(t),t&&(this.$message.success("保存成功"),this.eduFlag=!0,this.queryPersonInfo());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),baseHandle:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.baseObj.user_birthday=Pe()(this.baseObj.user_birthday).format("YYYY-MM-DD"),e.next=3,P(this.baseObj);case 3:t=e.sent,console.log(t),t&&(this.$message.success("保存成功"),this.baseFlag=!0,this.queryPersonInfo());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),politicsHandle:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(this.politicsObj,this.politics_status_info_id,this.student_id),e.next=3,es(this.politicsObj,this.politics_status_info_id,this.student_id);case 3:t=e.sent,console.log(t),t&&(this.$message.success("保存成功"),this.politicsFlag=!0,this.queryPersonInfo());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),familyHandle:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Zr(this.familyList,this.student_id);case 2:t=e.sent,console.log(t),t&&(this.$message.success("保存成功"),this.familyFlag=!0,this.queryPersonInfo());case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),familyClick:function(e){1==e?(this.familyFlag=!0,this.familyList=Object.assign([],this.familyTempList)):(this.familyTempList=Object.assign([],this.familyList),0===this.familyList.length&&(this.familyList=[{}]),this.familyFlag=!1)},marjorChange:function(e){console.log(e),this.baseObj.specialty=e,this.classList=Object.assign({},this.$store.state.classList.filter((function(t){return t.specialty===e}))),this.$set(this.baseObj,"class_id","")},addOrRemove:function(e,t){t?1!==this.eduList.length&&this.eduList.splice(e.$index,1):this.eduList.push({})},familyAddOrRemove:function(e,t){t?1!==this.familyList.length&&this.familyList.splice(e.$index,1):this.familyList.push({})},handleRemove:function(e){console.log(e);var t=this.politicsObj.fileList.findIndex((function(t){return e.file_id===t.file_id}));this.politicsObj.fileList.splice(t,1)},handlePreview:function(e){console.log(e)},beforeRemove:function(e,t){return console.log(t),this.$confirm("确定移除 ".concat(e.name,"？"))},onSunccess:function(e){this.politicsObj.fileList.push({url:e.url,file_id:e.file_id,name:e.name})}},computed:Js({},Object(Ue["b"])(["roleList"]))},Gs=Ks,Qs=(l("a1a4"),Object(i["a"])(Gs,Hs,Us,!1,null,null,null)),Ws=Qs.exports,Xs=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"password"},[l("h1"),l("div",{staticClass:"form-box"},[l("h1",[e._v("密码修改")]),l("el-form",{ref:"userForm",staticClass:"login-form",staticStyle:{width:"400px",margin:"0 auto"},attrs:{model:e.userForm,"status-icon":"",rules:e.rules}},[l("el-form-item",[l("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入账号",disabled:""},model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}},[l("i",{staticClass:"el-input__icon el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),l("el-form-item",{attrs:{prop:"password"}},[l("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入新密码"},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}},[l("i",{staticClass:"el-input__icon el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),l("el-form-item",{attrs:{prop:"repeatPassword"}},[l("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请再次输入密码"},model:{value:e.userForm.repeatPassword,callback:function(t){e.$set(e.userForm,"repeatPassword",t)},expression:"userForm.repeatPassword"}},[l("i",{staticClass:"el-input__icon el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),l("el-form-item",{staticStyle:{"text-align":"center"}},[l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.login("userForm")}}},[e._v("提交")])],1)],1)],1)])},Zs=[],ea={data:function(){var e=this,t=function(t,l,r){return l?e.userForm.password!==l?r(new Error("两次密码输入不一致")):void r():r(new Error("请输入确认密码"))};return{userForm:{username:this.$store.state.userInfo.user_username,password:"",repeatPassword:""},rules:{username:{required:!0,message:"请输入用户名",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"},repeatPassword:{validator:t,trigger:"blur"}}}},methods:{login:function(){var e=this;this.$refs["userForm"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=13;break}return r=e.$store.state.userInfo.user_id,t.next=4,A(e.userForm.password,r);case 4:if(s=t.sent,!s){t.next=11;break}return e.$message({type:"success",message:"修改密码成功"}),t.next=9,B();case 9:e.$store.dispatch("login",{}),e.$router.replace("/login");case 11:t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},ta=ea,la=(l("577d"),Object(i["a"])(ta,Xs,Zs,!1,null,"f0daff7a",null)),ra=la.exports,sa={path:"/person",name:"person",meta:{name:"个人资料管理"},component:Ns,redirect:"/person/add",children:[{name:"personAdd",path:"/person/add",meta:{name:"个人资料录入"},component:Ws,children:[]},{path:"/person/password",meta:{name:"密码修改"},component:ra}]},aa=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("router-view")},na=[],oa={data:function(){return{}}},ia=oa,ca=Object(i["a"])(ia,aa,na,!1,null,"0e25ae98",null),ua=ca.exports,da=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"所属专业"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.majorChange},model:{value:e.formInline.specialty,callback:function(t){e.$set(e.formInline,"specialty",t)},expression:"formInline.specialty"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})}))],2)],1),l("el-form-item",{attrs:{label:"所属班级"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formInline.class_id,callback:function(t){e.$set(e.formInline,"class_id",t)},expression:"formInline.class_id"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.classList,(function(e){return l("el-option",{key:e.class_id,attrs:{label:e.class_name,value:e.class_id}})}))],2)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rollList,stripe:""}},[l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"student_id",label:"学生ID",align:"center"}}),l("el-table-column",{attrs:{prop:"user_name",label:"姓名",align:"center"}}),l("el-table-column",{attrs:{prop:"user_sex",label:"性别",align:"center"}}),l("el-table-column",{attrs:{prop:"college_name",label:"所属学院",align:"center"}}),l("el-table-column",{attrs:{prop:"specialty_name",label:"专业名称",align:"center"}}),l("el-table-column",{attrs:{prop:"class_name",label:"班级名称",align:"center"}}),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-view",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row)}}})]}}])})],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},pa=[],ma=function(e){return C.post("/roll/add",e)},fa=function(e){return C.post("/roll/edit",e)},ba=function(e,t){return C.get("/roll/personRoll",{params:{student_id:e,state:t}})},_a=function(e){return C.get("/roll/removeRoll",{params:{roll_id:e}})},ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return C.get("/roll/all",{params:{currentPage:e,pageSize:t,class_id:l,specialty:r}})},ga={mounted:function(){var e=this;Ll().then((function(t){return e.majorList=t})),this.queryRoll()},data:function(){return{formInline:{class_id:"all",specialty:"all"},majorList:[],classList:[],rollList:[],page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{queryRoll:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.class_id,n=s.specialty,this.loading=!0,e.next=5,ha(l,r,a,n);case 5:o=e.sent,this.rollList=o.rollList,this.page=o.page,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){this.page.currentPage=1,this.queryRoll()},handleClick:function(e){this.$router.push({path:"/roll/person",query:{student_id:e.student_id,user_name:e.user_name}})},handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryRoll()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryRoll()},majorChange:function(e){"all"!==e&&(this.classList=this.majorList.find((function(t){return t.specialty===e}))["classList"]),this.formInline.class_id="all"}},computed:{},components:{}},ya=ga,va=(l("8c0d"),Object(i["a"])(ya,da,pa,!1,null,"cac008a0",null)),wa=va.exports,ja=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"add-college"},[l("el-form",{ref:"rollObj",attrs:{model:e.rollObj,"label-width":"120px",rules:e.rules}},[l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"学生ID",prop:"student_id"}},[l("el-input",{attrs:{disabled:""},model:{value:e.rollObj.student_id,callback:function(t){e.$set(e.rollObj,"student_id",t)},expression:"rollObj.student_id"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"学生姓名",prop:"user_name"}},[l("el-input",{attrs:{disabled:""},model:{value:e.rollObj.user_name,callback:function(t){e.$set(e.rollObj,"user_name",t)},expression:"rollObj.user_name"}})],1)],1)],1),l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"学籍异动类型",prop:"roll_type"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.rollObj.roll_type,callback:function(t){e.$set(e.rollObj,"roll_type",t)},expression:"rollObj.roll_type"}},[l("el-option",{attrs:{label:"休学",value:"休学"}}),l("el-option",{attrs:{label:"复学",value:"复学"}}),l("el-option",{attrs:{label:"退学",value:"退学"}}),l("el-option",{attrs:{label:"留级",value:"留级"}}),l("el-option",{attrs:{label:"当兵入伍",value:"当兵入伍"}}),l("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1)],1)],1),l("el-row",{attrs:{gutter:40}},[l("el-col",{attrs:{span:8,offset:3}},[l("el-form-item",{attrs:{label:"学生描述",prop:"roll_desc"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:16},placeholder:"请输入内容"},model:{value:e.rollObj.roll_desc,callback:function(t){e.$set(e.rollObj,"roll_desc",t)},expression:"rollObj.roll_desc"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:21,offset:3}},[l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),l("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1)},ka=[],Oa={props:[],mounted:function(){},data:function(){return{rollObj:{student_id:this.$store.state.userInfo.student_id,user_name:this.$store.state.userInfo.user_name,roll_type:"",roll_desc:""},rules:{roll_type:{required:!0,message:"请选择学籍异动类型",trigger:"blur"},roll_desc:{required:!0,message:"请输入描述",trigger:"blur"}}}},methods:{onSubmit:function(){var e=this;this.$refs["rollObj"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=8;break}return e.rollObj.roll_begin_time=Pe()(Date.now()).format("YYYY-MM-DD HH:mm:ss"),t.next=4,ma(e.rollObj);case 4:r=t.sent,console.log(e.rollObj),r&&(e.rollObj={student_id:e.$store.state.userInfo.student_id,user_name:e.$store.state.userInfo.user_name},e.$message({type:"success",message:e.$route.params.flag?"编辑成功!":"添加成功!"})),e.$route.params.flag&&e.goBack();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs["rollObj"].resetFields(),this.rollObj={student_id:this.$store.state.userInfo.student_id,user_name:this.$store.state.userInfo.user_name}},goBack:function(){this.$router.back()}},computed:{userCollegeList:function(){var e=this.$store.state.userCollegeList,t=this.$route.params,l=t.flag,r=t.data;return l&&e.unshift({user_id:r.user_id,user_name:r.user_name}),e}}},xa=Oa,$a=(l("b93d"),Object(i["a"])(xa,ja,ka,!1,null,"75a3066a",null)),Sa=$a.exports,La=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[e.$route.query.student_id?l("el-page-header",{attrs:{content:e.studentInfo.user_name+"的学籍异动"},on:{back:e.goBack}}):e._e(),l("div",{staticClass:"user-list-header"},[l("h1",{staticClass:"title"},[e._v("个人学籍异动")]),l("div",{staticClass:"title-content"},[l("el-row",[l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("学生ID：")]),e._v(e._s(e.studentInfo.student_id))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("姓名：")]),e._v(e._s(e.studentInfo.user_name))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("学院：")]),e._v(e._s(e.studentInfo.college_name))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("专业：")]),e._v(e._s(e.studentInfo.specialty_name))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("班级：")]),e._v(e._s(e.studentInfo.class_name))])],1)],1)]),l("div",{staticClass:"user-list-footer"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"审批状态"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.yearChange},model:{value:e.formInline.state,callback:function(t){e.$set(e.formInline,"state",t)},expression:"formInline.state"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),l("el-option",{attrs:{label:"已审批",value:0}}),l("el-option",{attrs:{label:"未审批",value:1}})],1)],1)],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rollList,stripe:""}},[l("el-table-column",{attrs:{label:"学籍异动ID",prop:"roll_id",width:"100",align:"center"}}),l("el-table-column",{attrs:{label:"课程学籍异动类型",prop:"roll_type",align:"center"}}),l("el-table-column",{attrs:{label:"学生描述",prop:"roll_desc",align:"center",width:"150"}}),l("el-table-column",{attrs:{label:"申请状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.roll_end_time?l("el-tag",[e._v("已审批")]):l("el-tag",{attrs:{type:"success"}},[e._v("待审批")])]}}])}),l("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("format")(t.row.roll_begin_time))+"\n        ")]}}])}),l("el-table-column",{attrs:{label:"结束时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("format")(t.row.roll_end_time))+"\n        ")]}}])}),l("el-table-column",{attrs:{label:"审批人",prop:"roll_auditor",align:"center"}}),l("el-table-column",{attrs:{label:"审批内容",prop:"roll_audit",align:"center",width:"150"}}),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[4===e.$store.state.userInfo.role_id?l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini",disabled:!!t.row.roll_end_time},on:{click:function(l){return e.handleClick(t.row,1)}}}):e._e(),4===e.$store.state.userInfo.role_id?l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,3)}}}):e._e(),3===e.$store.state.userInfo.role_id?l("el-button",{attrs:{type:"primary",size:"mini",disabled:!!t.row.roll_end_time},on:{click:function(l){return e.handleClick(t.row,3)}}},[e._v("\n            取消\n          ")]):e._e()]}}])})],1)],1),l("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{attrs:{model:e.rollObj,"label-width":"130px"}},[l("el-form-item",{attrs:{label:"学生ID",prop:"student_id"}},[l("el-input",{attrs:{disabled:""},model:{value:e.rollObj.student_id,callback:function(t){e.$set(e.rollObj,"student_id",t)},expression:"rollObj.student_id"}})],1),l("el-form-item",{attrs:{label:"学生姓名",prop:"user_name"}},[l("el-input",{attrs:{disabled:""},model:{value:e.rollObj.user_name,callback:function(t){e.$set(e.rollObj,"user_name",t)},expression:"rollObj.user_name"}})],1),l("el-form-item",{attrs:{label:"学籍异动类型",prop:"roll_type"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型",disabled:""},model:{value:e.rollObj.roll_type,callback:function(t){e.$set(e.rollObj,"roll_type",t)},expression:"rollObj.roll_type"}},[l("el-option",{attrs:{label:"休学",value:"休学"}}),l("el-option",{attrs:{label:"复学",value:"复学"}}),l("el-option",{attrs:{label:"退学",value:"退学"}}),l("el-option",{attrs:{label:"留级",value:"留级"}}),l("el-option",{attrs:{label:"当兵入伍",value:"当兵入伍"}}),l("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"创建时间"}},[e._v("\n          "+e._s(e._f("format")(e.rollObj.roll_begin_time))+"\n        ")])],1),l("el-form-item",{attrs:{label:"学生的描述"}},[l("el-input",{attrs:{type:"textarea",disabled:4===e.$store.state.userInfo.role_id},model:{value:e.rollObj.roll_desc,callback:function(t){e.$set(e.rollObj,"roll_desc",t)},expression:"rollObj.roll_desc"}})],1),l("el-form-item",{attrs:{label:"老师的描述"}},[l("el-input",{attrs:{type:"textarea",disabled:3===e.$store.state.userInfo.role_id},model:{value:e.rollObj.roll_audit,callback:function(t){e.$set(e.rollObj,"roll_audit",t)},expression:"rollObj.roll_audit"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},Ca=[],Ia={mounted:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,os(this.$route.query.student_id||this.$store.state.userInfo.student_id);case 2:t=e.sent,this.studentInfo=t,this.queryPersonRoll();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),filters:{format:function(e){return e?Pe()(e).format("YYYY-MM-DD HH:mm:ss"):""}},data:function(){return{formInline:{state:"all"},classObj:{teacher_id:"",specialty:"",college_id:"",class_name:""},applyObj:{course_id:"",student_id:"",course_name:"",type_begin_time:"",type_end_time:"",type_tea_desc:"",type_stu_desc:""},studentInfo:{},courseYearList:[],rollList:[],dialogVisible:!1,loading:!1,rollObj:{}}},methods:{queryPersonRoll:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.formInline.state,l=this.$route.query.student_id?this.$route.query.student_id:this.$store.state.userInfo.student_id,this.loading=!0,e.next=5,ba(l,t);case 5:r=e.sent,this.rollList=r,this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleApply:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(delete this.applyObj.course_name,this.applyObj.type_begin_time){e.next=9;break}return this.applyObj.type_begin_time=Pe()(new Date).format("YYYY-MM-DD HH:mm:ss"),e.next=5,ts(this.applyObj);case 5:t=e.sent,t&&(this.$message({type:"success",message:"申请成功!"}),this.queryStudentScore()),e.next=17;break;case 9:if(!this.applyObj.type_end_time){e.next=17;break}return this.applyObj.type_begin_time=Pe()(new Date).format("YYYY-MM-DD HH:mm:ss"),this.applyObj.type_end_time="",this.applyObj.type_tea_desc="",e.next=15,ts(this.applyObj);case 15:l=e.sent,l&&(this.$message({type:"success",message:"申请成功!"}),this.queryStudentScore());case 17:this.dialogVisible=!1;case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleClick:function(e,t){var l=this;1==t?(this.dialogVisible=!0,this.rollObj={roll_id:e.roll_id,student_id:this.$route.query.student_id,user_name:this.$route.query.user_name,roll_type:e.roll_type,roll_begin_time:e.roll_begin_time,roll_desc:e.roll_desc,roll_audit:e.roll_audit,roll_auditor:e.roll_auditor}):3===t&&this.$confirm("此操作将取消你的申请, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_a(e.roll_id);case 2:r=t.sent,r&&l.$message({type:"success",message:"删除成功!"}),l.queryPersonRoll();case 5:case"end":return t.stop()}}),t)})))).catch((function(){l.$message({type:"info",message:"已取消删除"})}))},yearChange:function(e){this.formInline.state=e,this.queryPersonRoll()},goBack:function(){this.$router.back()},submit:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogVisible=!1,this.rollObj.roll_end_time=Pe()(Date.now()).format("YYYY-MM-DD HH:mm:ss"),console.log(this.rollObj),e.next=5,fa(this.rollObj);case 5:t=e.sent,t&&(this.$message({type:"success",message:"审批成功!"}),this.queryPersonRoll());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{},components:{}},Ra=Ia,za=(l("0c5b"),Object(i["a"])(Ra,La,Ca,!1,null,"d9fa814c",null)),Fa=za.exports,qa={path:"/roll",name:"roll",meta:{name:"学籍管理"},component:ua,redirect:"/roll/list",children:[{path:"/roll/list",meta:{name:"学籍异动查询"},component:wa,children:[]},{path:"/roll/add",name:"rollAdd",meta:{name:"学籍异动申请"},component:Sa},{path:"/roll/person",name:"rollPerson",meta:{name:"个人学籍异动查询"},component:Fa}]},Pa=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("router-view")},Da=[],Ea={data:function(){return{}}},Ma=Ea,Ya=Object(i["a"])(Ma,Pa,Da,!1,null,"28f50c60",null),Ba=Ya.exports,Aa=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"所属专业"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.majorChange},model:{value:e.formInline.specialty,callback:function(t){e.$set(e.formInline,"specialty",t)},expression:"formInline.specialty"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})}))],2)],1),l("el-form-item",{attrs:{label:"所属班级"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formInline.class_id,callback:function(t){e.$set(e.formInline,"class_id",t)},expression:"formInline.class_id"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.classList,(function(e){return l("el-option",{key:e.class_id,attrs:{label:e.class_name,value:e.class_id}})}))],2)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.studentList,stripe:""}},[l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"student_id",label:"学生ID",align:"center"}}),l("el-table-column",{attrs:{prop:"user_name",label:"姓名",align:"center"}}),l("el-table-column",{attrs:{prop:"user_sex",label:"性别",align:"center"}}),l("el-table-column",{attrs:{prop:"college_name",label:"所属学院",align:"center"}}),l("el-table-column",{attrs:{prop:"specialty_name",label:"专业名称",align:"center"}}),l("el-table-column",{attrs:{prop:"class_name",label:"班级名称",align:"center"}}),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-view",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row)}}})]}}])})],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},Ta=[],Na={mounted:function(){var e=this;Ll().then((function(t){return e.majorList=t})),this.queryRoll()},data:function(){return{formInline:{class_id:"all",specialty:"all"},majorList:[],classList:[],studentList:[],page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{queryRoll:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.class_id,n=s.specialty,this.loading=!0,e.next=5,ss(l,r,a,n);case 5:o=e.sent,this.studentList=o.studentList,this.page=o.page,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){this.page.currentPage=1,this.queryRoll()},handleClick:function(e){console.log(e),this.$router.push({name:"personAdd",params:{data:{user_id:e.user_id,student_id:e.student_id,role_id:e.role_id,politics_status_info_id:e.politics_status_info_id}}})},handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryRoll()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryRoll()},majorChange:function(e){"all"!==e&&(this.classList=this.majorList.find((function(t){return t.specialty===e}))["classList"]),this.formInline.class_id="all"}},computed:{},components:{}},Ha=Na,Ua=(l("1ecb"),Object(i["a"])(Ha,Aa,Ta,!1,null,"2abee7dc",null)),Va=Ua.exports,Ja={path:"/studentInfo",name:"studentInfo",meta:{name:"学生基本信息管理"},component:Ba,redirect:"/studentInfo/list",children:[{path:"/studentInfo/list",meta:{name:"学生基本信息列表"},component:Va,children:[]}]},Ka=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("router-view")},Ga=[],Qa={data:function(){return{}}},Wa=Qa,Xa=Object(i["a"])(Wa,Ka,Ga,!1,null,"2f05e34f",null),Za=Xa.exports,en=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"所属专业"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.majorChange},model:{value:e.formInline.specialty,callback:function(t){e.$set(e.formInline,"specialty",t)},expression:"formInline.specialty"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})}))],2)],1),l("el-form-item",{attrs:{label:"所属班级"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formInline.class_id,callback:function(t){e.$set(e.formInline,"class_id",t)},expression:"formInline.class_id"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.classList,(function(e){return l("el-option",{key:e.class_id,attrs:{label:e.class_name,value:e.class_id}})}))],2)],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.studentList,stripe:""}},[l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"student_id",label:"学生ID",align:"center"}}),l("el-table-column",{attrs:{prop:"user_name",label:"姓名",align:"center"}}),l("el-table-column",{attrs:{prop:"user_sex",label:"性别",align:"center"}}),l("el-table-column",{attrs:{prop:"college_name",label:"所属学院",align:"center"}}),l("el-table-column",{attrs:{prop:"specialty_name",label:"专业名称",align:"center"}}),l("el-table-column",{attrs:{prop:"class_name",label:"班级名称",align:"center"}}),l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-view",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row)}}})]}}])})],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},tn=[],ln={mounted:function(){var e=this;Ll().then((function(t){return e.majorList=t})),this.queryRoll()},data:function(){return{formInline:{class_id:"all",specialty:"all"},majorList:[],classList:[],studentList:[],page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{queryRoll:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.class_id,n=s.specialty,this.loading=!0,e.next=5,ss(l,r,a,n);case 5:o=e.sent,this.studentList=o.studentList,this.page=o.page,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){this.page.currentPage=1,this.queryRoll()},handleClick:function(e){console.log(e),this.$router.push({name:"honorQuery",query:{user_id:e.user_id,student_id:e.student_id,role_id:e.role_id,politics_status_info_id:e.politics_status_info_id}})},handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryRoll()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryRoll()},majorChange:function(e){"all"!==e&&(this.classList=this.majorList.find((function(t){return t.specialty===e}))["classList"]),this.formInline.class_id="all"}},computed:{},components:{}},rn=ln,sn=(l("f05b"),Object(i["a"])(rn,en,tn,!1,null,"e49908b0",null)),an=sn.exports,nn=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"add-major"},[l("el-form",{ref:"honorObj",attrs:{model:e.honorObj,"label-width":"120px",rules:e.rules}},[e.$route.params.flag?l("el-page-header",{attrs:{content:"奖惩信息编辑"},on:{back:e.goBack}}):e._e(),l("el-row",[l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"所属学院",prop:"college_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.honorObj.college_id,callback:function(t){e.$set(e.honorObj,"college_id",t)},expression:"honorObj.college_id"}},e._l(e.collegeList,(function(e){return l("el-option",{key:e.college_id,attrs:{label:e.college_name,value:e.college_id}})})),1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"学生姓名",prop:"student_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择学生",disabled:this.$route.params.flag},model:{value:e.honorObj.student_id,callback:function(t){e.$set(e.honorObj,"student_id",t)},expression:"honorObj.student_id"}},e._l(e.$store.state.studentListByCollege,(function(e){return l("el-option",{key:e.student_id,attrs:{label:e.user_name,value:e.student_id}})})),1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"奖惩类型",prop:"honor_type"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.honorObj.honor_type,callback:function(t){e.$set(e.honorObj,"honor_type",t)},expression:"honorObj.honor_type"}},[l("el-option",{attrs:{label:"荣誉",value:0}}),l("el-option",{attrs:{label:"处分",value:1}})],1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"奖惩级别",prop:"honor_rank"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.honorObj.honor_rank,callback:function(t){e.$set(e.honorObj,"honor_rank",t)},expression:"honorObj.honor_rank"}},[l("el-option",{attrs:{label:"国家级",value:"国家级"}}),l("el-option",{attrs:{label:"省级",value:"省级"}}),l("el-option",{attrs:{label:"市级",value:"市级"}}),l("el-option",{attrs:{label:"校级",value:"校级"}}),l("el-option",{attrs:{label:"院级",value:"院级"}})],1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"奖惩名称",prop:"honor_name"}},[l("el-input",{attrs:{type:"text"},model:{value:e.honorObj.honor_name,callback:function(t){e.$set(e.honorObj,"honor_name",t)},expression:"honorObj.honor_name"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"时间",prop:"honor_time"}},[l("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.honorObj.honor_time,callback:function(t){e.$set(e.honorObj,"honor_time",t)},expression:"honorObj.honor_time"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"上传文件",prop:"fileList"}},[l("el-upload",{staticClass:"upload-demo",attrs:{action:"//localhost:3000/api/student/uploadFile","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.onSunccess,multiple:"","file-list":e.honorObj.fileList}},[l("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),l("el-col",{staticStyle:{"margin-top":"60px"},attrs:{span:10,offset:7}},[l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.params.flag?"提交":"添加"))]),l("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1)},on=[],cn=function(e){return C.post("/student/addHonor",e)},un=function(e){return C.post("/student/updateHonor",e)},dn=function(e,t){return C.get("/student/queryHonor",{params:{student_id:e,honor_type:t}})},pn=function(e){return C.get("/student/removeHonor",{params:{honor_id:e}})},mn={props:[],mounted:function(){var e=this;this.$store.dispatch("getStudentByCollege"),He().then((function(t){e.collegeList=t,e.honorObj.college_id=e.$store.state.userInfo.college_id}));var t=this.$route.params,l=t.flag,r=t.data;l&&(r.fileList.forEach((function(e){return e.name=e.file_url.substring(e.file_url.lastIndexOf("/")+1)})),r.honor_time=Pe()(r.honor_time).format("YYYY-MM-DD"),this.honorObj=r)},data:function(){return{honorObj:{college_id:-1,student_id:"",honor_type:"",honor_time:"",honor_name:"",honor_rank:"",fileList:[]},userList:[],collegeList:[],majorList:[],rules:{student_id:{required:!0,message:"请选择学生",trigger:"blur"},honor_type:{required:!0,message:"请选择奖惩类型",trigger:"blur"},honor_time:{required:!0,message:"请选择奖惩时间",trigger:"blur"},honor_name:{required:!0,message:"请输入奖惩名称",trigger:"blur"},honor_rank:{required:!0,message:"请选择奖惩级别",trigger:"blur"}}}},methods:{onSubmit:function(){var e=this;this.$refs["honorObj"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=13;break}if(!e.$route.params.flag){t.next=8;break}return t.next=4,un(e.honorObj);case 4:r=t.sent,console.log(111),t.next=11;break;case 8:return t.next=10,cn(e.honorObj);case 10:r=t.sent;case 11:r&&(e.honorObj={college_id:e.$store.state.userInfo.college_id,fileList:[]},e.$message({type:"success",message:e.$route.params.flag?"编辑成功!":"添加成功!"})),e.$route.params.flag&&e.goBack();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs["honorObj"].resetFields(),this.honorObj.college_id=this.$store.state.userInfo.college_id},goBack:function(){this.$router.back()},handleRemove:function(e){console.log(e);var t=this.honorObj.fileList.findIndex((function(t){return e.file_id===t.file_id}));this.honorObj.fileList.splice(t,1)},handlePreview:function(e){console.log(e)},beforeRemove:function(e,t){return console.log(t),this.$confirm("确定移除 ".concat(e.name,"？"))},onSunccess:function(e){this.honorObj.fileList.push({url:e.url,file_id:e.file_id,name:e.name})}}},fn=mn,bn=(l("3faf"),Object(i["a"])(fn,nn,on,!1,null,"2e0f388a",null)),_n=bn.exports,hn=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[e.$route.query.student_id?l("el-page-header",{attrs:{content:e.studentInfo.user_name+"奖惩信息"},on:{back:e.goBack}}):e._e(),l("div",{staticClass:"user-list-header"},[l("h1",{staticClass:"title"},[e._v("在校奖惩信息")]),l("div",{staticClass:"title-content"},[l("el-row",[l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("学生ID：")]),e._v(e._s(e.studentInfo.student_id))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("姓名：")]),e._v(e._s(e.studentInfo.user_name))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("学院：")]),e._v(e._s(e.studentInfo.college_name))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("专业：")]),e._v(e._s(e.studentInfo.specialty_name))]),l("el-col",{attrs:{span:4,offset:3}},[l("span",[e._v("班级：")]),e._v(e._s(e.studentInfo.class_name))])],1)],1)]),l("div",{staticClass:"user-list-footer"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"奖惩类型"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.yearChange},model:{value:e.formInline.honor_type,callback:function(t){e.$set(e.formInline,"honor_type",t)},expression:"formInline.honor_type"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),l("el-option",{attrs:{label:"荣誉",value:1}}),l("el-option",{attrs:{label:"处分",value:0}})],1)],1)],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.honorList,stripe:""}},[l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{label:"奖惩类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.honor_type?"荣誉":"处分")+"\n        ")]}}])}),l("el-table-column",{attrs:{label:"奖惩级别",prop:"honor_rank",align:"center"}}),l("el-table-column",{attrs:{label:"奖惩名称",prop:"honor_name",align:"center"}}),l("el-table-column",{attrs:{label:"奖惩时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("format")(t.row.honor_time))+"\n        ")]}}])}),l("el-table-column",{attrs:{label:"文件列表",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.fileList,(function(t,r){return l("el-link",{key:r,attrs:{type:"primary",href:t.file_url,target:"_blank"}},[e._v(e._s(t.file_url.substring(t.file_url.lastIndexOf("/")+1)))])}))}}])}),3!==e.$store.state.userInfo.role_id?l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[4===e.$store.state.userInfo.role_id?l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,1)}}}):e._e(),4===e.$store.state.userInfo.role_id?l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,2)}}}):e._e()]}}],null,!1,845977509)}):e._e()],1)],1)],1)},gn=[],yn={mounted:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,os(this.$route.query.student_id||this.$store.state.userInfo.student_id);case 2:t=e.sent,this.studentInfo=t,this.queryHonor();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{formInline:{honor_type:"all"},rules:{teacher_id:{required:!0,message:"请选择班主任",trigger:"blur"},specialty:{required:!0,message:"请选择专业",trigger:"blur"},college_id:{required:!0,message:"请选择学院",trigger:"blur"},class_name:{required:!0,message:"请填写班级名称",trigger:"blur"}},studentInfo:{},honorList:[],loading:!1}},filters:{format:function(e){return e?Pe()(e).format("YYYY-MM-DD"):""}},methods:{queryHonor:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.formInline.honor_type,l=this.$route.query.student_id?this.$route.query.student_id:this.$store.state.userInfo.student_id,this.loading=!0,e.next=5,dn(l,t);case 5:r=e.sent,console.log(r),this.honorList=r,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleClick:function(e,t){var l=this;1==t?this.$router.push({name:"honorEdit",params:{flag:!0,data:e}}):2==t?this.$confirm("确定要删除此记录吗？是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,pn(e.honor_id);case 2:r=t.sent,r&&(l.$message({type:"success",message:"删除成功!"}),l.queryHonor());case 4:case"end":return t.stop()}}),t)})))).catch((function(){l.$message({type:"info",message:"已取消删除"})})):3===t&&(this.dialogVisible=!0,this.applyObj={course_id:e.course_id,student_id:e.student_id,course_name:e.course_name,type_begin_time:e.type_begin_time?Pe()(e.type_begin_time).format("YYYY-MM-DD HH:mm:ss"):"",type_end_time:e.type_end_time?Pe()(e.type_end_time).format("YYYY-MM-DD HH:mm:ss"):"",type_tea_desc:e.type_tea_desc,type_stu_desc:e.type_stu_desc,score_dissent_type:e.score_dissent_type,score:e.score})},yearChange:function(e){this.formInline.course_year=e,this.queryHonor()},typeChange:function(e){this.formInline.course_type=e,this.queryHonor()},goBack:function(){this.$router.back()}},computed:{},components:{}},vn=yn,wn=(l("2490"),Object(i["a"])(vn,hn,gn,!1,null,"372cd0f3",null)),jn=wn.exports,kn={path:"/honor",name:"honor",meta:{name:"奖惩信息管理"},component:Za,redirect:"/honor/list",children:[{path:"/honor/list",meta:{name:"奖惩信息列表"},component:an,children:[]},{path:"/honor/add",name:"honorAdd",meta:{name:"奖惩信息添加"},component:_n},{path:"/honor/edit",name:"honorEdit",meta:{name:"奖惩信息编辑"},component:_n},{path:"/honor/query",name:"honorQuery",meta:{name:"奖惩信息查询"},component:jn}]},On=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("router-view")},xn=[],$n={data:function(){return{}}},Sn=$n,Ln=Object(i["a"])(Sn,On,xn,!1,null,"1e521b1c",null),Cn=Ln.exports,In=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"user-list"},[l("div",{staticClass:"user-list-header"},[l("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[l("el-form-item",{attrs:{label:"所属专业"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.majorChange},model:{value:e.formInline.specialty,callback:function(t){e.$set(e.formInline,"specialty",t)},expression:"formInline.specialty"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.majorList,(function(e){return l("el-option",{key:e.specialty,attrs:{label:e.specialty_name,value:e.specialty}})}))],2)],1),l("el-form-item",{attrs:{label:"所属班级"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formInline.class_id,callback:function(t){e.$set(e.formInline,"class_id",t)},expression:"formInline.class_id"}},[l("el-option",{attrs:{label:"全部",value:"all"}}),e._l(e.classList,(function(e){return l("el-option",{key:e.class_id,attrs:{label:e.class_name,value:e.class_id}})}))],2)],1),l("el-form-item",{attrs:{label:"姓名",prop:"user_name"}},[l("el-input",{attrs:{type:"text"},model:{value:e.formInline.user_name,callback:function(t){e.$set(e.formInline,"user_name",t)},expression:"formInline.user_name"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),l("div",{staticClass:"user-list-footer"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.jobList,stripe:""}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[l("el-form-item",{attrs:{label:"学生ID"}},[l("span",[e._v(e._s(t.row.student_id))])]),l("el-form-item",{attrs:{label:"姓名"}},[l("span",[e._v(e._s(t.row.user_name))])]),l("el-form-item",{attrs:{label:"所属学院"}},[l("span",[e._v(e._s(t.row.college_name))])]),l("el-form-item",{attrs:{label:"专业名称"}},[l("span",[e._v(e._s(t.row.specialty_name))])]),l("el-form-item",{attrs:{label:"班级名称"}},[l("span",[e._v(e._s(t.row.class_name))])]),l("el-form-item",{attrs:{label:"单位名称"}},[l("span",[e._v(e._s(t.row.job_name))])]),l("el-form-item",{attrs:{label:"社会信用代码"}},[l("span",[e._v(e._s(t.row.job_code))])]),l("el-form-item",{attrs:{label:"单位地址"}},[l("span",[e._v(e._s(t.row.job_address))])]),l("el-form-item",{attrs:{label:"单位联系人"}},[l("span",[e._v(e._s(t.row.job_person))])]),l("el-form-item",{attrs:{label:"联系人电话"}},[l("span",[e._v(e._s(t.row.job_tel))])]),l("el-form-item",{attrs:{label:"工作内容"}},[l("span",[e._v(e._s(t.row.job_content))])]),l("el-form-item",{attrs:{label:"文件列表"}},e._l(t.row.fileList,(function(t,r){return l("el-link",{key:r,staticStyle:{display:"block"},attrs:{type:"primary",href:t.file_url,target:"_blank"}},[e._v(e._s(t.file_url.substring(t.file_url.lastIndexOf("/")+1)))])})),1)],1)]}}])}),l("el-table-column",{attrs:{label:"序号",width:"50",type:"index",align:"center"}}),l("el-table-column",{attrs:{prop:"student_id",label:"学生ID",align:"center"}}),l("el-table-column",{attrs:{prop:"user_name",label:"姓名",align:"center"}}),l("el-table-column",{attrs:{prop:"college_name",label:"所属学院",align:"center"}}),l("el-table-column",{attrs:{prop:"specialty_name",label:"专业名称",align:"center"}}),l("el-table-column",{attrs:{prop:"class_name",label:"班级名称",align:"center"}}),l("el-table-column",{attrs:{prop:"job_name",label:"单位名称",align:"center"}}),l("el-table-column",{attrs:{prop:"job_code",label:"社会信用代码",align:"center"}}),l("el-table-column",{attrs:{prop:"job_address",label:"单位地址",align:"center"}}),l("el-table-column",{attrs:{prop:"job_person",label:"单位联系人",align:"center"}}),l("el-table-column",{attrs:{prop:"job_tel",label:"联系人电话",align:"center"}}),l("el-table-column",{attrs:{label:"文件列表",align:"center",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.fileList,(function(t,r){return l("el-link",{key:r,attrs:{type:"primary",href:t.file_url,target:"_blank"}},[e._v(e._s(t.file_url.substring(t.file_url.lastIndexOf("/")+1)))])}))}}])}),4===e.$store.state.userInfo.role_id?l("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,!0)}}}),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(l){return e.handleClick(t.row,!1)}}})]}}],null,!1,3048217037)}):e._e()],1),l("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, sizes",total:e.page.total,"current-page":e.page.currentPage,"page-sizes":[10,15,20],"page-size":e.page.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},Rn=[],zn=function(e){return C.post("/student/addJob",e)},Fn=function(e){return C.post("/student/updateJob",e)},qn=function(e){return C.get("/student/removeJob",{params:{job_id:e}})},Pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return C.get("/student/queryJob",{params:{currentPage:e,pageSize:t,class_id:l,specialty:r,user_name:s}})},Dn={mounted:function(){var e=this;Ll().then((function(t){return e.majorList=t})),this.queryRoll()},data:function(){return{formInline:{class_id:"all",specialty:"all",user_name:""},majorList:[],classList:[],jobList:[],page:{pageSize:10,currentPage:1,total:1},loading:!1}},methods:{queryRoll:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,l,r,s,a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.page,l=t.currentPage,r=t.pageSize,s=this.formInline,a=s.class_id,n=s.specialty,o=s.user_name,this.loading=!0,e.next=5,Pn(l,r,a,n,o);case 5:i=e.sent,this.jobList=i.jobList,this.page=i.page,this.loading=!1,console.log(this.jobList);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSubmit:function(){this.page.currentPage=1,this.queryRoll()},handleClick:function(e,t){var l=this;t?this.$router.push({name:"jobEdit",params:{flag:!0,data:e}}):this.$confirm("确定要删除此记录吗？是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qn(e.job_id);case 2:r=t.sent,r&&(l.$message({type:"success",message:"删除成功!"}),l.page.currentPage=1,l.queryCourse());case 4:case"end":return t.stop()}}),t)})))).catch((function(){l.$message({type:"info",message:"已取消删除"})}))},handleSizeChange:function(e){this.page.currentPage=1,this.page.pageSize=e,this.queryRoll()},handleCurrentChange:function(e){this.page.currentPage=e,this.queryRoll()},majorChange:function(e){"all"!==e&&(this.classList=this.majorList.find((function(t){return t.specialty===e}))["classList"]),this.formInline.class_id="all"}},computed:{},components:{}},En=Dn,Mn=(l("ddd7"),Object(i["a"])(En,In,Rn,!1,null,"7fd0f335",null)),Yn=Mn.exports,Bn=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"add-major"},[l("el-form",{ref:"jobObj",attrs:{model:e.jobObj,"label-width":"120px",rules:e.rules}},[e.$route.params.flag?l("el-page-header",{attrs:{content:"就业信息编辑"},on:{back:e.goBack}}):e._e(),l("el-row",[l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"所属学院",prop:"college_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.jobObj.college_id,callback:function(t){e.$set(e.jobObj,"college_id",t)},expression:"jobObj.college_id"}},e._l(e.collegeList,(function(e){return l("el-option",{key:e.college_id,attrs:{label:e.college_name,value:e.college_id}})})),1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"学生姓名",prop:"student_id"}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择学生",disabled:this.$route.params.flag},model:{value:e.jobObj.student_id,callback:function(t){e.$set(e.jobObj,"student_id",t)},expression:"jobObj.student_id"}},e._l(e.$store.state.studentListByCollege,(function(e){return l("el-option",{key:e.student_id,attrs:{label:e.user_name,value:e.student_id}})})),1)],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"单位名称",prop:"job_name"}},[l("el-input",{attrs:{type:"text"},model:{value:e.jobObj.job_name,callback:function(t){e.$set(e.jobObj,"job_name",t)},expression:"jobObj.job_name"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"社会信用代码",prop:"job_code"}},[l("el-input",{attrs:{type:"text"},model:{value:e.jobObj.job_code,callback:function(t){e.$set(e.jobObj,"job_code",t)},expression:"jobObj.job_code"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"单位地址",prop:"job_address"}},[l("el-input",{attrs:{type:"text"},model:{value:e.jobObj.job_address,callback:function(t){e.$set(e.jobObj,"job_address",t)},expression:"jobObj.job_address"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"单位联系人",prop:"job_person"}},[l("el-input",{attrs:{type:"text"},model:{value:e.jobObj.job_person,callback:function(t){e.$set(e.jobObj,"job_person",t)},expression:"jobObj.job_person"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"联系人电话",prop:"job_tel"}},[l("el-input",{attrs:{type:"text"},model:{value:e.jobObj.job_tel,callback:function(t){e.$set(e.jobObj,"job_tel",t)},expression:"jobObj.job_tel"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"工作内容",prop:"job_content"}},[l("el-input",{attrs:{type:"text"},model:{value:e.jobObj.job_content,callback:function(t){e.$set(e.jobObj,"job_content",t)},expression:"jobObj.job_content"}})],1)],1),l("el-col",{attrs:{span:8,offset:2}},[l("el-form-item",{attrs:{label:"上传文件",prop:"fileList"}},[l("el-upload",{staticClass:"upload-demo",attrs:{action:"//localhost:3000/api/student/uploadFile","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.onSunccess,multiple:"","file-list":e.jobObj.fileList}},[l("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),l("el-col",{staticStyle:{"margin-top":"60px"},attrs:{span:10,offset:7}},[l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.params.flag?"提交":"添加"))]),l("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1)},An=[],Tn={props:[],mounted:function(){var e=this;this.$store.dispatch("getStudentByCollege"),He().then((function(t){e.collegeList=t,e.jobObj.college_id=e.$store.state.userInfo.college_id}));var t=this.$route.params,l=t.flag,r=t.data;l&&(r.fileList.forEach((function(e){return e.name=e.file_url.substring(e.file_url.lastIndexOf("/")+1)})),r.honor_time=Pe()(r.honor_time).format("YYYY-MM-DD"),this.jobObj=r)},data:function(){return{jobObj:{college_id:-1,student_id:"",job_name:"",job_code:"",job_address:"",job_person:"",job_tel:"",job_content:"",fileList:[]},userList:[],collegeList:[],majorList:[],rules:{student_id:{required:!0,message:"请选择学生",trigger:"blur"},job_name:{required:!0,message:"请输入单位名称",trigger:"blur"},job_code:{required:!0,message:"请输入社会信用代码",trigger:"blur"},job_address:{required:!0,message:"请输入单位地址",trigger:"blur"},job_person:{required:!0,message:"请输入单位联系人",trigger:"blur"},job_tel:{required:!0,message:"请输入联系人电话",trigger:"blur"},job_content:{required:!0,message:"请输入工作内容",trigger:"blur"}}}},methods:{onSubmit:function(){var e=this;this.$refs["jobObj"].validate(function(){var t=Object(x["a"])(regeneratorRuntime.mark((function t(l){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l){t.next=13;break}if(!e.$route.params.flag){t.next=8;break}return t.next=4,Fn(e.jobObj);case 4:r=t.sent,console.log(111),t.next=11;break;case 8:return t.next=10,zn(e.jobObj);case 10:r=t.sent;case 11:r&&(e.jobObj={college_id:e.$store.state.userInfo.college_id,fileList:[]},e.$message({type:"success",message:e.$route.params.flag?"编辑成功!":"添加成功!"})),e.$route.params.flag&&e.goBack();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs["jobObj"].resetFields(),this.jobObj.college_id=this.$store.state.userInfo.college_id},goBack:function(){this.$router.back()},handleRemove:function(e){console.log(e);var t=this.jobObj.fileList.findIndex((function(t){return e.file_id===t.file_id}));this.jobObj.fileList.splice(t,1)},handlePreview:function(e){console.log(e)},beforeRemove:function(e,t){return console.log(t),this.$confirm("确定移除 ".concat(e.name,"？"))},onSunccess:function(e){this.jobObj.fileList.push({url:e.url,file_id:e.file_id,name:e.name})}}},Nn=Tn,Hn=(l("ab9d"),Object(i["a"])(Nn,Bn,An,!1,null,"2e8f3884",null)),Un=Hn.exports,Vn={path:"/job",name:"job",meta:{name:"就业信息管理"},component:Cn,redirect:"/job/list",children:[{path:"/job/list",meta:{name:"就业信息列表"},component:Yn,children:[]},{path:"/job/add",name:"jobAdd",meta:{name:"就业信息添加"},component:Un},{path:"/job/edit",name:"jobEdit",meta:{name:"就业信息编辑"},component:Un}]},Jn=d["a"].prototype.push;d["a"].prototype.push=function(e){return Jn.call(this,e).catch((function(e){return e}))},r["default"].use(d["a"]);var Kn,Gn=[{path:"/",name:"home",component:te,redirect:"/welcome",children:[{path:"/welcome",name:"welcome",meta:{name:"首页"},component:me,children:[]},{path:"/role",name:"role",meta:{name:"角色管理"},component:xe,children:[]},{path:"/user",name:"user",meta:{name:"用户管理"},component:Re,redirect:"/user/userList",children:[{path:"/user/userList",meta:{name:"用户列表"},component:tt,children:[]},{path:"/user/userAdd",meta:{name:"用户添加"},component:Wt},{path:"/user/userEdit",name:"userEdit",meta:{name:"用户编辑"},component:We}]},{path:"/college",name:"college",meta:{name:"学院管理"},component:rl,redirect:"/college/list",children:[{path:"/college/list",meta:{name:"学院列表"},component:cl,children:[]},{path:"/college/add",name:"collegeAdd",meta:{name:"学院添加"},component:bl},{path:"/college/edit",name:"collegeEdit",meta:{name:"学院编辑"},component:bl}]},{path:"/major",name:"major",meta:{name:"专业管理"},component:wl,redirect:"/major/list",children:[{path:"/major/list",meta:{name:"专业列表"},component:zl,children:[]},{path:"/major/add",name:"majorAdd",meta:{name:"专业添加"},component:Ml},{path:"/major/edit",name:"majorEdit",meta:{name:"专业编辑"},component:Ml}]},ir,Br,Es,sa,qa,Ja,kn,Vn,{name:"404",path:"/404",component:function(){return l.e("chunk-ba5247ce").then(l.bind(null,"89cc"))}}]},{path:"/login",name:"login",component:oe},{path:"*",redirect:"/404"}],Qn=new d["a"]({mode:"history",base:"/",routes:Gn}),Wn=Qn,Xn={roleList:[],userCollegeList:[],userInfo:{},politicsList:[],classList:[],userTeacherList:[],courseListByCollege:[],studentListByCollege:[]},Zn="receive_roll_all",eo="receive_user_college",to="login",lo="query_politics",ro="query_class",so="receive_teacher_user",ao="receive_college_student",no="receive_college_course",oo=function(){return C.get("/user/queryPolitics")},io={getAllRoll:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=t.commit,e.next=3,_e();case 3:r=e.sent,r.forEach((function(e){return e.role_rank=JSON.parse(e.role_rank)})),l(Zn,r);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getUserCollege:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=t.commit,e.next=3,E();case 3:r=e.sent,l(eo,r);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t,l){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r(to,l);case 2:case"end":return e.stop()}}),e)})));function t(t,l){return e.apply(this,arguments)}return t}(),getAllPolitics:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=t.commit,e.next=3,oo();case 3:r=e.sent,l(lo,r);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getAllClass:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=t.commit,e.next=3,Wl();case 3:r=e.sent,l(ro,r);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getUserTeacher:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=t.commit,e.next=3,M();case 3:r=e.sent,l(so,r);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getCourseByCollege:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=t.commit,e.next=3,kr();case 3:r=e.sent,l(no,r);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getStudentByCollege:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var l,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=t.commit,e.next=3,Gr();case 3:r=e.sent,l(ao,r);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},co=(Kn={},Object(Me["a"])(Kn,Zn,(function(e,t){e.roleList=t})),Object(Me["a"])(Kn,eo,(function(e,t){e.userCollegeList=t})),Object(Me["a"])(Kn,so,(function(e,t){e.userTeacherList=t})),Object(Me["a"])(Kn,to,(function(e,t){e.userInfo=t})),Object(Me["a"])(Kn,lo,(function(e,t){e.politicsList=t})),Object(Me["a"])(Kn,ro,(function(e,t){e.classList=t})),Object(Me["a"])(Kn,no,(function(e,t){e.courseListByCollege=t})),Object(Me["a"])(Kn,ao,(function(e,t){e.studentListByCollege=t})),Kn),uo={evenOrOdd:function(e){return e.count%2===0?"偶数":"奇数"}};r["default"].use(Ue["a"]);var po=new Ue["a"].Store({state:Xn,actions:io,mutations:co,getters:uo}),mo=l("323e"),fo=l.n(mo),bo=(l("a5d8"),{gotoLogin:function(){window.location.href="/login?returnurl="+escape(window.location.href)},formatDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";if(void 0!=e){var l=new Date(24*(e-1)*36e5+1);l.setYear(l.getFullYear()-70);var r=l.getFullYear()+"",s=l.getMonth()+1+"",a=l.getDate()+"";return t&&1===t.length?r+t+s+t+a:r+(s<10?"0"+s:s)+(a<10?"0"+a:a)}}}),_o=bo,ho=(l("4ee2"),l("5c96")),go=l.n(ho);l("0fae");r["default"].prototype.$=_o,r["default"].config.productionTip=!1,r["default"].use(go.a),fo.a.inc(.2),fo.a.configure({easing:"ease",speed:500,showSpinner:!1}),Wn.beforeEach((function(e,t,l){fo.a.start(),l()})),Wn.afterEach((function(){fo.a.done()})),new r["default"]({router:Wn,store:po,render:function(e){return e(u)}}).$mount("#app")},5727:function(e,t,l){"use strict";var r=l("c0d5"),s=l.n(r);s.a},"577d":function(e,t,l){"use strict";var r=l("467d"),s=l.n(r);s.a},5933:function(e,t,l){},"5a56":function(e,t,l){},"5c02":function(e,t,l){"use strict";var r=l("9121"),s=l.n(r);s.a},"5c0b":function(e,t,l){"use strict";var r=l("e332"),s=l.n(r);s.a},"5fb0":function(e,t,l){},"61bb":function(e,t,l){"use strict";var r=l("d691"),s=l.n(r);s.a},"62df":function(e,t,l){"use strict";var r=l("5a56"),s=l.n(r);s.a},6403:function(e,t,l){},6411:function(e,t,l){},6793:function(e,t,l){"use strict";var r=l("6411"),s=l.n(r);s.a},"68db":function(e,t,l){},"69c1":function(e,t,l){},"700b":function(e,t,l){"use strict";var r=l("f545"),s=l.n(r);s.a},"74ae":function(e,t,l){},7957:function(e,t,l){"use strict";var r=l("f100"),s=l.n(r);s.a},8293:function(e,t,l){},"862c":function(e,t,l){},8759:function(e,t,l){},"87d8":function(e,t,l){"use strict";var r=l("02eb"),s=l.n(r);s.a},"8c0d":function(e,t,l){"use strict";var r=l("74ae"),s=l.n(r);s.a},"909b":function(e,t,l){},9105:function(e,t,l){"use strict";var r=l("8759"),s=l.n(r);s.a},9121:function(e,t,l){},9141:function(e,t,l){},"92c4":function(e,t,l){},"93d5":function(e,t,l){"use strict";var r=l("69c1"),s=l.n(r);s.a},"9e64":function(e,t,l){"use strict";var r=l("f65b"),s=l.n(r);s.a},"9f97":function(e,t,l){},a1a4:function(e,t,l){"use strict";var r=l("aa4e"),s=l.n(r);s.a},a3f3:function(e,t,l){},a8f2:function(e,t,l){"use strict";var r=l("c74c"),s=l.n(r);s.a},a9f9:function(e,t,l){"use strict";var r=l("c04d"),s=l.n(r);s.a},aa4e:function(e,t,l){},ab9d:function(e,t,l){"use strict";var r=l("68db"),s=l.n(r);s.a},abad:function(e,t,l){},b165:function(e,t,l){"use strict";var r=l("909b"),s=l.n(r);s.a},b907:function(e,t,l){"use strict";var r=l("862c"),s=l.n(r);s.a},b93d:function(e,t,l){"use strict";var r=l("abad"),s=l.n(r);s.a},b9a3:function(e,t,l){},c003:function(e,t,l){"use strict";var r=l("3a59"),s=l.n(r);s.a},c04d:function(e,t,l){},c0d5:function(e,t,l){},c74c:function(e,t,l){},c8cb:function(e,t,l){},ca9a:function(e,t,l){"use strict";var r=l("6403"),s=l.n(r);s.a},ccda:function(e,t,l){"use strict";var r=l("fc34"),s=l.n(r);s.a},cf05:function(e,t,l){e.exports=l.p+"img/logo.51f916b8.png"},d25e:function(e,t,l){"use strict";var r=l("ff86"),s=l.n(r);s.a},d691:function(e,t,l){},dccd:function(e,t,l){},ddd7:function(e,t,l){"use strict";var r=l("35ec"),s=l.n(r);s.a},e100:function(e,t,l){"use strict";var r=l("42a4"),s=l.n(r);s.a},e332:function(e,t,l){},e584:function(e,t,l){"use strict";var r=l("f407"),s=l.n(r);s.a},e910:function(e,t,l){},ec4d:function(e,t,l){"use strict";var r=l("fc33"),s=l.n(r);s.a},f05b:function(e,t,l){"use strict";var r=l("b9a3"),s=l.n(r);s.a},f0ea:function(e,t,l){"use strict";var r=l("8293"),s=l.n(r);s.a},f100:function(e,t,l){},f407:function(e,t,l){},f455:function(e,t,l){"use strict";var r=l("e910"),s=l.n(r);s.a},f545:function(e,t,l){},f64f:function(e,t,l){"use strict";var r=l("9141"),s=l.n(r);s.a},f65b:function(e,t,l){},fc33:function(e,t,l){},fc34:function(e,t,l){},ff86:function(e,t,l){}});
//# sourceMappingURL=app.a18915a0.js.map